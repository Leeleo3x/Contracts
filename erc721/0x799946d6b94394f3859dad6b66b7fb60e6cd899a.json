{"Runs": "200", "SwarmSource": "bzzr://d4652f7817334c70c4d6282e7a0df0bf4bb14b846b236304d464217fcd51a5b6", "ABI": "[{\"constant\":true,\"inputs\":[{\"name\":\"_interfaceId\",\"type\":\"bytes4\"}],\"name\":\"supportsInterface\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"name\",\"outputs\":[{\"name\":\"\",\"type\":\"string\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_tokenId\",\"type\":\"uint256\"}],\"name\":\"getApproved\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"sanMaxFree\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_to\",\"type\":\"address\"},{\"name\":\"_tokenId\",\"type\":\"uint256\"}],\"name\":\"approve\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"sanMaxLength\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"totalSupply\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_sanId\",\"type\":\"uint256\"}],\"name\":\"getSanTimeAlive\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"InterfaceId_ERC165\",\"outputs\":[{\"name\":\"\",\"type\":\"bytes4\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_amount\",\"type\":\"uint256\"}],\"name\":\"setSanMaxAmount\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_from\",\"type\":\"address\"},{\"name\":\"_to\",\"type\":\"address\"},{\"name\":\"_tokenId\",\"type\":\"uint256\"}],\"name\":\"transferFrom\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_cost\",\"type\":\"uint256\"}],\"name\":\"setSanTTTCost\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_owner\",\"type\":\"address\"},{\"name\":\"_index\",\"type\":\"uint256\"}],\"name\":\"tokenOfOwnerByIndex\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_sanId\",\"type\":\"uint256\"}],\"name\":\"getSanPrevOwner\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_sanId\",\"type\":\"uint256\"},{\"name\":\"_sanName\",\"type\":\"string\"},{\"name\":\"_prevOwner\",\"type\":\"address\"},{\"name\":\"_newOwner\",\"type\":\"address\"}],\"name\":\"marketSale\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_sanName\",\"type\":\"string\"},{\"name\":\"_sanageUri\",\"type\":\"string\"},{\"name\":\"_address\",\"type\":\"address\"}],\"name\":\"specialSanMint\",\"outputs\":[{\"name\":\"\",\"type\":\"string\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_sanName\",\"type\":\"string\"}],\"name\":\"getSANitized\",\"outputs\":[{\"name\":\"\",\"type\":\"string\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_from\",\"type\":\"address\"},{\"name\":\"_to\",\"type\":\"address\"},{\"name\":\"_tokenId\",\"type\":\"uint256\"}],\"name\":\"safeTransferFrom\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_sanName\",\"type\":\"string\"}],\"name\":\"getSanIdFromName\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"emptyTTT\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_sanMaxFree\",\"type\":\"uint256\"}],\"name\":\"setSanMaxFree\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_tokenId\",\"type\":\"uint256\"}],\"name\":\"exists\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_index\",\"type\":\"uint256\"}],\"name\":\"tokenByIndex\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_length\",\"type\":\"uint256\"},{\"name\":\"_pos\",\"type\":\"uint256\"}],\"name\":\"setSanLength\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"wallet\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"baseUrl\",\"outputs\":[{\"name\":\"\",\"type\":\"string\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"sanCurrentTotal\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_tokenId\",\"type\":\"uint256\"}],\"name\":\"ownerOf\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_sanOwner\",\"type\":\"address[]\"},{\"name\":\"_slotCount\",\"type\":\"uint256[]\"}],\"name\":\"ownerAddSanSlotBatch\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"sanMaxAmount\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_sanOwner\",\"type\":\"address\"},{\"name\":\"_tip\",\"type\":\"uint256\"}],\"name\":\"buySanSlot\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_owner\",\"type\":\"address\"}],\"name\":\"balanceOf\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"renounceOwnership\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"owner\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"emptyEther\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"marketAddress\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"symbol\",\"outputs\":[{\"name\":\"\",\"type\":\"string\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_sanId\",\"type\":\"uint256\"}],\"name\":\"getSanageLink\",\"outputs\":[{\"name\":\"\",\"type\":\"string\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_to\",\"type\":\"address\"},{\"name\":\"_approved\",\"type\":\"bool\"}],\"name\":\"setApprovalForAll\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"tttTokenAddress\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_sanOwner\",\"type\":\"address\"}],\"name\":\"getSanSlots\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"sanMinLength\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_sanOwner\",\"type\":\"address\"},{\"name\":\"_slotCount\",\"type\":\"uint256\"}],\"name\":\"ownerAddSanSlot\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_sanName\",\"type\":\"string\"}],\"name\":\"getAddressFromSan\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_from\",\"type\":\"address\"},{\"name\":\"_to\",\"type\":\"address\"},{\"name\":\"_tokenId\",\"type\":\"uint256\"},{\"name\":\"_data\",\"type\":\"bytes\"}],\"name\":\"safeTransferFrom\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_wallet\",\"type\":\"address\"}],\"name\":\"setOwnerWallet\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_sanId\",\"type\":\"uint256\"}],\"name\":\"getSanTimeLastMove\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_sanId\",\"type\":\"uint256\"}],\"name\":\"getSANOwner\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"sans\",\"outputs\":[{\"name\":\"sanName\",\"type\":\"string\"},{\"name\":\"timeAlive\",\"type\":\"uint256\"},{\"name\":\"timeLastMove\",\"type\":\"uint256\"},{\"name\":\"prevOwner\",\"type\":\"address\"},{\"name\":\"sanageLink\",\"type\":\"string\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_baseUrl\",\"type\":\"string\"}],\"name\":\"setBaseUrl\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_tokenId\",\"type\":\"uint256\"}],\"name\":\"tokenURI\",\"outputs\":[{\"name\":\"\",\"type\":\"string\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_sanId\",\"type\":\"uint256\"},{\"name\":\"_newUri\",\"type\":\"string\"}],\"name\":\"updateTokenUri\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_sanId\",\"type\":\"uint256\"}],\"name\":\"getSanName\",\"outputs\":[{\"name\":\"\",\"type\":\"string\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_sanName\",\"type\":\"string\"},{\"name\":\"_sanageUri\",\"type\":\"string\"}],\"name\":\"sanMint\",\"outputs\":[{\"name\":\"\",\"type\":\"string\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_owner\",\"type\":\"address\"},{\"name\":\"_operator\",\"type\":\"address\"}],\"name\":\"isApprovedForAll\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_newOwner\",\"type\":\"address\"}],\"name\":\"transferOwnership\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"sanTTTCost\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_marketAddress\",\"type\":\"address\"}],\"name\":\"setMarketAddress\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"payable\":true,\"stateMutability\":\"payable\",\"type\":\"fallback\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"sanOwner\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"sanId\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"sanName\",\"type\":\"string\"}],\"name\":\"SanMinted\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"sanOwner\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"amt\",\"type\":\"uint256\"}],\"name\":\"SanSlotPurchase\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"cost\",\"type\":\"uint256\"}],\"name\":\"SanCostUpdated\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"sanMinLength\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"sanMaxLength\",\"type\":\"uint256\"}],\"name\":\"SanLengthReqChange\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"sanMaxAmount\",\"type\":\"uint256\"}],\"name\":\"SanMaxAmountChange\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"previousOwner\",\"type\":\"address\"}],\"name\":\"OwnershipRenounced\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"previousOwner\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"newOwner\",\"type\":\"address\"}],\"name\":\"OwnershipTransferred\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"_from\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"_to\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"_tokenId\",\"type\":\"uint256\"}],\"name\":\"Transfer\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"_owner\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"_approved\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"_tokenId\",\"type\":\"uint256\"}],\"name\":\"Approval\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"_owner\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"_operator\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"_approved\",\"type\":\"bool\"}],\"name\":\"ApprovalForAll\",\"type\":\"event\"}]", "Library": "", "CompilerVersion": "v0.4.24+commit.e67f0147", "ConstructorArguments": "", "SourceCode": "pragma solidity ^0.4.24;\r\n\r\n\r\n/**\r\n * @title Ownable\r\n * @dev The Ownable contract has an owner address, and provides basic authorization control\r\n * functions, this simplifies the implementation of \"user permissions\".\r\n */\r\ncontract Ownable {\r\n  address public owner;\r\n\r\n\r\n  event OwnershipRenounced(address indexed previousOwner);\r\n  event OwnershipTransferred(\r\n    address indexed previousOwner,\r\n    address indexed newOwner\r\n  );\r\n\r\n\r\n  /**\r\n   * @dev The Ownable constructor sets the original `owner` of the contract to the sender\r\n   * account.\r\n   */\r\n  constructor() public {\r\n    owner = msg.sender;\r\n  }\r\n\r\n  /**\r\n   * @dev Throws if called by any account other than the owner.\r\n   */\r\n  modifier onlyOwner() {\r\n    require(msg.sender == owner);\r\n    _;\r\n  }\r\n\r\n  /**\r\n   * @dev Allows the current owner to relinquish control of the contract.\r\n   * @notice Renouncing to ownership will leave the contract without an owner.\r\n   * It will not be possible to call the functions with the `onlyOwner`\r\n   * modifier anymore.\r\n   */\r\n  function renounceOwnership() public onlyOwner {\r\n    emit OwnershipRenounced(owner);\r\n    owner = address(0);\r\n  }\r\n\r\n  /**\r\n   * @dev Allows the current owner to transfer control of the contract to a newOwner.\r\n   * @param _newOwner The address to transfer ownership to.\r\n   */\r\n  function transferOwnership(address _newOwner) public onlyOwner {\r\n    _transferOwnership(_newOwner);\r\n  }\r\n\r\n  /**\r\n   * @dev Transfers control of the contract to a newOwner.\r\n   * @param _newOwner The address to transfer ownership to.\r\n   */\r\n  function _transferOwnership(address _newOwner) internal {\r\n    require(_newOwner != address(0));\r\n    emit OwnershipTransferred(owner, _newOwner);\r\n    owner = _newOwner;\r\n  }\r\n}\r\n\r\n/**\r\n * Utility library of inline functions on addresses\r\n */\r\nlibrary AddressUtils {\r\n\r\n  /**\r\n   * Returns whether the target address is a contract\r\n   * @dev This function will return false if invoked during the constructor of a contract,\r\n   * as the code is not actually created until after the constructor finishes.\r\n   * @param addr address to check\r\n   * @return whether the target address is a contract\r\n   */\r\n  function isContract(address addr) internal view returns (bool) {\r\n    uint256 size;\r\n    // XXX Currently there is no better way to check if there is a contract in an address\r\n    // than to check the size of the code at that address.\r\n    // See https://ethereum.stackexchange.com/a/14016/36603\r\n    // for more details about how this works.\r\n    // TODO Check this again before the Serenity release, because all addresses will be\r\n    // contracts then.\r\n    // solium-disable-next-line security/no-inline-assembly\r\n    assembly { size := extcodesize(addr) }\r\n    return size > 0;\r\n  }\r\n\r\n}\r\n\r\n/**\r\n * @title SafeMath\r\n * @dev Math operations with safety checks that throw on error\r\n */\r\nlibrary SafeMath {\r\n\r\n  /**\r\n  * @dev Multiplies two numbers, throws on overflow.\r\n  */\r\n  function mul(uint256 a, uint256 b) internal pure returns (uint256 c) {\r\n    // Gas optimization: this is cheaper than asserting 'a' not being zero, but the\r\n    // benefit is lost if 'b' is also tested.\r\n    // See: https://github.com/OpenZeppelin/openzeppelin-solidity/pull/522\r\n    if (a == 0) {\r\n      return 0;\r\n    }\r\n\r\n    c = a * b;\r\n    assert(c / a == b);\r\n    return c;\r\n  }\r\n\r\n  /**\r\n  * @dev Integer division of two numbers, truncating the quotient.\r\n  */\r\n  function div(uint256 a, uint256 b) internal pure returns (uint256) {\r\n    // assert(b > 0); // Solidity automatically throws when dividing by 0\r\n    // uint256 c = a / b;\r\n    // assert(a == b * c + a % b); // There is no case in which this doesn't hold\r\n    return a / b;\r\n  }\r\n\r\n  /**\r\n  * @dev Subtracts two numbers, throws on overflow (i.e. if subtrahend is greater than minuend).\r\n  */\r\n  function sub(uint256 a, uint256 b) internal pure returns (uint256) {\r\n    assert(b <= a);\r\n    return a - b;\r\n  }\r\n\r\n  /**\r\n  * @dev Adds two numbers, throws on overflow.\r\n  */\r\n  function add(uint256 a, uint256 b) internal pure returns (uint256 c) {\r\n    c = a + b;\r\n    assert(c >= a);\r\n    return c;\r\n  }\r\n}\r\n\r\n\r\n/**\r\n * @title ERC165\r\n * @dev https://github.com/ethereum/EIPs/blob/master/EIPS/eip-165.md\r\n */\r\ninterface ERC165 {\r\n\r\n  /**\r\n   * @notice Query if a contract implements an interface\r\n   * @param _interfaceId The interface identifier, as specified in ERC-165\r\n   * @dev Interface identification is specified in ERC-165. This function\r\n   * uses less than 30,000 gas.\r\n   */\r\n  function supportsInterface(bytes4 _interfaceId)\r\n    external\r\n    view\r\n    returns (bool);\r\n}\r\n\r\n/**\r\n * @title SupportsInterfaceWithLookup\r\n * @author Matt Condon (@shrugs)\r\n * @dev Implements ERC165 using a lookup table.\r\n */\r\ncontract SupportsInterfaceWithLookup is ERC165 {\r\n\r\n  bytes4 public constant InterfaceId_ERC165 = 0x01ffc9a7;\r\n  /**\r\n   * 0x01ffc9a7 ===\r\n   *   bytes4(keccak256('supportsInterface(bytes4)'))\r\n   */\r\n\r\n  /**\r\n   * @dev a mapping of interface id to whether or not it's supported\r\n   */\r\n  mapping(bytes4 => bool) internal supportedInterfaces;\r\n\r\n  /**\r\n   * @dev A contract implementing SupportsInterfaceWithLookup\r\n   * implement ERC165 itself\r\n   */\r\n  constructor()\r\n    public\r\n  {\r\n    _registerInterface(InterfaceId_ERC165);\r\n  }\r\n\r\n  /**\r\n   * @dev implement supportsInterface(bytes4) using a lookup table\r\n   */\r\n  function supportsInterface(bytes4 _interfaceId)\r\n    external\r\n    view\r\n    returns (bool)\r\n  {\r\n    return supportedInterfaces[_interfaceId];\r\n  }\r\n\r\n  /**\r\n   * @dev private method for registering an interface\r\n   */\r\n  function _registerInterface(bytes4 _interfaceId)\r\n    internal\r\n  {\r\n    require(_interfaceId != 0xffffffff);\r\n    supportedInterfaces[_interfaceId] = true;\r\n  }\r\n}\r\n\r\n\r\n/**\r\n * @title ERC721 Non-Fungible Token Standard basic interface\r\n * @dev see https://github.com/ethereum/EIPs/blob/master/EIPS/eip-721.md\r\n */\r\ncontract ERC721Basic is ERC165 {\r\n\r\n  bytes4 internal constant InterfaceId_ERC721 = 0x80ac58cd;\r\n  /*\r\n   * 0x80ac58cd ===\r\n   *   bytes4(keccak256('balanceOf(address)')) ^\r\n   *   bytes4(keccak256('ownerOf(uint256)')) ^\r\n   *   bytes4(keccak256('approve(address,uint256)')) ^\r\n   *   bytes4(keccak256('getApproved(uint256)')) ^\r\n   *   bytes4(keccak256('setApprovalForAll(address,bool)')) ^\r\n   *   bytes4(keccak256('isApprovedForAll(address,address)')) ^\r\n   *   bytes4(keccak256('transferFrom(address,address,uint256)')) ^\r\n   *   bytes4(keccak256('safeTransferFrom(address,address,uint256)')) ^\r\n   *   bytes4(keccak256('safeTransferFrom(address,address,uint256,bytes)'))\r\n   */\r\n\r\n  bytes4 internal constant InterfaceId_ERC721Exists = 0x4f558e79;\r\n  /*\r\n   * 0x4f558e79 ===\r\n   *   bytes4(keccak256('exists(uint256)'))\r\n   */\r\n\r\n  bytes4 internal constant InterfaceId_ERC721Enumerable = 0x780e9d63;\r\n  /**\r\n   * 0x780e9d63 ===\r\n   *   bytes4(keccak256('totalSupply()')) ^\r\n   *   bytes4(keccak256('tokenOfOwnerByIndex(address,uint256)')) ^\r\n   *   bytes4(keccak256('tokenByIndex(uint256)'))\r\n   */\r\n\r\n  bytes4 internal constant InterfaceId_ERC721Metadata = 0x5b5e139f;\r\n  /**\r\n   * 0x5b5e139f ===\r\n   *   bytes4(keccak256('name()')) ^\r\n   *   bytes4(keccak256('symbol()')) ^\r\n   *   bytes4(keccak256('tokenURI(uint256)'))\r\n   */\r\n\r\n  event Transfer(\r\n    address indexed _from,\r\n    address indexed _to,\r\n    uint256 indexed _tokenId\r\n  );\r\n  event Approval(\r\n    address indexed _owner,\r\n    address indexed _approved,\r\n    uint256 indexed _tokenId\r\n  );\r\n  event ApprovalForAll(\r\n    address indexed _owner,\r\n    address indexed _operator,\r\n    bool _approved\r\n  );\r\n\r\n  function balanceOf(address _owner) public view returns (uint256 _balance);\r\n  function ownerOf(uint256 _tokenId) public view returns (address _owner);\r\n  function exists(uint256 _tokenId) public view returns (bool _exists);\r\n\r\n  function approve(address _to, uint256 _tokenId) public;\r\n  function getApproved(uint256 _tokenId)\r\n    public view returns (address _operator);\r\n\r\n  function setApprovalForAll(address _operator, bool _approved) public;\r\n  function isApprovedForAll(address _owner, address _operator)\r\n    public view returns (bool);\r\n\r\n  function transferFrom(address _from, address _to, uint256 _tokenId) public;\r\n  function safeTransferFrom(address _from, address _to, uint256 _tokenId)\r\n    public;\r\n\r\n  function safeTransferFrom(\r\n    address _from,\r\n    address _to,\r\n    uint256 _tokenId,\r\n    bytes _data\r\n  )\r\n    public;\r\n}\r\n\r\n\r\n/**\r\n * @title ERC-721 Non-Fungible Token Standard, optional enumeration extension\r\n * @dev See https://github.com/ethereum/EIPs/blob/master/EIPS/eip-721.md\r\n */\r\ncontract ERC721Enumerable is ERC721Basic {\r\n  function totalSupply() public view returns (uint256);\r\n  function tokenOfOwnerByIndex(\r\n    address _owner,\r\n    uint256 _index\r\n  )\r\n    public\r\n    view\r\n    returns (uint256 _tokenId);\r\n\r\n  function tokenByIndex(uint256 _index) public view returns (uint256);\r\n}\r\n\r\n\r\n/**\r\n * @title ERC-721 Non-Fungible Token Standard, optional metadata extension\r\n * @dev See https://github.com/ethereum/EIPs/blob/master/EIPS/eip-721.md\r\n */\r\ncontract ERC721Metadata is ERC721Basic {\r\n  function name() external view returns (string _name);\r\n  function symbol() external view returns (string _symbol);\r\n  function tokenURI(uint256 _tokenId) public view returns (string);\r\n}\r\n\r\n\r\n/**\r\n * @title ERC-721 Non-Fungible Token Standard, full implementation interface\r\n * @dev See https://github.com/ethereum/EIPs/blob/master/EIPS/eip-721.md\r\n */\r\ncontract ERC721 is ERC721Basic, ERC721Enumerable, ERC721Metadata {\r\n}\r\n\r\n/**\r\n * @title ERC721 Non-Fungible Token Standard basic implementation\r\n * @dev see https://github.com/ethereum/EIPs/blob/master/EIPS/eip-721.md\r\n */\r\ncontract ERC721BasicToken is SupportsInterfaceWithLookup, ERC721Basic {\r\n\r\n  using SafeMath for uint256;\r\n  using AddressUtils for address;\r\n\r\n  // Equals to `bytes4(keccak256(\"onERC721Received(address,address,uint256,bytes)\"))`\r\n  // which can be also obtained as `ERC721Receiver(0).onERC721Received.selector`\r\n  bytes4 private constant ERC721_RECEIVED = 0x150b7a02;\r\n\r\n  // Mapping from token ID to owner\r\n  mapping (uint256 => address) internal tokenOwner;\r\n\r\n  // Mapping from token ID to approved address\r\n  mapping (uint256 => address) internal tokenApprovals;\r\n\r\n  // Mapping from owner to number of owned token\r\n  mapping (address => uint256) internal ownedTokensCount;\r\n\r\n  // Mapping from owner to operator approvals\r\n  mapping (address => mapping (address => bool)) internal operatorApprovals;\r\n\r\n  constructor()\r\n    public\r\n  {\r\n    // register the supported interfaces to conform to ERC721 via ERC165\r\n    _registerInterface(InterfaceId_ERC721);\r\n    _registerInterface(InterfaceId_ERC721Exists);\r\n  }\r\n\r\n  /**\r\n   * @dev Gets the balance of the specified address\r\n   * @param _owner address to query the balance of\r\n   * @return uint256 representing the amount owned by the passed address\r\n   */\r\n  function balanceOf(address _owner) public view returns (uint256) {\r\n    require(_owner != address(0));\r\n    return ownedTokensCount[_owner];\r\n  }\r\n\r\n  /**\r\n   * @dev Gets the owner of the specified token ID\r\n   * @param _tokenId uint256 ID of the token to query the owner of\r\n   * @return owner address currently marked as the owner of the given token ID\r\n   */\r\n  function ownerOf(uint256 _tokenId) public view returns (address) {\r\n    address owner = tokenOwner[_tokenId];\r\n    require(owner != address(0));\r\n    return owner;\r\n  }\r\n\r\n  /**\r\n   * @dev Returns whether the specified token exists\r\n   * @param _tokenId uint256 ID of the token to query the existence of\r\n   * @return whether the token exists\r\n   */\r\n  function exists(uint256 _tokenId) public view returns (bool) {\r\n    address owner = tokenOwner[_tokenId];\r\n    return owner != address(0);\r\n  }\r\n\r\n  /**\r\n   * @dev Approves another address to transfer the given token ID\r\n   * The zero address indicates there is no approved address.\r\n   * There can only be one approved address per token at a given time.\r\n   * Can only be called by the token owner or an approved operator.\r\n   * @param _to address to be approved for the given token ID\r\n   * @param _tokenId uint256 ID of the token to be approved\r\n   */\r\n  function approve(address _to, uint256 _tokenId) public {\r\n    address owner = ownerOf(_tokenId);\r\n    require(_to != owner);\r\n    require(msg.sender == owner || isApprovedForAll(owner, msg.sender));\r\n\r\n    tokenApprovals[_tokenId] = _to;\r\n    emit Approval(owner, _to, _tokenId);\r\n  }\r\n\r\n  /**\r\n   * @dev Gets the approved address for a token ID, or zero if no address set\r\n   * @param _tokenId uint256 ID of the token to query the approval of\r\n   * @return address currently approved for the given token ID\r\n   */\r\n  function getApproved(uint256 _tokenId) public view returns (address) {\r\n    return tokenApprovals[_tokenId];\r\n  }\r\n\r\n  /**\r\n   * @dev Sets or unsets the approval of a given operator\r\n   * An operator is allowed to transfer all tokens of the sender on their behalf\r\n   * @param _to operator address to set the approval\r\n   * @param _approved representing the status of the approval to be set\r\n   */\r\n  function setApprovalForAll(address _to, bool _approved) public {\r\n    require(_to != msg.sender);\r\n    operatorApprovals[msg.sender][_to] = _approved;\r\n    emit ApprovalForAll(msg.sender, _to, _approved);\r\n  }\r\n\r\n  /**\r\n   * @dev Tells whether an operator is approved by a given owner\r\n   * @param _owner owner address which you want to query the approval of\r\n   * @param _operator operator address which you want to query the approval of\r\n   * @return bool whether the given operator is approved by the given owner\r\n   */\r\n  function isApprovedForAll(\r\n    address _owner,\r\n    address _operator\r\n  )\r\n    public\r\n    view\r\n    returns (bool)\r\n  {\r\n    return operatorApprovals[_owner][_operator];\r\n  }\r\n\r\n  /**\r\n   * @dev Transfers the ownership of a given token ID to another address\r\n   * Usage of this method is discouraged, use `safeTransferFrom` whenever possible\r\n   * Requires the msg sender to be the owner, approved, or operator\r\n   * @param _from current owner of the token\r\n   * @param _to address to receive the ownership of the given token ID\r\n   * @param _tokenId uint256 ID of the token to be transferred\r\n  */\r\n  function transferFrom(\r\n    address _from,\r\n    address _to,\r\n    uint256 _tokenId\r\n  )\r\n    public\r\n  {\r\n    require(isApprovedOrOwner(msg.sender, _tokenId));\r\n    require(_from != address(0));\r\n    require(_to != address(0));\r\n\r\n    clearApproval(_from, _tokenId);\r\n    removeTokenFrom(_from, _tokenId);\r\n    addTokenTo(_to, _tokenId);\r\n\r\n    emit Transfer(_from, _to, _tokenId);\r\n  }\r\n\r\n  /**\r\n   * @dev Safely transfers the ownership of a given token ID to another address\r\n   * If the target address is a contract, it must implement `onERC721Received`,\r\n   * which is called upon a safe transfer, and return the magic value\r\n   * `bytes4(keccak256(\"onERC721Received(address,address,uint256,bytes)\"))`; otherwise,\r\n   * the transfer is reverted.\r\n   *\r\n   * Requires the msg sender to be the owner, approved, or operator\r\n   * @param _from current owner of the token\r\n   * @param _to address to receive the ownership of the given token ID\r\n   * @param _tokenId uint256 ID of the token to be transferred\r\n  */\r\n  function safeTransferFrom(\r\n    address _from,\r\n    address _to,\r\n    uint256 _tokenId\r\n  )\r\n    public\r\n  {\r\n    // solium-disable-next-line arg-overflow\r\n    safeTransferFrom(_from, _to, _tokenId, \"\");\r\n  }\r\n\r\n  /**\r\n   * @dev Safely transfers the ownership of a given token ID to another address\r\n   * If the target address is a contract, it must implement `onERC721Received`,\r\n   * which is called upon a safe transfer, and return the magic value\r\n   * `bytes4(keccak256(\"onERC721Received(address,address,uint256,bytes)\"))`; otherwise,\r\n   * the transfer is reverted.\r\n   * Requires the msg sender to be the owner, approved, or operator\r\n   * @param _from current owner of the token\r\n   * @param _to address to receive the ownership of the given token ID\r\n   * @param _tokenId uint256 ID of the token to be transferred\r\n   * @param _data bytes data to send along with a safe transfer check\r\n   */\r\n  function safeTransferFrom(\r\n    address _from,\r\n    address _to,\r\n    uint256 _tokenId,\r\n    bytes _data\r\n  )\r\n    public\r\n  {\r\n    transferFrom(_from, _to, _tokenId);\r\n    // solium-disable-next-line arg-overflow\r\n    require(checkAndCallSafeTransfer(_from, _to, _tokenId, _data));\r\n  }\r\n\r\n  /**\r\n   * @dev Returns whether the given spender can transfer a given token ID\r\n   * @param _spender address of the spender to query\r\n   * @param _tokenId uint256 ID of the token to be transferred\r\n   * @return bool whether the msg.sender is approved for the given token ID,\r\n   *  is an operator of the owner, or is the owner of the token\r\n   */\r\n  function isApprovedOrOwner(\r\n    address _spender,\r\n    uint256 _tokenId\r\n  )\r\n    internal\r\n    view\r\n    returns (bool)\r\n  {\r\n    address owner = ownerOf(_tokenId);\r\n    // Disable solium check because of\r\n    // https://github.com/duaraghav8/Solium/issues/175\r\n    // solium-disable-next-line operator-whitespace\r\n    return (\r\n      _spender == owner ||\r\n      getApproved(_tokenId) == _spender ||\r\n      isApprovedForAll(owner, _spender)\r\n    );\r\n  }\r\n\r\n  /**\r\n   * @dev Internal function to mint a new token\r\n   * Reverts if the given token ID already exists\r\n   * @param _to The address that will own the minted token\r\n   * @param _tokenId uint256 ID of the token to be minted by the msg.sender\r\n   */\r\n  function _mint(address _to, uint256 _tokenId) internal {\r\n    require(_to != address(0));\r\n    addTokenTo(_to, _tokenId);\r\n    emit Transfer(address(0), _to, _tokenId);\r\n  }\r\n\r\n  /**\r\n   * @dev Internal function to burn a specific token\r\n   * Reverts if the token does not exist\r\n   * @param _tokenId uint256 ID of the token being burned by the msg.sender\r\n   */\r\n  function _burn(address _owner, uint256 _tokenId) internal {\r\n    clearApproval(_owner, _tokenId);\r\n    removeTokenFrom(_owner, _tokenId);\r\n    emit Transfer(_owner, address(0), _tokenId);\r\n  }\r\n\r\n  /**\r\n   * @dev Internal function to clear current approval of a given token ID\r\n   * Reverts if the given address is not indeed the owner of the token\r\n   * @param _owner owner of the token\r\n   * @param _tokenId uint256 ID of the token to be transferred\r\n   */\r\n  function clearApproval(address _owner, uint256 _tokenId) internal {\r\n    require(ownerOf(_tokenId) == _owner);\r\n    if (tokenApprovals[_tokenId] != address(0)) {\r\n      tokenApprovals[_tokenId] = address(0);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @dev Internal function to add a token ID to the list of a given address\r\n   * @param _to address representing the new owner of the given token ID\r\n   * @param _tokenId uint256 ID of the token to be added to the tokens list of the given address\r\n   */\r\n  function addTokenTo(address _to, uint256 _tokenId) internal {\r\n    require(tokenOwner[_tokenId] == address(0));\r\n    tokenOwner[_tokenId] = _to;\r\n    ownedTokensCount[_to] = ownedTokensCount[_to].add(1);\r\n  }\r\n\r\n  /**\r\n   * @dev Internal function to remove a token ID from the list of a given address\r\n   * @param _from address representing the previous owner of the given token ID\r\n   * @param _tokenId uint256 ID of the token to be removed from the tokens list of the given address\r\n   */\r\n  function removeTokenFrom(address _from, uint256 _tokenId) internal {\r\n    require(ownerOf(_tokenId) == _from);\r\n    ownedTokensCount[_from] = ownedTokensCount[_from].sub(1);\r\n    tokenOwner[_tokenId] = address(0);\r\n  }\r\n\r\n  /**\r\n   * @dev Internal function to invoke `onERC721Received` on a target address\r\n   * The call is not executed if the target address is not a contract\r\n   * @param _from address representing the previous owner of the given token ID\r\n   * @param _to target address that will receive the tokens\r\n   * @param _tokenId uint256 ID of the token to be transferred\r\n   * @param _data bytes optional data to send along with the call\r\n   * @return whether the call correctly returned the expected magic value\r\n   */\r\n  function checkAndCallSafeTransfer(\r\n    address _from,\r\n    address _to,\r\n    uint256 _tokenId,\r\n    bytes _data\r\n  )\r\n    internal\r\n    returns (bool)\r\n  {\r\n    if (!_to.isContract()) {\r\n      return true;\r\n    }\r\n    bytes4 retval = ERC721Receiver(_to).onERC721Received(\r\n      msg.sender, _from, _tokenId, _data);\r\n    return (retval == ERC721_RECEIVED);\r\n  }\r\n}\r\n\r\n/**\r\n * @title ERC721 token receiver interface\r\n * @dev Interface for any contract that wants to support safeTransfers\r\n * from ERC721 asset contracts.\r\n */\r\ncontract ERC721Receiver {\r\n  /**\r\n   * @dev Magic value to be returned upon successful reception of an NFT\r\n   *  Equals to `bytes4(keccak256(\"onERC721Received(address,address,uint256,bytes)\"))`,\r\n   *  which can be also obtained as `ERC721Receiver(0).onERC721Received.selector`\r\n   */\r\n  bytes4 internal constant ERC721_RECEIVED = 0x150b7a02;\r\n\r\n  /**\r\n   * @notice Handle the receipt of an NFT\r\n   * @dev The ERC721 smart contract calls this function on the recipient\r\n   * after a `safetransfer`. This function MAY throw to revert and reject the\r\n   * transfer. Return of other than the magic value MUST result in the\r\n   * transaction being reverted.\r\n   * Note: the contract address is always the message sender.\r\n   * @param _operator The address which called `safeTransferFrom` function\r\n   * @param _from The address which previously owned the token\r\n   * @param _tokenId The NFT identifier which is being transferred\r\n   * @param _data Additional data with no specified format\r\n   * @return `bytes4(keccak256(\"onERC721Received(address,address,uint256,bytes)\"))`\r\n   */\r\n  function onERC721Received(\r\n    address _operator,\r\n    address _from,\r\n    uint256 _tokenId,\r\n    bytes _data\r\n  )\r\n    public\r\n    returns(bytes4);\r\n}\r\n\r\n\r\n/**\r\n * @title Full ERC721 Token\r\n * This implementation includes all the required and some optional functionality of the ERC721 standard\r\n * Moreover, it includes approve all functionality using operator terminology\r\n * @dev see https://github.com/ethereum/EIPs/blob/master/EIPS/eip-721.md\r\n */\r\ncontract ERC721Token is SupportsInterfaceWithLookup, ERC721BasicToken, ERC721 {\r\n\r\n  // Token name\r\n  string internal name_;\r\n\r\n  // Token symbol\r\n  string internal symbol_;\r\n\r\n  // Mapping from owner to list of owned token IDs\r\n  mapping(address => uint256[]) internal ownedTokens;\r\n\r\n  // Mapping from token ID to index of the owner tokens list\r\n  mapping(uint256 => uint256) internal ownedTokensIndex;\r\n\r\n  // Array with all token ids, used for enumeration\r\n  uint256[] internal allTokens;\r\n\r\n  // Mapping from token id to position in the allTokens array\r\n  mapping(uint256 => uint256) internal allTokensIndex;\r\n\r\n  // Optional mapping for token URIs\r\n  mapping(uint256 => string) internal tokenURIs;\r\n\r\n  /**\r\n   * @dev Constructor function\r\n   */\r\n  constructor(string _name, string _symbol) public {\r\n    name_ = _name;\r\n    symbol_ = _symbol;\r\n\r\n    // register the supported interfaces to conform to ERC721 via ERC165\r\n    _registerInterface(InterfaceId_ERC721Enumerable);\r\n    _registerInterface(InterfaceId_ERC721Metadata);\r\n  }\r\n\r\n  /**\r\n   * @dev Gets the token name\r\n   * @return string representing the token name\r\n   */\r\n  function name() external view returns (string) {\r\n    return name_;\r\n  }\r\n\r\n  /**\r\n   * @dev Gets the token symbol\r\n   * @return string representing the token symbol\r\n   */\r\n  function symbol() external view returns (string) {\r\n    return symbol_;\r\n  }\r\n\r\n  /**\r\n   * @dev Returns an URI for a given token ID\r\n   * Throws if the token ID does not exist. May return an empty string.\r\n   * @param _tokenId uint256 ID of the token to query\r\n   */\r\n  function tokenURI(uint256 _tokenId) public view returns (string) {\r\n    require(exists(_tokenId));\r\n    return tokenURIs[_tokenId];\r\n  }\r\n\r\n  /**\r\n   * @dev Gets the token ID at a given index of the tokens list of the requested owner\r\n   * @param _owner address owning the tokens list to be accessed\r\n   * @param _index uint256 representing the index to be accessed of the requested tokens list\r\n   * @return uint256 token ID at the given index of the tokens list owned by the requested address\r\n   */\r\n  function tokenOfOwnerByIndex(\r\n    address _owner,\r\n    uint256 _index\r\n  )\r\n    public\r\n    view\r\n    returns (uint256)\r\n  {\r\n    require(_index < balanceOf(_owner));\r\n    return ownedTokens[_owner][_index];\r\n  }\r\n\r\n  /**\r\n   * @dev Gets the total amount of tokens stored by the contract\r\n   * @return uint256 representing the total amount of tokens\r\n   */\r\n  function totalSupply() public view returns (uint256) {\r\n    return allTokens.length;\r\n  }\r\n\r\n  /**\r\n   * @dev Gets the token ID at a given index of all the tokens in this contract\r\n   * Reverts if the index is greater or equal to the total number of tokens\r\n   * @param _index uint256 representing the index to be accessed of the tokens list\r\n   * @return uint256 token ID at the given index of the tokens list\r\n   */\r\n  function tokenByIndex(uint256 _index) public view returns (uint256) {\r\n    require(_index < totalSupply());\r\n    return allTokens[_index];\r\n  }\r\n\r\n  /**\r\n   * @dev Internal function to set the token URI for a given token\r\n   * Reverts if the token ID does not exist\r\n   * @param _tokenId uint256 ID of the token to set its URI\r\n   * @param _uri string URI to assign\r\n   */\r\n  function _setTokenURI(uint256 _tokenId, string _uri) internal {\r\n    require(exists(_tokenId));\r\n    tokenURIs[_tokenId] = _uri;\r\n  }\r\n\r\n  /**\r\n   * @dev Internal function to add a token ID to the list of a given address\r\n   * @param _to address representing the new owner of the given token ID\r\n   * @param _tokenId uint256 ID of the token to be added to the tokens list of the given address\r\n   */\r\n  function addTokenTo(address _to, uint256 _tokenId) internal {\r\n    super.addTokenTo(_to, _tokenId);\r\n    uint256 length = ownedTokens[_to].length;\r\n    ownedTokens[_to].push(_tokenId);\r\n    ownedTokensIndex[_tokenId] = length;\r\n  }\r\n\r\n  /**\r\n   * @dev Internal function to remove a token ID from the list of a given address\r\n   * @param _from address representing the previous owner of the given token ID\r\n   * @param _tokenId uint256 ID of the token to be removed from the tokens list of the given address\r\n   */\r\n  function removeTokenFrom(address _from, uint256 _tokenId) internal {\r\n    super.removeTokenFrom(_from, _tokenId);\r\n\r\n    // To prevent a gap in the array, we store the last token in the index of the token to delete, and\r\n    // then delete the last slot.\r\n    uint256 tokenIndex = ownedTokensIndex[_tokenId];\r\n    uint256 lastTokenIndex = ownedTokens[_from].length.sub(1);\r\n    uint256 lastToken = ownedTokens[_from][lastTokenIndex];\r\n\r\n    ownedTokens[_from][tokenIndex] = lastToken;\r\n    ownedTokens[_from].length--;\r\n    // ^ This also deletes the contents at the last position of the array\r\n\r\n    // Note that this will handle single-element arrays. In that case, both tokenIndex and lastTokenIndex are going to\r\n    // be zero. Then we can make sure that we will remove _tokenId from the ownedTokens list since we are first swapping\r\n    // the lastToken to the first position, and then dropping the element placed in the last position of the list\r\n\r\n    ownedTokensIndex[_tokenId] = 0;\r\n    ownedTokensIndex[lastToken] = tokenIndex;\r\n  }\r\n\r\n  /**\r\n   * @dev Internal function to mint a new token\r\n   * Reverts if the given token ID already exists\r\n   * @param _to address the beneficiary that will own the minted token\r\n   * @param _tokenId uint256 ID of the token to be minted by the msg.sender\r\n   */\r\n  function _mint(address _to, uint256 _tokenId) internal {\r\n    super._mint(_to, _tokenId);\r\n\r\n    allTokensIndex[_tokenId] = allTokens.length;\r\n    allTokens.push(_tokenId);\r\n  }\r\n\r\n  /**\r\n   * @dev Internal function to burn a specific token\r\n   * Reverts if the token does not exist\r\n   * @param _owner owner of the token to burn\r\n   * @param _tokenId uint256 ID of the token being burned by the msg.sender\r\n   */\r\n  function _burn(address _owner, uint256 _tokenId) internal {\r\n    super._burn(_owner, _tokenId);\r\n\r\n    // Clear metadata (if any)\r\n    if (bytes(tokenURIs[_tokenId]).length != 0) {\r\n      delete tokenURIs[_tokenId];\r\n    }\r\n\r\n    // Reorg all tokens array\r\n    uint256 tokenIndex = allTokensIndex[_tokenId];\r\n    uint256 lastTokenIndex = allTokens.length.sub(1);\r\n    uint256 lastToken = allTokens[lastTokenIndex];\r\n\r\n    allTokens[tokenIndex] = lastToken;\r\n    allTokens[lastTokenIndex] = 0;\r\n\r\n    allTokens.length--;\r\n    allTokensIndex[_tokenId] = 0;\r\n    allTokensIndex[lastToken] = tokenIndex;\r\n  }\r\n\r\n}\r\n\r\n\r\ncontract TTTToken {\r\n  function transfer(address _to, uint256 _amount) public returns (bool success);\r\n  function transferFrom(address from, address to, uint tokens) public returns (bool success);\r\n  function balanceOf(address tokenOwner) public constant returns (uint balance);\r\n}\r\n\r\n\r\n// @title The Tip Tokn SAN (Short Address Name)\r\n// @author Jonathan Teel ([email\u00a0protected])\r\n// @dev First 500 SANs do no require a slot\r\ncontract TTTSan is ERC721Token, Ownable {\r\n\r\n  address public wallet = 0x515165A6511734A4eFB5Cfb531955cf420b2725B;\r\n  address public tttTokenAddress = 0x24358430f5b1f947B04D9d1a22bEb6De01CaBea2;\r\n  address public marketAddress;\r\n\r\n  uint256 public sanTTTCost;\r\n  uint256 public sanMaxLength;\r\n  uint256 public sanMinLength;\r\n  uint256 public sanMaxAmount;\r\n  uint256 public sanMaxFree;\r\n  uint256 public sanCurrentTotal;\r\n\r\n  string public baseUrl = \"https://thetiptoken.io/arv/img/\";\r\n\r\n  mapping(string=>bool) sanOwnership;\r\n  mapping(address=>uint256) sanSlots;\r\n  mapping(address=>uint256) sanOwnerAmount;\r\n  mapping(string=>uint256) sanNameToId;\r\n  mapping(string=>address) sanNameToAddress;\r\n\r\n  struct SAN {\r\n    string sanName;\r\n    uint256 timeAlive;\r\n    uint256 timeLastMove;\r\n    address prevOwner;\r\n    string sanageLink;\r\n  }\r\n\r\n  SAN[] public sans;\r\n\r\n  TTTToken ttt;\r\n\r\n  modifier isMarketAddress() {\r\n\t\trequire(msg.sender == marketAddress);\r\n\t\t_;\r\n\t}\r\n\r\n  event SanMinted(address sanOwner, uint256 sanId, string sanName);\r\n  event SanSlotPurchase(address sanOwner, uint256 amt);\r\n  event SanCostUpdated(uint256 cost);\r\n  event SanLengthReqChange(uint256 sanMinLength, uint256 sanMaxLength);\r\n  event SanMaxAmountChange(uint256 sanMaxAmount);\r\n\r\n  constructor() public ERC721Token(\"TTTSAN\", \"TTTS\") {\r\n    sanTTTCost = 10 ether;\r\n    sanMaxLength = 16;\r\n    sanMinLength = 2;\r\n    sanMaxAmount = 100;\r\n    sanMaxFree = 500;\r\n    ttt = TTTToken(tttTokenAddress);\r\n    // gen0 san\r\n  /* \"NeverGonnaGiveYouUp.NeverGonnaLetYouDown\" */\r\n    string memory gen0 = \"NeverGonnaGiveYouUp.NeverGonnaLetYouDown\";\r\n    SAN memory s = SAN({\r\n        sanName: gen0,\r\n        timeAlive: block.timestamp,\r\n        timeLastMove: block.timestamp,\r\n        prevOwner: msg.sender,\r\n        sanageLink: \"0x\"\r\n    });\r\n    uint256 sanId = sans.push(s).sub(1);\r\n    sanOwnership[gen0] = true;\r\n    _sanMint(sanId, msg.sender, \"gen0.jpeg\", gen0);\r\n  }\r\n\r\n  function sanMint(string _sanName, string _sanageUri) external returns (string) {\r\n    // first 500 SANs do not require a slot\r\n    if(sanCurrentTotal > sanMaxFree)\r\n      require(sanSlots[msg.sender] >= 1, \"no san slots available\");\r\n    string memory sn = sanitize(_sanName);\r\n    SAN memory s = SAN({\r\n        sanName: sn,\r\n        timeAlive: block.timestamp,\r\n        timeLastMove: block.timestamp,\r\n        prevOwner: msg.sender,\r\n        sanageLink: _sanageUri\r\n    });\r\n    uint256 sanId = sans.push(s).sub(1);\r\n    sanOwnership[sn] = true;\r\n    if(sanCurrentTotal > sanMaxFree)\r\n      sanSlots[msg.sender] = sanSlots[msg.sender].sub(1);\r\n    _sanMint(sanId, msg.sender, _sanageUri, sn);\r\n    return sn;\r\n  }\r\n\r\n  function getSANOwner(uint256 _sanId) public view returns (address) {\r\n    return ownerOf(_sanId);\r\n  }\r\n\r\n  function getSanIdFromName(string _sanName) public view returns (uint256) {\r\n    return sanNameToId[_sanName];\r\n  }\r\n\r\n  function getSanName(uint256 _sanId) public view returns (string) {\r\n    return sans[_sanId].sanName;\r\n  }\r\n\r\n  function getSanageLink(uint256 _sanId) public view returns (string) {\r\n    return sans[_sanId].sanageLink;\r\n  }\r\n\r\n  function getSanTimeAlive(uint256 _sanId) public view returns (uint256) {\r\n    return sans[_sanId].timeAlive;\r\n  }\r\n\r\n  function getSanTimeLastMove(uint256 _sanId) public view returns (uint256) {\r\n    return sans[_sanId].timeLastMove;\r\n  }\r\n\r\n  function getSanPrevOwner(uint256 _sanId) public view returns (address) {\r\n    return sans[_sanId].prevOwner;\r\n  }\r\n\r\n  function getAddressFromSan(string _sanName) public view returns (address) {\r\n    return sanNameToAddress[_sanName];\r\n  }\r\n\r\n  function getSanSlots(address _sanOwner) public view returns(uint256) {\r\n    return sanSlots[_sanOwner];\r\n  }\r\n\r\n  // used for initial check to not waste gas\r\n  function getSANitized(string _sanName) external view returns (string) {\r\n    return sanitize(_sanName);\r\n  }\r\n\r\n  function buySanSlot(address _sanOwner,  uint256 _tip) external returns(bool) {\r\n    require(_tip >= sanTTTCost, \"tip less than san cost\");\r\n    require(sanSlots[_sanOwner] < sanMaxAmount, \"max san slots owned\");\r\n    sanSlots[_sanOwner] = sanSlots[_sanOwner].add(1);\r\n    ttt.transferFrom(msg.sender, wallet, _tip);\r\n    emit SanSlotPurchase(_sanOwner, 1);\r\n    return true;\r\n  }\r\n\r\n  function marketSale(uint256 _sanId, string _sanName, address _prevOwner, address _newOwner) external isMarketAddress {\r\n    SAN storage s = sans[_sanId];\r\n    s.prevOwner = _prevOwner;\r\n    s.timeLastMove = block.timestamp;\r\n    sanNameToAddress[_sanName] = _newOwner;\r\n    // no slot movements for first 500 SANs\r\n    if(sanCurrentTotal > sanMaxFree) {\r\n      sanSlots[_prevOwner] = sanSlots[_prevOwner].sub(1);\r\n      sanSlots[_newOwner] = sanSlots[_newOwner].add(1);\r\n    }\r\n    sanOwnerAmount[_prevOwner] = sanOwnerAmount[_prevOwner].sub(1);\r\n    sanOwnerAmount[_newOwner] = sanOwnerAmount[_newOwner].add(1);\r\n  }\r\n\r\n  function() public payable { revert(); }\r\n\r\n  // OWNER FUNCTIONS\r\n\r\n  function setSanTTTCost(uint256 _cost) external onlyOwner {\r\n    sanTTTCost = _cost;\r\n    emit SanCostUpdated(sanTTTCost);\r\n  }\r\n\r\n  function setSanLength(uint256 _length, uint256 _pos) external onlyOwner {\r\n    require(_length > 0);\r\n    if(_pos == 0) sanMinLength = _length;\r\n    else sanMaxLength = _length;\r\n    emit SanLengthReqChange(sanMinLength, sanMaxLength);\r\n  }\r\n\r\n  function setSanMaxAmount(uint256 _amount) external onlyOwner {\r\n    sanMaxAmount = _amount;\r\n    emit SanMaxAmountChange(sanMaxAmount);\r\n  }\r\n\r\n  function setSanMaxFree(uint256 _sanMaxFree) external onlyOwner {\r\n    sanMaxFree = _sanMaxFree;\r\n  }\r\n\r\n  function ownerAddSanSlot(address _sanOwner, uint256 _slotCount) external onlyOwner {\r\n    require(_slotCount > 0 && _slotCount <= sanMaxAmount);\r\n    require(sanSlots[_sanOwner] < sanMaxAmount);\r\n    sanSlots[_sanOwner] = sanSlots[_sanOwner].add(_slotCount);\r\n  }\r\n\r\n  // owner can add slots in batches, 100 max\r\n  function ownerAddSanSlotBatch(address[] _sanOwner, uint256[] _slotCount) external onlyOwner {\r\n    require(_sanOwner.length == _slotCount.length);\r\n    require(_sanOwner.length <= 100);\r\n    for(uint8 i = 0; i < _sanOwner.length; i++) {\r\n      require(_slotCount[i] > 0 && _slotCount[i] <= sanMaxAmount, \"incorrect slot count\");\r\n      sanSlots[_sanOwner[i]] = sanSlots[_sanOwner[i]].add(_slotCount[i]);\r\n      require(sanSlots[_sanOwner[i]] <= sanMaxAmount, \"max san slots owned\");\r\n    }\r\n  }\r\n\r\n  function setMarketAddress(address _marketAddress) public onlyOwner {\r\n    marketAddress = _marketAddress;\r\n  }\r\n\r\n  function setBaseUrl(string _baseUrl) public onlyOwner {\r\n    baseUrl = _baseUrl;\r\n  }\r\n\r\n  function setOwnerWallet(address _wallet) public onlyOwner {\r\n    wallet = _wallet;\r\n  }\r\n\r\n  function updateTokenUri(uint256 _sanId, string _newUri) public onlyOwner {\r\n    SAN storage s = sans[_sanId];\r\n    s.sanageLink = _newUri;\r\n    _setTokenURI(_sanId, strConcat(baseUrl, _newUri));\r\n  }\r\n\r\n  function emptyTTT() external onlyOwner {\r\n    ttt.transfer(msg.sender, ttt.balanceOf(address(this)));\r\n  }\r\n\r\n  function emptyEther() external onlyOwner {\r\n    owner.transfer(address(this).balance);\r\n  }\r\n\r\n  // owner can mint special sans for an address\r\n  function specialSanMint(string _sanName, string _sanageUri, address _address) external onlyOwner returns (string) {\r\n    SAN memory s = SAN({\r\n        sanName: _sanName,\r\n        timeAlive: block.timestamp,\r\n        timeLastMove: block.timestamp,\r\n        prevOwner: _address,\r\n        sanageLink: _sanageUri\r\n    });\r\n    uint256 sanId = sans.push(s).sub(1);\r\n    _sanMint(sanId, _address, _sanageUri, _sanName);\r\n    return _sanName;\r\n  }\r\n\r\n  // INTERNAL FUNCTIONS\r\n\r\n  function sanitize(string _sanName) internal view returns(string) {\r\n    string memory sn = sanToLower(_sanName);\r\n    require(isValidSan(sn), \"san is not valid\");\r\n    require(!sanOwnership[sn], \"san is not unique\");\r\n    return sn;\r\n  }\r\n\r\n  function _sanMint(uint256 _sanId, address _owner, string _sanageUri, string _sanName) internal {\r\n    require(sanOwnerAmount[_owner] < sanMaxAmount, \"max san owned\");\r\n    sanNameToId[_sanName] = _sanId;\r\n    sanNameToAddress[_sanName] = _owner;\r\n    sanOwnerAmount[_owner] = sanOwnerAmount[_owner].add(1);\r\n    sanCurrentTotal = sanCurrentTotal.add(1);\r\n    _mint(_owner, _sanId);\r\n    _setTokenURI(_sanId, strConcat(baseUrl, _sanageUri));\r\n    emit SanMinted(_owner, _sanId, _sanName);\r\n  }\r\n\r\n  function isValidSan(string _sanName) internal view returns(bool) {\r\n    bytes memory wb = bytes(_sanName);\r\n    uint slen = wb.length;\r\n    if (slen > sanMaxLength || slen <= sanMinLength) return false;\r\n    bytes1 space = bytes1(0x20);\r\n    bytes1 period = bytes1(0x2E);\r\n    // san can not end in .eth - added to avoid conflicts with ens\r\n    bytes1 e = bytes1(0x65);\r\n    bytes1 t = bytes1(0x74);\r\n    bytes1 h = bytes1(0x68);\r\n    uint256 dCount = 0;\r\n    uint256 eCount = 0;\r\n    uint256 eth = 0;\r\n    for(uint256 i = 0; i < slen; i++) {\r\n        if(wb[i] == space) return false;\r\n        else if(wb[i] == period) {\r\n          dCount = dCount.add(1);\r\n          // only 1 '.'\r\n          if(dCount > 1) return false;\r\n          eCount = 1;\r\n        } else if(eCount > 0 && eCount < 5) {\r\n          if(eCount == 1) if(wb[i] == e) eth = eth.add(1);\r\n          if(eCount == 2) if(wb[i] == t) eth = eth.add(1);\r\n          if(eCount == 3) if(wb[i] == h) eth = eth.add(1);\r\n          eCount = eCount.add(1);\r\n        }\r\n    }\r\n    if(dCount == 0) return false;\r\n    if((eth == 3 && eCount == 4) || eCount == 1) return false;\r\n    return true;\r\n  }\r\n\r\n  function sanToLower(string _sanName) internal pure returns(string) {\r\n    bytes memory b = bytes(_sanName);\r\n    for(uint256 i = 0; i < b.length; i++) {\r\n      b[i] = byteToLower(b[i]);\r\n    }\r\n    return string(b);\r\n  }\r\n\r\n  function byteToLower(bytes1 _b) internal pure returns (bytes1) {\r\n    if(_b >= bytes1(0x41) && _b <= bytes1(0x5A))\r\n      return bytes1(uint8(_b) + 32);\r\n    return _b;\r\n  }\r\n\r\n  function strConcat(string _a, string _b) internal pure returns (string) {\r\n    bytes memory _ba = bytes(_a);\r\n    bytes memory _bb = bytes(_b);\r\n    string memory ab = new string(_ba.length.add(_bb.length));\r\n    bytes memory bab = bytes(ab);\r\n    uint256 k = 0;\r\n    for (uint256 i = 0; i < _ba.length; i++) bab[k++] = _ba[i];\r\n    for (i = 0; i < _bb.length; i++) bab[k++] = _bb[i];\r\n    return string(bab);\r\n  }\r\n\r\n}", "OptimizationUsed": "1", "ContractName": "TTTSan", "ByteCode": "0x6080604052600436106102b35763ffffffff7c010000000000000000000000000000000000000000000000000000000060003504166301ffc9a781146102b857806306fdde03146102ee578063081812fc146103785780630821c87e146103ac578063095ea7b3146103d357806310adb0ea146103f957806318160ddd1461040e57806319236b4e1461042357806319fa8f501461043b5780632317f9f31461046d57806323b872dd146104855780632712d916146104af5780632f745c59146104c75780633289fba6146104eb57806332c35352146105035780633303a9d81461053957806341c838cb1461057157806342842e0e1461059157806347f5666f146105bb57806348a87fa8146106145780634d40ed9c146106295780634f558e79146106415780634f6ccce71461065957806350b7972214610671578063521eb2731461068c5780635bcabf04146106a15780635e1d9aba146106b65780636352211e146106cb57806367fbb7ba146106e3578063682ed9ea1461070f5780636dd6e6731461072457806370a0823114610748578063715018a6146107695780638da5cb5b1461077e578063922f17ce1461079357806395623641146107a857806395d89b41146107bd578063975c5cab146107d2578063a22cb465146107ea578063a64ded3114610810578063a9eeaeee14610825578063aaf4991014610846578063ab91154e1461085b578063b70fadb71461087f578063b88d4fde146108d8578063bb542ef014610947578063be9ddfed14610968578063c294c93b14610980578063c30d9a7e14610998578063c7c3268b14610ab5578063c87b56dd14610b0e578063d31af48414610b26578063d812d96114610b84578063d88905fa14610b9c578063e985e9c514610bc8578063f2fde38b14610bef578063f569626d14610c10578063fae9261214610c25575b600080fd5b3480156102c457600080fd5b506102da600160e060020a031960043516610c46565b604080519115158252519081900360200190f35b3480156102fa57600080fd5b50610303610c69565b6040805160208082528351818301528351919283929083019185019080838360005b8381101561033d578181015183820152602001610325565b50505050905090810190601f16801561036a5780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b34801561038457600080fd5b50610390600435610d00565b60408051600160a060020a039092168252519081900360200190f35b3480156103b857600080fd5b506103c1610d1b565b60408051918252519081900360200190f35b3480156103df57600080fd5b506103f7600160a060020a0360043516602435610d21565b005b34801561040557600080fd5b506103c1610dca565b34801561041a57600080fd5b506103c1610dd0565b34801561042f57600080fd5b506103c1600435610dd6565b34801561044757600080fd5b50610450610e00565b60408051600160e060020a03199092168252519081900360200190f35b34801561047957600080fd5b506103f7600435610e24565b34801561049157600080fd5b506103f7600160a060020a0360043581169060243516604435610e76565b3480156104bb57600080fd5b506103f7600435610f19565b3480156104d357600080fd5b506103c1600160a060020a0360043516602435610f6b565b3480156104f757600080fd5b50610390600435610fb8565b34801561050f57600080fd5b506103f7600480359060248035908101910135600160a060020a0360443581169060643516610fec565b34801561054557600080fd5b506103036024600480358281019290820135918135918201910135600160a060020a036044351661119f565b34801561057d57600080fd5b5061030360048035602481019101356113bb565b34801561059d57600080fd5b506103f7600160a060020a03600435811690602435166044356113fd565b3480156105c757600080fd5b506040805160206004803580820135601f81018490048402850184019095528484526103c194369492936024939284019190819084018382808284375094975061141e9650505050505050565b34801561062057600080fd5b506103f7611486565b34801561063557600080fd5b506103f76004356115cc565b34801561064d57600080fd5b506102da6004356115e8565b34801561066557600080fd5b506103c1600435611605565b34801561067d57600080fd5b506103f760043560243561163a565b34801561069857600080fd5b506103906116bc565b3480156106ad57600080fd5b506103036116cb565b3480156106c257600080fd5b506103c1611759565b3480156106d757600080fd5b5061039060043561175f565b3480156106ef57600080fd5b506103f76024600480358281019290820135918135918201910135611789565b34801561071b57600080fd5b506103c16119c2565b34801561073057600080fd5b506102da600160a060020a03600435166024356119c8565b34801561075457600080fd5b506103c1600160a060020a0360043516611bc2565b34801561077557600080fd5b506103f7611bf5565b34801561078a57600080fd5b50610390611c56565b34801561079f57600080fd5b506103f7611c65565b3480156107b457600080fd5b50610390611cb9565b3480156107c957600080fd5b50610303611cc8565b3480156107de57600080fd5b50610303600435611d29565b3480156107f657600080fd5b506103f7600160a060020a03600435166024351515611ddc565b34801561081c57600080fd5b50610390611e60565b34801561083157600080fd5b506103c1600160a060020a0360043516611e6f565b34801561085257600080fd5b506103c1611e8a565b34801561086757600080fd5b506103f7600160a060020a0360043516602435611e90565b34801561088b57600080fd5b506040805160206004803580820135601f8101849004840285018401909552848452610390943694929360249392840191908190840183828082843750949750611f339650505050505050565b3480156108e457600080fd5b50604080516020601f6064356004818101359283018490048402850184019095528184526103f794600160a060020a038135811695602480359092169560443595369560849401918190840183828082843750949750611fa49650505050505050565b34801561095357600080fd5b506103f7600160a060020a0360043516611fcc565b34801561097457600080fd5b506103c1600435612005565b34801561098c57600080fd5b5061039060043561202f565b3480156109a457600080fd5b506109b060043561203a565b604051808060200186815260200185815260200184600160a060020a0316600160a060020a0316815260200180602001838103835288818151815260200191508051906020019080838360005b83811015610a155781810151838201526020016109fd565b50505050905090810190601f168015610a425780820380516001836020036101000a031916815260200191505b50838103825284518152845160209182019186019080838360005b83811015610a75578181015183820152602001610a5d565b50505050905090810190601f168015610aa25780820380516001836020036101000a031916815260200191505b5097505050505050505060405180910390f35b348015610ac157600080fd5b506040805160206004803580820135601f81018490048402850184019095528484526103f794369492936024939284019190819084018382808284375094975061219b9650505050505050565b348015610b1a57600080fd5b506103036004356121c5565b348015610b3257600080fd5b5060408051602060046024803582810135601f81018590048502860185019096528585526103f79583359536956044949193909101919081908401838280828437509497506122439650505050505050565b348015610b9057600080fd5b50610303600435612333565b348015610ba857600080fd5b5061030360246004803582810192908201359181359182019101356123ac565b348015610bd457600080fd5b506102da600160a060020a036004358116906024351661261c565b348015610bfb57600080fd5b506103f7600160a060020a036004351661264a565b348015610c1c57600080fd5b506103c161266a565b348015610c3157600080fd5b506103f7600160a060020a0360043516612670565b600160e060020a0319811660009081526020819052604090205460ff165b919050565b60058054604080516020601f6002600019610100600188161502019095169490940493840181900481028201810190925282815260609390929091830182828015610cf55780601f10610cca57610100808354040283529160200191610cf5565b820191906000526020600020905b815481529060010190602001808311610cd857829003601f168201915b505050505090505b90565b600090815260026020526040902054600160a060020a031690565b60145481565b6000610d2c8261175f565b9050600160a060020a038381169082161415610d4757600080fd5b33600160a060020a0382161480610d635750610d63813361261c565b1515610d6e57600080fd5b6000828152600260205260408082208054600160a060020a031916600160a060020a0387811691821790925591518593918516917f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b92591a4505050565b60115481565b60095490565b6000601c82815481101515610de757fe5b9060005260206000209060050201600101549050919050565b7f01ffc9a70000000000000000000000000000000000000000000000000000000081565b600c54600160a060020a03163314610e3b57600080fd5b60138190556040805182815290517f439c1f741a67df0d21dffd7ac786b0e68b02909477420bfaa4866a75733c68079181900360200190a150565b610e8033826126a9565b1515610e8b57600080fd5b600160a060020a0383161515610ea057600080fd5b600160a060020a0382161515610eb557600080fd5b610ebf8382612708565b610ec9838261276a565b610ed38282612871565b8082600160a060020a031684600160a060020a03167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef60405160405180910390a4505050565b600c54600160a060020a03163314610f3057600080fd5b60108190556040805182815290517f1bc6f82d618975ff4242b334df6c761706538b8ec1b621d49c12bb53c1059f1a9181900360200190a150565b6000610f7683611bc2565b8210610f8157600080fd5b600160a060020a0383166000908152600760205260409020805483908110610fa557fe5b9060005260206000200154905092915050565b6000601c82815481101515610fc957fe5b6000918252602090912060059091020160030154600160a060020a031692915050565b600f54600090600160a060020a0316331461100657600080fd5b601c80548790811061101457fe5b60009182526020909120600590910201600381018054600160a060020a031916600160a060020a0386161790554260028201556040519091508290601b9087908790808383808284379091019485525050604051928390036020019092208054600160a060020a0394909416600160a060020a0319909416939093179092555050601454601554111561111b57600160a060020a0383166000908152601860205260409020546110cb90600163ffffffff6128ba16565b600160a060020a03808516600090815260186020526040808220939093559084168152205461110190600163ffffffff6128cc16565b600160a060020a0383166000908152601860205260409020555b600160a060020a03831660009081526019602052604090205461114590600163ffffffff6128ba16565b600160a060020a03808516600090815260196020526040808220939093559084168152205461117b90600163ffffffff6128cc16565b600160a060020a039092166000908152601960205260409020919091555050505050565b60606111a9613625565b600c54600090600160a060020a031633146111c357600080fd5b6040805160c06020601f8b01819004028201810190925260a0810189815290918291908b908b9081908501838280828437820191505050505050815260200142815260200142815260200185600160a060020a0316815260200187878080601f016020809104026020016040519081016040528093929190818152602001838380828437505050929093525050601c805460018181018084556000939093528451805195975061130e9591945087926005027f0e4562a10381dec21b205ed72637e6b1b523bdd0e4d4d50af5cd23dd4500a21101916112aa9183916020919091019061365e565b506020828101516001830155604083015160028301556060830151600383018054600160a060020a031916600160a060020a03909216919091179055608083015180516112fd926004850192019061365e565b5050506128ba90919063ffffffff16565b905061137e818588888080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050508b8b8080601f016020809104026020016040519081016040528093929190818152602001838380828437506128d9945050505050565b87878080601f01602080910402602001604051908101604052809392919081815260200183838082843750949d9c50505050505050505050505050565b60606113f683838080601f01602080910402602001604051908101604052809392919081815260200183838082843750612ba5945050505050565b9392505050565b6114198383836020604051908101604052806000815250611fa4565b505050565b6000601a826040518082805190602001908083835b602083106114525780518252601f199092019160209182019101611433565b51815160209384036101000a6000190180199092169116179052920194855250604051938490030190922054949350505050565b600c54600160a060020a0316331461149d57600080fd5b601d54604080517f70a082310000000000000000000000000000000000000000000000000000000081523060048201529051600160a060020a039092169163a9059cbb91339184916370a082319160248083019260209291908290030181600087803b15801561150c57600080fd5b505af1158015611520573d6000803e3d6000fd5b505050506040513d602081101561153657600080fd5b5051604080517c010000000000000000000000000000000000000000000000000000000063ffffffff8616028152600160a060020a03909316600484015260248301919091525160448083019260209291908290030181600087803b15801561159e57600080fd5b505af11580156115b2573d6000803e3d6000fd5b505050506040513d60208110156115c857600080fd5b5050565b600c54600160a060020a031633146115e357600080fd5b601455565b600090815260016020526040902054600160a060020a0316151590565b600061160f610dd0565b821061161a57600080fd5b600980548390811061162857fe5b90600052602060002001549050919050565b600c54600160a060020a0316331461165157600080fd5b6000821161165e57600080fd5b80151561166f576012829055611675565b60118290555b7fa1732dafb1d0db5738eecd8b449c6cf9e7e2e0cd1002bc70aff943f513411c98601254601154604051808381526020018281526020019250505060405180910390a15050565b600d54600160a060020a031681565b6016805460408051602060026001851615610100026000190190941693909304601f810184900484028201840190925281815292918301828280156117515780601f1061172657610100808354040283529160200191611751565b820191906000526020600020905b81548152906001019060200180831161173457829003601f168201915b505050505081565b60155481565b600081815260016020526040812054600160a060020a031680151561178357600080fd5b92915050565b600c54600090600160a060020a031633146117a357600080fd5b8382146117af57600080fd5b60648411156117bd57600080fd5b5060005b60ff81168411156119bb576000838360ff84168181106117dd57fe5b905060200201351180156118085750601354838360ff84168181106117fe57fe5b9050602002013511155b151561185e576040805160e560020a62461bcd02815260206004820152601460248201527f696e636f727265637420736c6f7420636f756e74000000000000000000000000604482015290519081900360640190fd5b6118cb838360ff841681811061187057fe5b905060200201356018600088888660ff16818110151561188c57fe5b90506020020135600160a060020a0316600160a060020a0316600160a060020a03168152602001908152602001600020546128cc90919063ffffffff16565b60186000878760ff86168181106118de57fe5b90506020020135600160a060020a0316600160a060020a0316600160a060020a03168152602001908152602001600020819055506013546018600087878560ff16818110151561192a57fe5b90506020020135600160a060020a0316600160a060020a0316600160a060020a0316815260200190815260200160002054111515156119b3576040805160e560020a62461bcd02815260206004820152601360248201527f6d61782073616e20736c6f7473206f776e656400000000000000000000000000604482015290519081900360640190fd5b6001016117c1565b5050505050565b60135481565b601054600090821015611a25576040805160e560020a62461bcd02815260206004820152601660248201527f746970206c657373207468616e2073616e20636f737400000000000000000000604482015290519081900360640190fd5b601354600160a060020a03841660009081526018602052604090205410611a96576040805160e560020a62461bcd02815260206004820152601360248201527f6d61782073616e20736c6f7473206f776e656400000000000000000000000000604482015290519081900360640190fd5b600160a060020a038316600090815260186020526040902054611ac090600163ffffffff6128cc16565b600160a060020a03808516600090815260186020908152604080832094909455601d54600d5485517f23b872dd00000000000000000000000000000000000000000000000000000000815233600482015290851660248201526044810188905294519316936323b872dd9360648083019491928390030190829087803b158015611b4957600080fd5b505af1158015611b5d573d6000803e3d6000fd5b505050506040513d6020811015611b7357600080fd5b505060408051600160a060020a03851681526001602082015281517fe1f97067fba5a383414b6cdc20d71c41d2b897088dc264e8590c013d7a26a554929181900390910190a150600192915050565b6000600160a060020a0382161515611bd957600080fd5b50600160a060020a031660009081526003602052604090205490565b600c54600160a060020a03163314611c0c57600080fd5b600c54604051600160a060020a03909116907ff8df31144d9c2f0f6b59d69b8b98abd5459d07f2742c4df920b25aae33c6482090600090a2600c8054600160a060020a0319169055565b600c54600160a060020a031681565b600c54600160a060020a03163314611c7c57600080fd5b600c54604051600160a060020a0390911690303180156108fc02916000818181858888f19350505050158015611cb6573d6000803e3d6000fd5b50565b600f54600160a060020a031681565b60068054604080516020601f6002600019610100600188161502019095169490940493840181900481028201810190925282815260609390929091830182828015610cf55780601f10610cca57610100808354040283529160200191610cf5565b6060601c82815481101515611d3a57fe5b6000918252602091829020600460059092020101805460408051601f6002600019610100600187161502019094169390930492830185900485028101850190915281815292830182828015611dd05780601f10611da557610100808354040283529160200191611dd0565b820191906000526020600020905b815481529060010190602001808311611db357829003601f168201915b50505050509050919050565b600160a060020a038216331415611df257600080fd5b336000818152600460209081526040808320600160a060020a03871680855290835292819020805460ff1916861515908117909155815190815290519293927f17307eab39ab6107e8899845ad3d59bd9653f200f220920489ca2b5937696c31929181900390910190a35050565b600e54600160a060020a031681565b600160a060020a031660009081526018602052604090205490565b60125481565b600c54600160a060020a03163314611ea757600080fd5b600081118015611eb957506013548111155b1515611ec457600080fd5b601354600160a060020a03831660009081526018602052604090205410611eea57600080fd5b600160a060020a038216600090815260186020526040902054611f13908263ffffffff6128cc16565b600160a060020a0390921660009081526018602052604090209190915550565b6000601b826040518082805190602001908083835b60208310611f675780518252601f199092019160209182019101611f48565b51815160209384036101000a6000190180199092169116179052920194855250604051938490030190922054600160a060020a0316949350505050565b611faf848484610e76565b611fbb84848484612ccc565b1515611fc657600080fd5b50505050565b600c54600160a060020a03163314611fe357600080fd5b600d8054600160a060020a031916600160a060020a0392909216919091179055565b6000601c8281548110151561201657fe5b9060005260206000209060050201600201549050919050565b60006117838261175f565b601c80548290811061204857fe5b60009182526020918290206005919091020180546040805160026001841615610100026000190190931692909204601f8101859004850283018501909152808252919350918391908301828280156120e15780601f106120b6576101008083540402835291602001916120e1565b820191906000526020600020905b8154815290600101906020018083116120c457829003601f168201915b505050506001838101546002808601546003870154600488018054604080516020601f6000199a851615610100029a909a0190931696909604978801829004820286018201905286855297989497929650600160a060020a039091169490918301828280156121915780601f1061216657610100808354040283529160200191612191565b820191906000526020600020905b81548152906001019060200180831161217457829003601f168201915b5050505050905085565b600c54600160a060020a031633146121b257600080fd5b80516115c890601690602084019061365e565b60606121d0826115e8565b15156121db57600080fd5b6000828152600b602090815260409182902080548351601f600260001961010060018616150201909316929092049182018490048402810184019094528084529091830182828015611dd05780601f10611da557610100808354040283529160200191611dd0565b600c54600090600160a060020a0316331461225d57600080fd5b601c80548490811061226b57fe5b906000526020600020906005020190508181600401908051906020019061229392919061365e565b5060168054604080516020601f6002600019610100600188161502019095169490940493840181900481028201810190925282815261141993879361232e938301828280156123235780601f106122f857610100808354040283529160200191612323565b820191906000526020600020905b81548152906001019060200180831161230657829003601f168201915b505050505085612e39565b612f68565b6060601c8281548110151561234457fe5b6000918252602091829020600590910201805460408051601f6002600019610100600187161502019094169390930492830185900485028101850190915281815292830182828015611dd05780601f10611da557610100808354040283529160200191611dd0565b6060806123b7613625565b6000601454601554111561242d57336000908152601860205260409020546001111561242d576040805160e560020a62461bcd02815260206004820152601660248201527f6e6f2073616e20736c6f747320617661696c61626c6500000000000000000000604482015290519081900360640190fd5b61246688888080601f01602080910402602001604051908101604052809392919081815260200183838082843750612ba5945050505050565b925060a06040519081016040528084815260200142815260200142815260200133600160a060020a0316815260200187878080601f016020809104026020016040519081016040528093929190818152602001838380828437505050929093525050601c80546001818101808455600093909352845180519597506125229591945087926005027f0e4562a10381dec21b205ed72637e6b1b523bdd0e4d4d50af5cd23dd4500a21101916112aa9183916020919091019061365e565b905060016017846040518082805190602001908083835b602083106125585780518252601f199092019160209182019101612539565b51815160209384036101000a60001901801990921691161790529201948552506040519384900301909220805460ff191693151593909317909255505060145460155411156125d357336000908152601860205260409020546125c290600163ffffffff6128ba16565b336000908152601860205260409020555b612610813388888080601f016020809104026020016040519081016040528093929190818152602001838380828437508b94506128d99350505050565b50909695505050505050565b600160a060020a03918216600090815260046020908152604080832093909416825291909152205460ff1690565b600c54600160a060020a0316331461266157600080fd5b611cb681612f9b565b60105481565b600c54600160a060020a0316331461268757600080fd5b600f8054600160a060020a031916600160a060020a0392909216919091179055565b6000806126b58361175f565b905080600160a060020a031684600160a060020a031614806126f0575083600160a060020a03166126e584610d00565b600160a060020a0316145b806127005750612700818561261c565b949350505050565b81600160a060020a031661271b8261175f565b600160a060020a03161461272e57600080fd5b600081815260026020526040902054600160a060020a0316156115c85760009081526002602052604090208054600160a060020a031916905550565b6000806000612779858561300c565b600084815260086020908152604080832054600160a060020a03891684526007909252909120549093506127b490600163ffffffff6128ba16565b600160a060020a0386166000908152600760205260409020805491935090839081106127dc57fe5b90600052602060002001549050806007600087600160a060020a0316600160a060020a031681526020019081526020016000208481548110151561281c57fe5b6000918252602080832090910192909255600160a060020a03871681526007909152604090208054906128539060001983016136d8565b50600093845260086020526040808520859055908452909220555050565b600061287d8383613095565b50600160a060020a039091166000908152600760209081526040808320805460018101825590845282842081018590559383526008909152902055565b6000828211156128c657fe5b50900390565b8181018281101561178357fe5b601354600160a060020a0384166000908152601960205260409020541061294a576040805160e560020a62461bcd02815260206004820152600d60248201527f6d61782073616e206f776e656400000000000000000000000000000000000000604482015290519081900360640190fd5b83601a826040518082805190602001908083835b6020831061297d5780518252601f19909201916020918201910161295e565b51815160209384036101000a6000190180199092169116179052920194855250604051938490038101842094909455505082518592601b92859290918291908401908083835b602083106129e25780518252601f1990920191602091820191016129c3565b51815160209384036101000a6000190180199092169116179052920194855250604080519485900382019094208054600160a060020a031916600160a060020a03968716179055938716600090815260199094525050902054612a469060016128cc565b600160a060020a038416600090815260196020526040902055601554612a7390600163ffffffff6128cc16565b601555612a808385613118565b60168054604080516020601f60026000196101006001881615020190951694909404938401819004810282018101909252828152612ae493889361232e938301828280156123235780601f106122f857610100808354040283529160200191612323565b7fdf5fffc2bd8c53e0c41aa67368817a9fb69561752c912bb1fa2e04d64d564f558385836040518084600160a060020a0316600160a060020a0316815260200183815260200180602001828103825283818151815260200191508051906020019080838360005b83811015612b63578181015183820152602001612b4b565b50505050905090810190601f168015612b905780820380516001836020036101000a031916815260200191505b5094505050505060405180910390a150505050565b606080612bb183613167565b9050612bbc816131d4565b1515612c12576040805160e560020a62461bcd02815260206004820152601060248201527f73616e206973206e6f742076616c696400000000000000000000000000000000604482015290519081900360640190fd5b6017816040518082805190602001908083835b60208310612c445780518252601f199092019160209182019101612c25565b51815160209384036101000a600019018019909216911617905292019485525060405193849003019092205460ff161591506117839050576040805160e560020a62461bcd02815260206004820152601160248201527f73616e206973206e6f7420756e69717565000000000000000000000000000000604482015290519081900360640190fd5b600080612ce185600160a060020a031661350b565b1515612cf05760019150612e30565b6040517f150b7a020000000000000000000000000000000000000000000000000000000081523360048201818152600160a060020a03898116602485015260448401889052608060648501908152875160848601528751918a169463150b7a0294938c938b938b93909160a490910190602085019080838360005b83811015612d83578181015183820152602001612d6b565b50505050905090810190601f168015612db05780820380516001836020036101000a031916815260200191505b5095505050505050602060405180830381600087803b158015612dd257600080fd5b505af1158015612de6573d6000803e3d6000fd5b505050506040513d6020811015612dfc57600080fd5b5051600160e060020a031981167f150b7a020000000000000000000000000000000000000000000000000000000014925090505b50949350505050565b6060806060806060600080889550879450612e5f855187516128cc90919063ffffffff16565b6040519080825280601f01601f191660200182016040528015612e8c578160200160208202803883390190505b50935083925060009150600090505b8551811015612ef9578581815181101515612eb257fe5b90602001015160f860020a900460f860020a028383806001019450815181101515612ed957fe5b906020010190600160f860020a031916908160001a905350600101612e9b565b5060005b8451811015612f5b578481815181101515612f1457fe5b90602001015160f860020a900460f860020a028383806001019450815181101515612f3b57fe5b906020010190600160f860020a031916908160001a905350600101612efd565b5090979650505050505050565b612f71826115e8565b1515612f7c57600080fd5b6000828152600b6020908152604090912082516114199284019061365e565b600160a060020a0381161515612fb057600080fd5b600c54604051600160a060020a038084169216907f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e090600090a3600c8054600160a060020a031916600160a060020a0392909216919091179055565b81600160a060020a031661301f8261175f565b600160a060020a03161461303257600080fd5b600160a060020a03821660009081526003602052604090205461305c90600163ffffffff6128ba16565b600160a060020a039092166000908152600360209081526040808320949094559181526001909152208054600160a060020a0319169055565b600081815260016020526040902054600160a060020a0316156130b757600080fd5b60008181526001602081815260408084208054600160a060020a031916600160a060020a03881690811790915584526003909152909120546130f8916128cc565b600160a060020a0390921660009081526003602052604090209190915550565b6131228282613513565b600980546000838152600a60205260408120829055600182018355919091527f6e1540171b6c0c960b71a7020d9f60077f6af931a8bbf590da0223dacf75c7af015550565b60608160005b81518110156131cd5761319f828281518110151561318757fe5b90602001015160f860020a900460f860020a0261356e565b82828151811015156131ad57fe5b906020010190600160f860020a031916908160001a90535060010161316d565b5092915050565b600060606000806000806000806000806000808c9a508a5199506011548a118061320057506012548a11155b1561320e5760009b506134fb565b507f200000000000000000000000000000000000000000000000000000000000000097507f2e0000000000000000000000000000000000000000000000000000000000000096507f650000000000000000000000000000000000000000000000000000000000000095507f740000000000000000000000000000000000000000000000000000000000000094507f6800000000000000000000000000000000000000000000000000000000000000935060009250829150819050805b898110156134bd5788600160f860020a0319168b828151811015156132eb57fe5b90602001015160f860020a900460f860020a02600160f860020a03191614156133175760009b506134fb565b87600160f860020a0319168b8281518110151561333057fe5b90602001015160f860020a900460f860020a02600160f860020a03191614156133815761336484600163ffffffff6128cc16565b935060018411156133785760009b506134fb565b600192506134b5565b6000831180156133915750600583105b156134b55782600114156133ef5786600160f860020a0319168b828151811015156133b857fe5b90602001015160f860020a900460f860020a02600160f860020a03191614156133ef576133ec82600163ffffffff6128cc16565b91505b82600214156134485785600160f860020a0319168b8281518110151561341157fe5b90602001015160f860020a900460f860020a02600160f860020a03191614156134485761344582600163ffffffff6128cc16565b91505b82600314156134a15784600160f860020a0319168b8281518110151561346a57fe5b90602001015160f860020a900460f860020a02600160f860020a03191614156134a15761349e82600163ffffffff6128cc16565b91505b6134b283600163ffffffff6128cc16565b92505b6001016132ca565b8315156134cd5760009b506134fb565b8160031480156134dd5750826004145b806134e85750826001145b156134f65760009b506134fb565b60019b505b5050505050505050505050919050565b6000903b1190565b600160a060020a038216151561352857600080fd5b6135328282612871565b6040518190600160a060020a038416906000907fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef908290a45050565b60007f41000000000000000000000000000000000000000000000000000000000000007fff0000000000000000000000000000000000000000000000000000000000000083161080159061360457507f5a000000000000000000000000000000000000000000000000000000000000007fff00000000000000000000000000000000000000000000000000000000000000831611155b15613621578160f860020a900460200160f860020a029050610c64565b5090565b60a0604051908101604052806060815260200160008152602001600081526020016000600160a060020a03168152602001606081525090565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f1061369f57805160ff19168380011785556136cc565b828001600101855582156136cc579182015b828111156136cc5782518255916020019190600101906136b1565b506136219291506136f8565b815481835581811115611419576000838152602090206114199181019083015b610cfd91905b8082111561362157600081556001016136fe5600a165627a7a72305820d4652f7817334c70c4d6282e7a0df0bf4bb14b846b236304d464217fcd51a5b60029"}