{"Runs": "200", "SwarmSource": "bzzr://824faa9a1a1c971be5f5b529149a59e462185c5aef8cde729b59ca67cbf5ff42", "ABI": "[{\"constant\":true,\"inputs\":[{\"name\":\"interfaceID\",\"type\":\"bytes4\"}],\"name\":\"supportsInterface\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"pure\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"name\",\"outputs\":[{\"name\":\"\",\"type\":\"string\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_tokenId\",\"type\":\"uint256\"}],\"name\":\"getApproved\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_to\",\"type\":\"address\"},{\"name\":\"_tokenId\",\"type\":\"uint256\"}],\"name\":\"approve\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"address\"},{\"name\":\"\",\"type\":\"address\"}],\"name\":\"approvedForAll\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"implementsERC721\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_seed\",\"type\":\"uint256\"},{\"name\":\"_receiver\",\"type\":\"address\"}],\"name\":\"minePepe\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"totalSupply\",\"outputs\":[{\"name\":\"total\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_amount\",\"type\":\"uint256\"}],\"name\":\"pepePremine\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"zeroGenPepes\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_pepeId\",\"type\":\"uint256\"},{\"name\":\"_name\",\"type\":\"bytes32\"}],\"name\":\"setPepeName\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_from\",\"type\":\"address\"},{\"name\":\"_to\",\"type\":\"address\"},{\"name\":\"_tokenId\",\"type\":\"uint256\"}],\"name\":\"transferFrom\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"address\"}],\"name\":\"balances\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"pepeNames\",\"outputs\":[{\"name\":\"\",\"type\":\"bytes32\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_pepeId\",\"type\":\"uint256\"}],\"name\":\"getPepe\",\"outputs\":[{\"name\":\"master\",\"type\":\"address\"},{\"name\":\"genotype\",\"type\":\"uint256[2]\"},{\"name\":\"canCozyAgain\",\"type\":\"uint64\"},{\"name\":\"generation\",\"type\":\"uint64\"},{\"name\":\"father\",\"type\":\"uint256\"},{\"name\":\"mother\",\"type\":\"uint256\"},{\"name\":\"pepeName\",\"type\":\"bytes32\"},{\"name\":\"coolDownIndex\",\"type\":\"uint8\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_owner\",\"type\":\"address\"},{\"name\":\"_index\",\"type\":\"uint256\"}],\"name\":\"tokenOfOwnerByIndex\",\"outputs\":[{\"name\":\"tokenId\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"miner\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_from\",\"type\":\"address\"},{\"name\":\"_to\",\"type\":\"address\"},{\"name\":\"_tokenId\",\"type\":\"uint256\"}],\"name\":\"safeTransferFrom\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"R\",\"outputs\":[{\"name\":\"\",\"type\":\"uint8\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"maxHaltDuration\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_pepeId\",\"type\":\"uint256\"}],\"name\":\"getCozyAgain\",\"outputs\":[{\"name\":\"\",\"type\":\"uint64\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_tokenId\",\"type\":\"uint256\"}],\"name\":\"ownerOf\",\"outputs\":[{\"name\":\"_owner\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"bytes32\"}],\"name\":\"userToAddress\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_owner\",\"type\":\"address\"}],\"name\":\"balanceOf\",\"outputs\":[{\"name\":\"balance\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"renounceOwnership\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_username\",\"type\":\"bytes32\"}],\"name\":\"claimUsername\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"MAX_ZERO_GEN_PEPES\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"approved\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_pepeId\",\"type\":\"uint256\"},{\"name\":\"_auction\",\"type\":\"address\"},{\"name\":\"_beginPrice\",\"type\":\"uint256\"},{\"name\":\"_endPrice\",\"type\":\"uint256\"},{\"name\":\"_duration\",\"type\":\"uint64\"}],\"name\":\"transferAndAuction\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"owner\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"symbol\",\"outputs\":[{\"name\":\"\",\"type\":\"string\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_miner\",\"type\":\"address\"}],\"name\":\"setMiner\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_pepeId\",\"type\":\"uint256\"},{\"name\":\"_auction\",\"type\":\"address\"},{\"name\":\"_cozyCandidate\",\"type\":\"uint256\"},{\"name\":\"_candidateAsFather\",\"type\":\"bool\"},{\"name\":\"_affiliate\",\"type\":\"address\"}],\"name\":\"approveAndBuyAffiliated\",\"outputs\":[],\"payable\":true,\"stateMutability\":\"payable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_operator\",\"type\":\"address\"},{\"name\":\"_approved\",\"type\":\"bool\"}],\"name\":\"setApprovalForAll\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_to\",\"type\":\"address\"},{\"name\":\"_tokenId\",\"type\":\"uint256\"}],\"name\":\"transfer\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"haltDuration\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_from\",\"type\":\"address\"},{\"name\":\"_to\",\"type\":\"address\"},{\"name\":\"_tokenId\",\"type\":\"uint256\"},{\"name\":\"_data\",\"type\":\"bytes\"}],\"name\":\"safeTransferFrom\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"halted\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_mother\",\"type\":\"uint256\"},{\"name\":\"_father\",\"type\":\"uint256\"},{\"name\":\"_pepeReceiver\",\"type\":\"address\"}],\"name\":\"cozyTime\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"unhalt\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"cozyCoolDowns\",\"outputs\":[{\"name\":\"\",\"type\":\"uint32\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_pepeId\",\"type\":\"uint256\"},{\"name\":\"_auction\",\"type\":\"address\"},{\"name\":\"_cozyCandidate\",\"type\":\"uint256\"},{\"name\":\"_candidateAsFather\",\"type\":\"bool\"}],\"name\":\"approveAndBuy\",\"outputs\":[],\"payable\":true,\"stateMutability\":\"payable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_owner\",\"type\":\"address\"},{\"name\":\"_operator\",\"type\":\"address\"}],\"name\":\"isApprovedForAll\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"address\"}],\"name\":\"addressToUser\",\"outputs\":[{\"name\":\"\",\"type\":\"bytes32\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"haltTime\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_newOwner\",\"type\":\"address\"}],\"name\":\"transferOwnership\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"MAX_PREMINE\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"pepes\",\"outputs\":[{\"name\":\"master\",\"type\":\"address\"},{\"name\":\"canCozyAgain\",\"type\":\"uint64\"},{\"name\":\"generation\",\"type\":\"uint64\"},{\"name\":\"father\",\"type\":\"uint64\"},{\"name\":\"mother\",\"type\":\"uint64\"},{\"name\":\"coolDownIndex\",\"type\":\"uint8\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_duration\",\"type\":\"uint256\"}],\"name\":\"halt\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"mother\",\"type\":\"uint256\"},{\"indexed\":true,\"name\":\"father\",\"type\":\"uint256\"},{\"indexed\":true,\"name\":\"pepeId\",\"type\":\"uint256\"}],\"name\":\"PepeBorn\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"pepeId\",\"type\":\"uint256\"}],\"name\":\"PepeNamed\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"_owner\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"_approved\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"_tokenId\",\"type\":\"uint256\"}],\"name\":\"Approval\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"_from\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"_to\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"_tokenId\",\"type\":\"uint256\"}],\"name\":\"Transfer\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"_owner\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"_operator\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"_approved\",\"type\":\"bool\"}],\"name\":\"ApprovalForAll\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"user\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"username\",\"type\":\"bytes32\"}],\"name\":\"UserNamed\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"previousOwner\",\"type\":\"address\"}],\"name\":\"OwnershipRenounced\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"previousOwner\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"newOwner\",\"type\":\"address\"}],\"name\":\"OwnershipTransferred\",\"type\":\"event\"}]", "Library": "", "CompilerVersion": "v0.4.25+commit.59dbf8f1", "ConstructorArguments": "", "SourceCode": "pragma solidity ^0.4.24;\r\n\r\n// File: contracts/Genetic.sol\r\n\r\n// solhint-disable-next-line\r\npragma solidity ^0.4.23;\r\n\r\n\r\ncontract Genetic {\r\n\r\n    // TODO mutations\r\n    // maximum number of random mutations per chromatid\r\n    uint8 public constant R = 5;\r\n\r\n    // solhint-disable-next-line function-max-lines\r\n    function breed(uint256[2] mother, uint256[2] father, uint256 seed) internal view returns (uint256[2] memOffset) {\r\n        // Meiosis I: recombining alleles (Chromosomal crossovers)\r\n\r\n        // Note about optimization I: no cell duplication,\r\n        //  producing 2 seeds/eggs per cell is enough, instead of 4 (like humans do)\r\n\r\n        // Note about optimization II: crossovers happen,\r\n        //  but only 1 side of the result is computed,\r\n        //  as the other side will not affect anything.\r\n\r\n        // solhint-disable-next-line no-inline-assembly\r\n        assembly {\r\n            // allocate output\r\n            // 1) get the pointer to our memory\r\n            memOffset := mload(0x40)\r\n            // 2) Change the free-memory pointer to keep our memory\r\n            //     (we will only use 64 bytes: 2 values of 256 bits)\r\n            mstore(0x40, add(memOffset, 64))\r\n\r\n\r\n            // Put seed in scratchpad 0\r\n            mstore(0x0, seed)\r\n            // Also use the timestamp, best we could do to increase randomness\r\n            //  without increasing costs dramatically. (Trade-off)\r\n            mstore(0x20, timestamp)\r\n\r\n            // Hash it for a universally random bitstring.\r\n            let hash := keccak256(0, 64)\r\n\r\n            // Byzantium VM does not support shift opcodes, will be introduced in Constantinople.\r\n            // Soldity itself, in non-assembly, also just uses other opcodes to simulate it.\r\n            // Optmizer should take care of inlining, just declare shiftR ourselves here.\r\n            // Where possible, better optimization is applied to make it cheaper.\r\n            function shiftR(value, offset) -> result {\r\n                result := div(value, exp(2, offset))\r\n            }\r\n\r\n            // solhint-disable max-line-length\r\n            // m_context << Instruction::SWAP1 << u256(2) << Instruction::EXP << Instruction::SWAP1 << (c_leftSigned ? Instruction::SDIV : Instruction::DIV);\r\n\r\n            // optimization: although one side consists of multiple chromatids,\r\n            //  we handle them just as one long chromatid:\r\n            //  only difference is that a crossover in chromatid i affects chromatid i+1.\r\n            //  No big deal, order and location is random anyway\r\n            function processSide(fatherSrc, motherSrc, rngSrc) -> result {\r\n\r\n                {\r\n                    // initial rngSrc bit length: 254 bits\r\n\r\n                    // Run the crossovers\r\n                    // =====================================================\r\n\r\n                    // Pick some crossovers\r\n                    // Each crossover is spaced ~64 bits on average.\r\n                    // To achieve this, we get a random 7 bit number, [0, 128), for each crossover.\r\n\r\n                    // 256 / 64 = 4, we need 4 crossovers,\r\n                    //  and will have 256 / 127 = 2 at least (rounded down).\r\n\r\n                    // Get one bit determining if we should pick DNA from the father,\r\n                    //  or from the mother.\r\n                    // This changes every crossover. (by swapping father and mother)\r\n                    {\r\n                        if eq(and(rngSrc, 0x1), 0) {\r\n                            // Swap mother and father,\r\n                            // create a temporary variable (code golf XOR swap costs more in gas)\r\n                            let temp := fatherSrc\r\n                            fatherSrc := motherSrc\r\n                            motherSrc := temp\r\n                        }\r\n\r\n                        // remove the bit from rng source, 253 rng bits left\r\n                        rngSrc := shiftR(rngSrc, 1)\r\n                    }\r\n\r\n                    // Don't push/pop this all the time, we have just enough space on stack.\r\n                    let mask := 0\r\n\r\n                    // Cap at 4 crossovers, no more than that.\r\n                    let cap := 0\r\n                    let crossoverLen := and(rngSrc, 0x7f) // bin: 1111111 (7 bits ON)\r\n                    // remove bits from hash, e.g. 254 - 7 = 247 left.\r\n                    rngSrc := shiftR(rngSrc, 7)\r\n                    let crossoverPos := crossoverLen\r\n\r\n                    // optimization: instead of shifting with an opcode we don't have until Constantinople,\r\n                    //  keep track of the a shifted number, updated using multiplications.\r\n                    let crossoverPosLeading1 := 1\r\n\r\n                    // solhint-disable-next-line no-empty-blocks\r\n                    for { } and(lt(crossoverPos, 256), lt(cap, 4)) {\r\n\r\n                        crossoverLen := and(rngSrc, 0x7f) // bin: 1111111 (7 bits ON)\r\n                        // remove bits from hash, e.g. 254 - 7 = 247 left.\r\n                        rngSrc := shiftR(rngSrc, 7)\r\n\r\n                        crossoverPos := add(crossoverPos, crossoverLen)\r\n\r\n                        cap := add(cap, 1)\r\n                    } {\r\n\r\n                        // Note: we go from right to left in the bit-string.\r\n\r\n                        // Create a mask for this crossover.\r\n                        // Example:\r\n                        // 00000000000001111111111111111110000000000000000000000000000000000000000000000000000000000.....\r\n                        // |Prev. data ||Crossover here  ||remaining data .......\r\n                        //\r\n                        // The crossover part is copied from the mother/father to the child.\r\n\r\n                        // Create the bit-mask\r\n                        // Create a bitstring that ignores the previous data:\r\n                        // 00000000000001111111111111111111111111111111111111111111111111111111111111111111111111111.....\r\n                        // First create a leading 1, just before the crossover, like:\r\n                        // 00000000000010000000000000000000000000000000000000000000000000000000000.....\r\n                        // Then substract 1, to get a long string of 1s\r\n                        // 00000000000001111111111111111111111111111111111111111111111111111111111111111111111111111.....\r\n                        // Now do the same for the remain part, and xor it.\r\n                        // leading 1\r\n                        // 00000000000000000000000000000010000000000000000000000000000000000000000000000000000000000.....\r\n                        // sub 1\r\n                        // 00000000000000000000000000000001111111111111111111111111111111111111111111111111111111111.....\r\n                        // xor with other\r\n                        // 00000000000001111111111111111111111111111111111111111111111111111111111111111111111111111.....\r\n                        // 00000000000000000000000000000001111111111111111111111111111111111111111111111111111111111.....\r\n                        // 00000000000001111111111111111110000000000000000000000000000000000000000000000000000000000.....\r\n\r\n                        // Use the final shifted 1 of the previous crossover as the start marker\r\n                        mask := sub(crossoverPosLeading1, 1)\r\n\r\n                        // update for this crossover, (and will be used as start for next crossover)\r\n                        crossoverPosLeading1 := mul(1, exp(2, crossoverPos))\r\n                        mask := xor(mask,\r\n                                    sub(crossoverPosLeading1, 1)\r\n                        )\r\n\r\n                        // Now add the parent data to the child genotype\r\n                        // E.g.\r\n                        // Mask:         00000000000001111111111111111110000000000000000000000000000000000000000000000000000000000....\r\n                        // Parent:       10010111001000110101011111001010001011100000000000010011000001000100000001011101111000111....\r\n                        // Child (pre):  00000000000000000000000000000001111110100101111111000011001010000000101010100000110110110....\r\n                        // Child (post): 00000000000000110101011111001011111110100101111111000011001010000000101010100000110110110....\r\n\r\n                        // To do this, we run: child_post = child_pre | (mask & father)\r\n                        result := or(result, and(mask, fatherSrc))\r\n\r\n                        // Swap father and mother, next crossover will take a string from the other.\r\n                        let temp := fatherSrc\r\n                        fatherSrc := motherSrc\r\n                        motherSrc := temp\r\n                    }\r\n\r\n                    // We still have a left-over part that was not copied yet\r\n                    // E.g., we have something like:\r\n                    // Father: |            xxxxxxxxxxxxxxxxxxx          xxxxxxxxxxxxxxxxxxxxxxxx            ....\r\n                    // Mother: |############                   xxxxxxxxxx                        xxxxxxxxxxxx....\r\n                    // Child:  |            xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx....\r\n                    // The ############ still needs to be applied to the child, also,\r\n                    //  this can be done cheaper than in the loop above,\r\n                    //  as we don't have to swap anything for the next crossover or something.\r\n\r\n                    // At this point we have to assume 4 crossovers ran,\r\n                    //  and that we only have 127 - 1 - (4 * 7) = 98 bits of randomness left.\r\n                    // We stopped at the bit after the crossoverPos index, see \"x\":\r\n                    // 000000000xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx.....\r\n                    // now create a leading 1 at crossoverPos like:\r\n                    // 000000001000000000000000000000000000000000000000000000000000000000000000000.....\r\n                    // Sub 1, get the mask for what we had.\r\n                    // 000000000111111111111111111111111111111111111111111111111111111111111111111.....\r\n                    // Invert, and we have the final mask:\r\n                    // 111111111000000000000000000000000000000000000000000000000000000000000000000.....\r\n                    mask := not(sub(crossoverPosLeading1, 1))\r\n                    // Apply it to the result\r\n                    result := or(result, and(mask, fatherSrc))\r\n\r\n                    // Random mutations\r\n                    // =====================================================\r\n\r\n                    // random mutations\r\n                    // Put rng source in scratchpad 0\r\n                    mstore(0x0, rngSrc)\r\n                    // And some arbitrary padding in scratchpad 1,\r\n                    //  used to create different hashes based on input size changes\r\n                    mstore(0x20, 0x434f4c4c454354205045504553204f4e2043525950544f50455045532e494f21)\r\n                    // Hash it for a universally random bitstring.\r\n                    // Then reduce the number of 1s by AND-ing it with other *different* hashes.\r\n                    // Each bit in mutations has a probability of 0.5^5 = 0.03125 = 3.125% to be a 1\r\n                    let mutations := and(\r\n                            and(\r\n                                and(keccak256(0, 32), keccak256(1, 33)),\r\n                                and(keccak256(2, 34), keccak256(3, 35))\r\n                            ),\r\n                            keccak256(0, 36)\r\n                    )\r\n\r\n                    result := xor(result, mutations)\r\n\r\n                }\r\n            }\r\n\r\n\r\n            {\r\n\r\n                // Get 1 bit of pseudo randomness that will\r\n                //  determine if side #1 will come from the left, or right side.\r\n                // Either 0 or 1, shift it by 5 bits to get either 0x0 or 0x20, cheaper later on.\r\n                let relativeFatherSideLoc := mul(and(hash, 0x1), 0x20) // shift by 5 bits = mul by 2^5=32 (0x20)\r\n                // Either 0 or 1, shift it by 5 bits to get either 0x0 or 0x20, cheaper later on.\r\n                let relativeMotherSideLoc := mul(and(hash, 0x2), 0x10) // already shifted by 1, mul by 2^4=16 (0x10)\r\n\r\n                // Now remove the used 2 bits from the hash, 254 bits remaining now.\r\n                hash := div(hash, 4)\r\n\r\n                // Process the side, load the relevant parent data that will be used.\r\n                mstore(memOffset, processSide(\r\n                    mload(add(father, relativeFatherSideLoc)),\r\n                    mload(add(mother, relativeMotherSideLoc)),\r\n                    hash\r\n                ))\r\n\r\n                // The other side will be the opposite index: 1 -> 0, 0 -> 1\r\n                // Apply it to the location,\r\n                //  which is either 0x20 (For index 1) or 0x0 for index 0.\r\n                relativeFatherSideLoc := xor(relativeFatherSideLoc, 0x20)\r\n                relativeMotherSideLoc := xor(relativeMotherSideLoc, 0x20)\r\n\r\n                mstore(0x0, seed)\r\n                // Second argument will be inverse,\r\n                //  resulting in a different second hash.\r\n                mstore(0x20, not(timestamp))\r\n\r\n                // Now create another hash, for the other side\r\n                hash := keccak256(0, 64)\r\n\r\n                // Process the other side\r\n                mstore(add(memOffset, 0x20), processSide(\r\n                    mload(add(father, relativeFatherSideLoc)),\r\n                    mload(add(mother, relativeMotherSideLoc)),\r\n                    hash\r\n                ))\r\n\r\n            }\r\n\r\n        }\r\n\r\n        // Sample input:\r\n        // [\"0xAAABBBBBBBBCCCCCCCCAAAAAAAAABBBBBBBBBBCCCCCCCCCAABBBBBBBCCCCCCCC\",\"0x4444444455555555555555556666666666666644444444455555555555666666\"]\r\n        //\r\n        // [\"0x1111111111112222222223333311111111122222223333333331111112222222\",\"0x7777788888888888999999999999977777777777788888888888999999997777\"]\r\n\r\n        // Expected results (or similar, depends on the seed):\r\n        // 0xAAABBBBBBBBCCCCCCCCAAAAAAAAABBBBBBBBBBCCCCCCCCCAABBBBBBBCCCCCCCC < Father side A\r\n        // 0x4444444455555555555555556666666666666644444444455555555555666666 < Father side B\r\n\r\n        // 0x1111111111112222222223333311111111122222223333333331111112222222 < Mother side A\r\n        // 0x7777788888888888999999999999977777777777788888888888999999997777 < Mother side B\r\n\r\n        //   xxxxxxxxxxxxxxxxx           xxxxxxxxx                         xx\r\n        // 0xAAABBBBBBBBCCCCCD99999999998BBBBBBBBF77778888888888899999999774C < Child side A\r\n        //   xxx                       xxxxxxxxxxx\r\n        // 0x4441111111112222222223333366666666666222223333333331111112222222 < Child side B\r\n\r\n        // And then random mutations, for gene pool expansion.\r\n        // Each bit is flipped with a 3.125% chance\r\n\r\n        // Example:\r\n        //a2c37edc61dca0ca0b199e098c80fd5a221c2ad03605b4b54332361358745042 < random hash 1\r\n        //c217d04b19a83fe497c1cf6e1e10030e455a0812a6949282feec27d67fe2baa7 < random hash 2\r\n        //2636a55f38bed26d804c63a13628e21b2d701c902ca37b2b0ca94fada3821364 < random hash 3\r\n        //86bb023a85e2da50ac233b946346a53aa070943b0a8e91c56e42ba181729a5f9 < random hash 4\r\n        //5d71456a1288ab30ddd4c955384d42e66a09d424bd7743791e3eab8e09aa13f1 < random hash 5\r\n        //0000000800800000000000000000000200000000000000000000020000000000 < resulting mutation\r\n        //aaabbbbbbbbcccccd99999999998bbbbbbbbf77778888888888899999999774c < original\r\n        //aaabbbb3bb3cccccd99999999998bbb9bbbbf7777888888888889b999999774c < mutated (= original XOR mutation)\r\n    }\r\n\r\n    // Generates (psuedo) random Pepe DNA\r\n    function randomDNA(uint256 seed) internal pure returns (uint256[2] memOffset) {\r\n\r\n        // solhint-disable-next-line no-inline-assembly\r\n        assembly {\r\n            // allocate output\r\n            // 1) get the pointer to our memory\r\n            memOffset := mload(0x40)\r\n            // 2) Change the free-memory pointer to keep our memory\r\n            //     (we will only use 64 bytes: 2 values of 256 bits)\r\n            mstore(0x40, add(memOffset, 64))\r\n\r\n            // Load the seed into 1st scratchpad memory slot.\r\n            // adjacent to the additional value (used to create two distinct hashes)\r\n            mstore(0x0, seed)\r\n\r\n            // In second scratchpad slot:\r\n            // The additional value can be any word, as long as the caller uses\r\n            //  it (second hash needs to be different)\r\n            mstore(0x20, 0x434f4c4c454354205045504553204f4e2043525950544f50455045532e494f21)\r\n\r\n\r\n            // // Create first element pointer of array\r\n            // mstore(memOffset, add(memOffset, 64)) // pointer 1\r\n            // mstore(add(memOffset, 32), add(memOffset, 96)) // pointer 2\r\n\r\n            // control block to auto-pop the hash.\r\n            {\r\n                // L * N * 2 * 4 = 4 * 2 * 2 * 4 = 64 bytes, 2x 256 bit hash\r\n\r\n                // Sha3 is cheaper than sha256, make use of it\r\n                let hash := keccak256(0, 64)\r\n\r\n                // Store first array value\r\n                mstore(memOffset, hash)\r\n\r\n                // Now hash again, but only 32 bytes of input,\r\n                //  to ignore make the input different than the previous call,\r\n                hash := keccak256(0, 32)\r\n                mstore(add(memOffset, 32), hash)\r\n\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n}\r\n\r\n// File: openzeppelin-solidity/contracts/ownership/Ownable.sol\r\n\r\n/**\r\n * @title Ownable\r\n * @dev The Ownable contract has an owner address, and provides basic authorization control\r\n * functions, this simplifies the implementation of \"user permissions\".\r\n */\r\ncontract Ownable {\r\n  address public owner;\r\n\r\n\r\n  event OwnershipRenounced(address indexed previousOwner);\r\n  event OwnershipTransferred(\r\n    address indexed previousOwner,\r\n    address indexed newOwner\r\n  );\r\n\r\n\r\n  /**\r\n   * @dev The Ownable constructor sets the original `owner` of the contract to the sender\r\n   * account.\r\n   */\r\n  constructor() public {\r\n    owner = msg.sender;\r\n  }\r\n\r\n  /**\r\n   * @dev Throws if called by any account other than the owner.\r\n   */\r\n  modifier onlyOwner() {\r\n    require(msg.sender == owner);\r\n    _;\r\n  }\r\n\r\n  /**\r\n   * @dev Allows the current owner to relinquish control of the contract.\r\n   * @notice Renouncing to ownership will leave the contract without an owner.\r\n   * It will not be possible to call the functions with the `onlyOwner`\r\n   * modifier anymore.\r\n   */\r\n  function renounceOwnership() public onlyOwner {\r\n    emit OwnershipRenounced(owner);\r\n    owner = address(0);\r\n  }\r\n\r\n  /**\r\n   * @dev Allows the current owner to transfer control of the contract to a newOwner.\r\n   * @param _newOwner The address to transfer ownership to.\r\n   */\r\n  function transferOwnership(address _newOwner) public onlyOwner {\r\n    _transferOwnership(_newOwner);\r\n  }\r\n\r\n  /**\r\n   * @dev Transfers control of the contract to a newOwner.\r\n   * @param _newOwner The address to transfer ownership to.\r\n   */\r\n  function _transferOwnership(address _newOwner) internal {\r\n    require(_newOwner != address(0));\r\n    emit OwnershipTransferred(owner, _newOwner);\r\n    owner = _newOwner;\r\n  }\r\n}\r\n\r\n// File: contracts/Usernames.sol\r\n\r\n// solhint-disable-next-line\r\npragma solidity ^0.4.19;\r\n\r\n\r\ncontract Usernames {\r\n\r\n    mapping(address => bytes32) public addressToUser;\r\n    mapping(bytes32 => address) public userToAddress;\r\n\r\n    event UserNamed(address indexed user, bytes32 indexed username);\r\n\r\n    /**\r\n     * Claim a username. Frees up a previously used one\r\n     * @param _username to claim\r\n     */\r\n    function claimUsername(bytes32 _username) external {\r\n        require(userToAddress[_username] == address(0));// Username must be free\r\n\r\n        if (addressToUser[msg.sender] != bytes32(0)) { // If user already has username free it up\r\n            userToAddress[addressToUser[msg.sender]] = address(0);\r\n        }\r\n\r\n        //all is well assign username\r\n        addressToUser[msg.sender] = _username;\r\n        userToAddress[_username] = msg.sender;\r\n\r\n        emit UserNamed(msg.sender, _username);\r\n\r\n    }\r\n\r\n}\r\n\r\n// File: contracts/Beneficiary.sol\r\n\r\n// solhint-disable-next-line\r\npragma solidity ^0.4.24;\r\n\r\n\r\n\r\n/** @title Beneficiary */\r\ncontract Beneficiary is Ownable {\r\n    address public beneficiary;\r\n\r\n    constructor() public {\r\n        beneficiary = msg.sender;\r\n    }\r\n\r\n    /**\r\n     * @dev Change the beneficiary address\r\n     * @param _beneficiary Address of the new beneficiary\r\n     */\r\n    function setBeneficiary(address _beneficiary) public onlyOwner {\r\n        beneficiary = _beneficiary;\r\n    }\r\n}\r\n\r\n// File: contracts/Affiliate.sol\r\n\r\n// solhint-disable-next-line\r\npragma solidity ^0.4.25;\r\n\r\n\r\n\r\n/** @title Affiliate */\r\ncontract Affiliate is Ownable {\r\n    mapping(address => bool) public canSetAffiliate;\r\n    mapping(address => address) public userToAffiliate;\r\n\r\n    /** @dev Allows an address to set the affiliate address for a user\r\n      * @param _setter The address that should be allowed\r\n      */\r\n    function setAffiliateSetter(address _setter) public onlyOwner {\r\n        canSetAffiliate[_setter] = true;\r\n    }\r\n\r\n    /**\r\n     * @dev Set the affiliate of a user\r\n     * @param _user user to set affiliate for\r\n     * @param _affiliate address to set\r\n     */\r\n    function setAffiliate(address _user, address _affiliate) public {\r\n        require(canSetAffiliate[msg.sender]);\r\n        if (userToAffiliate[_user] == address(0)) {\r\n            userToAffiliate[_user] = _affiliate;\r\n        }\r\n    }\r\n\r\n}\r\n\r\n// File: contracts/interfaces/ERC721.sol\r\n\r\ncontract ERC721 {\r\n    function implementsERC721() public pure returns (bool);\r\n    function totalSupply() public view returns (uint256 total);\r\n    function balanceOf(address _owner) public view returns (uint256 balance);\r\n    function ownerOf(uint256 _tokenId) public view returns (address owner);\r\n    function approve(address _to, uint256 _tokenId) public;\r\n    function transferFrom(address _from, address _to, uint256 _tokenId) public returns (bool) ;\r\n    function transfer(address _to, uint256 _tokenId) public returns (bool);\r\n    event Transfer(address indexed from, address indexed to, uint256 indexed tokenId);\r\n    event Approval(address indexed owner, address indexed approved, uint256 indexed tokenId);\r\n\r\n    // Optional\r\n    // function name() public view returns (string name);\r\n    // function symbol() public view returns (string symbol);\r\n    // function tokenOfOwnerByIndex(address _owner, uint256 _index) external view returns (uint256 tokenId);\r\n    // function tokenMetadata(uint256 _tokenId) public view returns (string infoUrl);\r\n}\r\n\r\n// File: contracts/interfaces/PepeInterface.sol\r\n\r\ncontract PepeInterface is ERC721{\r\n    function cozyTime(uint256 _mother, uint256 _father, address _pepeReceiver) public returns (bool);\r\n    function getCozyAgain(uint256 _pepeId) public view returns(uint64);\r\n}\r\n\r\n// File: contracts/AuctionBase.sol\r\n\r\n// solhint-disable-next-line\r\npragma solidity ^0.4.24;\r\n\r\n\r\n\r\n\r\n\r\n/** @title AuctionBase */\r\ncontract AuctionBase is Beneficiary {\r\n    mapping(uint256 => PepeAuction) public auctions;//maps pepes to auctions\r\n    PepeInterface public pepeContract;\r\n    Affiliate public affiliateContract;\r\n    uint256 public fee = 37500; //in 1 10000th of a percent so 3.75% at the start\r\n    uint256 public constant FEE_DIVIDER = 1000000; //Perhaps needs better name?\r\n\r\n    struct PepeAuction {\r\n        address seller;\r\n        uint256 pepeId;\r\n        uint64 auctionBegin;\r\n        uint64 auctionEnd;\r\n        uint256 beginPrice;\r\n        uint256 endPrice;\r\n    }\r\n\r\n    event AuctionWon(uint256 indexed pepe, address indexed winner, address indexed seller);\r\n    event AuctionStarted(uint256 indexed pepe, address indexed seller);\r\n    event AuctionFinalized(uint256 indexed pepe, address indexed seller);\r\n\r\n    constructor(address _pepeContract, address _affiliateContract) public {\r\n        pepeContract = PepeInterface(_pepeContract);\r\n        affiliateContract = Affiliate(_affiliateContract);\r\n    }\r\n\r\n    /**\r\n     * @dev Return a pepe from a auction that has passed\r\n     * @param  _pepeId the id of the pepe to save\r\n     */\r\n    function savePepe(uint256 _pepeId) external {\r\n        // solhint-disable-next-line not-rely-on-time\r\n        require(auctions[_pepeId].auctionEnd < now);//auction must have ended\r\n        require(pepeContract.transfer(auctions[_pepeId].seller, _pepeId));//transfer pepe back to seller\r\n\r\n        emit AuctionFinalized(_pepeId, auctions[_pepeId].seller);\r\n\r\n        delete auctions[_pepeId];//delete auction\r\n    }\r\n\r\n    /**\r\n     * @dev change the fee on pepe sales. Can only be lowerred\r\n     * @param _fee The new fee to set. Must be lower than current fee\r\n     */\r\n    function changeFee(uint256 _fee) external onlyOwner {\r\n        require(_fee < fee);//fee can not be raised\r\n        fee = _fee;\r\n    }\r\n\r\n    /**\r\n     * @dev Start a auction\r\n     * @param  _pepeId Pepe to sell\r\n     * @param  _beginPrice Price at which the auction starts\r\n     * @param  _endPrice Ending price of the auction\r\n     * @param  _duration How long the auction should take\r\n     */\r\n    function startAuction(uint256 _pepeId, uint256 _beginPrice, uint256 _endPrice, uint64 _duration) public {\r\n        require(pepeContract.transferFrom(msg.sender, address(this), _pepeId));\r\n        // solhint-disable-next-line not-rely-on-time\r\n        require(now > auctions[_pepeId].auctionEnd);//can only start new auction if no other is active\r\n\r\n        PepeAuction memory auction;\r\n\r\n        auction.seller = msg.sender;\r\n        auction.pepeId = _pepeId;\r\n        // solhint-disable-next-line not-rely-on-time\r\n        auction.auctionBegin = uint64(now);\r\n        // solhint-disable-next-line not-rely-on-time\r\n        auction.auctionEnd = uint64(now) + _duration;\r\n        require(auction.auctionEnd > auction.auctionBegin);\r\n        auction.beginPrice = _beginPrice;\r\n        auction.endPrice = _endPrice;\r\n\r\n        auctions[_pepeId] = auction;\r\n\r\n        emit AuctionStarted(_pepeId, msg.sender);\r\n    }\r\n\r\n    /**\r\n     * @dev directly start a auction from the PepeBase contract\r\n     * @param  _pepeId Pepe to put on auction\r\n     * @param  _beginPrice Price at which the auction starts\r\n     * @param  _endPrice Ending price of the auction\r\n     * @param  _duration How long the auction should take\r\n     * @param  _seller The address selling the pepe\r\n     */\r\n    // solhint-disable-next-line max-line-length\r\n    function startAuctionDirect(uint256 _pepeId, uint256 _beginPrice, uint256 _endPrice, uint64 _duration, address _seller) public {\r\n        require(msg.sender == address(pepeContract)); //can only be called by pepeContract\r\n        //solhint-disable-next-line not-rely-on-time\r\n        require(now > auctions[_pepeId].auctionEnd);//can only start new auction if no other is active\r\n\r\n        PepeAuction memory auction;\r\n\r\n        auction.seller = _seller;\r\n        auction.pepeId = _pepeId;\r\n        // solhint-disable-next-line not-rely-on-time\r\n        auction.auctionBegin = uint64(now);\r\n        // solhint-disable-next-line not-rely-on-time\r\n        auction.auctionEnd = uint64(now) + _duration;\r\n        require(auction.auctionEnd > auction.auctionBegin);\r\n        auction.beginPrice = _beginPrice;\r\n        auction.endPrice = _endPrice;\r\n\r\n        auctions[_pepeId] = auction;\r\n\r\n        emit AuctionStarted(_pepeId, _seller);\r\n    }\r\n\r\n  /**\r\n   * @dev Calculate the current price of a auction\r\n   * @param  _pepeId the pepeID to calculate the current price for\r\n   * @return currentBid the current price for the auction\r\n   */\r\n    function calculateBid(uint256 _pepeId) public view returns(uint256 currentBid) {\r\n        PepeAuction storage auction = auctions[_pepeId];\r\n        // solhint-disable-next-line not-rely-on-time\r\n        uint256 timePassed = now - auctions[_pepeId].auctionBegin;\r\n\r\n        // If auction ended return auction end price.\r\n        // solhint-disable-next-line not-rely-on-time\r\n        if (now >= auction.auctionEnd) {\r\n            return auction.endPrice;\r\n        } else {\r\n            // Can be negative\r\n            int256 priceDifference = int256(auction.endPrice) - int256(auction.beginPrice);\r\n            // Always positive\r\n            int256 duration = int256(auction.auctionEnd) - int256(auction.auctionBegin);\r\n\r\n            // As already proven in practice by CryptoKitties:\r\n            //  timePassed -> 64 bits at most\r\n            //  priceDifference -> 128 bits at most\r\n            //  timePassed * priceDifference -> 64 + 128 bits at most\r\n            int256 priceChange = priceDifference * int256(timePassed) / duration;\r\n\r\n            // Will be positive, both operands are less than 256 bits\r\n            int256 price = int256(auction.beginPrice) + priceChange;\r\n\r\n            return uint256(price);\r\n        }\r\n    }\r\n\r\n  /**\r\n   * @dev collect the fees from the auction\r\n   */\r\n    function getFees() public {\r\n        beneficiary.transfer(address(this).balance);\r\n    }\r\n\r\n\r\n}\r\n\r\n// File: contracts/CozyTimeAuction.sol\r\n\r\n// solhint-disable-next-line\r\npragma solidity ^0.4.24;\r\n\r\n\r\n\r\n/** @title CozyTimeAuction */\r\ncontract CozyTimeAuction is AuctionBase {\r\n    // solhint-disable-next-line\r\n    constructor (address _pepeContract, address _affiliateContract) AuctionBase(_pepeContract, _affiliateContract) public {\r\n\r\n    }\r\n\r\n    /**\r\n     * @dev Start an auction\r\n     * @param  _pepeId The id of the pepe to start the auction for\r\n     * @param  _beginPrice Start price of the auction\r\n     * @param  _endPrice End price of the auction\r\n     * @param  _duration How long the auction should take\r\n     */\r\n    function startAuction(uint256 _pepeId, uint256 _beginPrice, uint256 _endPrice, uint64 _duration) public {\r\n        // solhint-disable-next-line not-rely-on-time\r\n        require(pepeContract.getCozyAgain(_pepeId) <= now);//need to have this extra check\r\n        super.startAuction(_pepeId, _beginPrice, _endPrice, _duration);\r\n    }\r\n\r\n    /**\r\n     * @dev Start a auction direclty from the PepeBase smartcontract\r\n     * @param  _pepeId The id of the pepe to start the auction for\r\n     * @param  _beginPrice Start price of the auction\r\n     * @param  _endPrice End price of the auction\r\n     * @param  _duration How long the auction should take\r\n     * @param  _seller The address of the seller\r\n     */\r\n    // solhint-disable-next-line max-line-length\r\n    function startAuctionDirect(uint256 _pepeId, uint256 _beginPrice, uint256 _endPrice, uint64 _duration, address _seller) public {\r\n        // solhint-disable-next-line not-rely-on-time\r\n        require(pepeContract.getCozyAgain(_pepeId) <= now);//need to have this extra check\r\n        super.startAuctionDirect(_pepeId, _beginPrice, _endPrice, _duration, _seller);\r\n    }\r\n\r\n    /**\r\n     * @dev Buy cozy right from the auction\r\n     * @param  _pepeId Pepe to cozy with\r\n     * @param  _cozyCandidate the pepe to cozy with\r\n     * @param  _candidateAsFather Is the _cozyCandidate father?\r\n     * @param  _pepeReceiver address receiving the pepe after cozy time\r\n     */\r\n    // solhint-disable-next-line max-line-length\r\n    function buyCozy(uint256 _pepeId, uint256 _cozyCandidate, bool _candidateAsFather, address _pepeReceiver) public payable {\r\n        require(address(pepeContract) == msg.sender); //caller needs to be the PepeBase contract\r\n\r\n        PepeAuction storage auction = auctions[_pepeId];\r\n        // solhint-disable-next-line not-rely-on-time\r\n        require(now < auction.auctionEnd);// auction must be still going\r\n\r\n        uint256 price = calculateBid(_pepeId);\r\n        require(msg.value >= price);//must send enough ether\r\n        uint256 totalFee = price * fee / FEE_DIVIDER; //safe math needed?\r\n\r\n        //Send ETH to seller\r\n        auction.seller.transfer(price - totalFee);\r\n        //send ETH to beneficiary\r\n\r\n        address affiliate = affiliateContract.userToAffiliate(_pepeReceiver);\r\n\r\n        //solhint-disable-next-line\r\n        if (affiliate != address(0) && affiliate.send(totalFee / 2)) { //if user has affiliate\r\n            //nothing just to suppress warning\r\n        }\r\n\r\n        //actual cozytiming\r\n        if (_candidateAsFather) {\r\n            if (!pepeContract.cozyTime(auction.pepeId, _cozyCandidate, _pepeReceiver)) {\r\n                revert();\r\n            }\r\n        } else {\r\n          // Swap around the two pepes, they have no set gender, the user decides what they are.\r\n            if (!pepeContract.cozyTime(_cozyCandidate, auction.pepeId, _pepeReceiver)) {\r\n                revert();\r\n            }\r\n        }\r\n\r\n        //Send pepe to seller of auction\r\n        if (!pepeContract.transfer(auction.seller, _pepeId)) {\r\n            revert(); //can't complete transfer if this fails\r\n        }\r\n\r\n        if (msg.value > price) { //return ether send to much\r\n            _pepeReceiver.transfer(msg.value - price);\r\n        }\r\n\r\n        emit AuctionWon(_pepeId, _pepeReceiver, auction.seller);//emit event\r\n\r\n        delete auctions[_pepeId];//deletes auction\r\n    }\r\n\r\n    /**\r\n     * @dev Buy cozytime and pass along affiliate\r\n     * @param  _pepeId Pepe to cozy with\r\n     * @param  _cozyCandidate the pepe to cozy with\r\n     * @param  _candidateAsFather Is the _cozyCandidate father?\r\n     * @param  _pepeReceiver address receiving the pepe after cozy time\r\n     * @param  _affiliate Affiliate address to set\r\n     */\r\n    //solhint-disable-next-line max-line-length\r\n    function buyCozyAffiliated(uint256 _pepeId, uint256 _cozyCandidate, bool _candidateAsFather, address _pepeReceiver, address _affiliate) public payable {\r\n        affiliateContract.setAffiliate(_pepeReceiver, _affiliate);\r\n        buyCozy(_pepeId, _cozyCandidate, _candidateAsFather, _pepeReceiver);\r\n    }\r\n}\r\n\r\n// File: contracts/Haltable.sol\r\n\r\n// solhint-disable-next-line\r\npragma solidity ^0.4.24;\r\n\r\n\r\n\r\ncontract Haltable is Ownable {\r\n    uint256 public haltTime; //when the contract was halted\r\n    bool public halted;//is the contract halted?\r\n    uint256 public haltDuration;\r\n    uint256 public maxHaltDuration = 8 weeks;//how long the contract can be halted\r\n\r\n    modifier stopWhenHalted {\r\n        require(!halted);\r\n        _;\r\n    }\r\n\r\n    modifier onlyWhenHalted {\r\n        require(halted);\r\n        _;\r\n    }\r\n\r\n    /**\r\n     * @dev Halt the contract for a set time smaller than maxHaltDuration\r\n     * @param  _duration Duration how long the contract should be halted. Must be smaller than maxHaltDuration\r\n     */\r\n    function halt(uint256 _duration) public onlyOwner {\r\n        require(haltTime == 0); //cannot halt if it was halted before\r\n        require(_duration <= maxHaltDuration);//cannot halt for longer than maxHaltDuration\r\n        haltDuration = _duration;\r\n        halted = true;\r\n        // solhint-disable-next-line not-rely-on-time\r\n        haltTime = now;\r\n    }\r\n\r\n    /**\r\n     * @dev Unhalt the contract. Can only be called by the owner or when the haltTime has passed\r\n     */\r\n    function unhalt() public {\r\n        // solhint-disable-next-line\r\n        require(now > haltTime + haltDuration || msg.sender == owner);//unhalting is only possible when haltTime has passed or the owner unhalts\r\n        halted = false;\r\n    }\r\n\r\n}\r\n\r\n// File: openzeppelin-solidity/contracts/math/SafeMath.sol\r\n\r\n/**\r\n * @title SafeMath\r\n * @dev Math operations with safety checks that throw on error\r\n */\r\nlibrary SafeMath {\r\n\r\n  /**\r\n  * @dev Multiplies two numbers, throws on overflow.\r\n  */\r\n  function mul(uint256 a, uint256 b) internal pure returns (uint256 c) {\r\n    // Gas optimization: this is cheaper than asserting 'a' not being zero, but the\r\n    // benefit is lost if 'b' is also tested.\r\n    // See: https://github.com/OpenZeppelin/openzeppelin-solidity/pull/522\r\n    if (a == 0) {\r\n      return 0;\r\n    }\r\n\r\n    c = a * b;\r\n    assert(c / a == b);\r\n    return c;\r\n  }\r\n\r\n  /**\r\n  * @dev Integer division of two numbers, truncating the quotient.\r\n  */\r\n  function div(uint256 a, uint256 b) internal pure returns (uint256) {\r\n    // assert(b > 0); // Solidity automatically throws when dividing by 0\r\n    // uint256 c = a / b;\r\n    // assert(a == b * c + a % b); // There is no case in which this doesn't hold\r\n    return a / b;\r\n  }\r\n\r\n  /**\r\n  * @dev Subtracts two numbers, throws on overflow (i.e. if subtrahend is greater than minuend).\r\n  */\r\n  function sub(uint256 a, uint256 b) internal pure returns (uint256) {\r\n    assert(b <= a);\r\n    return a - b;\r\n  }\r\n\r\n  /**\r\n  * @dev Adds two numbers, throws on overflow.\r\n  */\r\n  function add(uint256 a, uint256 b) internal pure returns (uint256 c) {\r\n    c = a + b;\r\n    assert(c >= a);\r\n    return c;\r\n  }\r\n}\r\n\r\n// File: contracts/interfaces/ERC721TokenReceiver.sol\r\n\r\n/// @dev Note: the ERC-165 identifier for this interface is 0xf0b9e5ba\r\ninterface ERC721TokenReceiver {\r\n    /// @notice Handle the receipt of an NFT\r\n    /// @dev The ERC721 smart contract calls this function on the recipient\r\n    ///  after a `transfer`. This function MAY throw to revert and reject the\r\n    ///  transfer. This function MUST use 50,000 gas or less. Return of other\r\n    ///  than the magic value MUST result in the transaction being reverted.\r\n    ///  Note: the contract address is always the message sender.\r\n    /// @param _from The sending address\r\n    /// @param _tokenId The NFT identifier which is being transfered\r\n    /// @param data Additional data with no specified format\r\n    /// @return `bytes4(keccak256(\"onERC721Received(address,uint256,bytes)\"))`\r\n    ///  unless throwing\r\n\tfunction onERC721Received(address _from, uint256 _tokenId, bytes data) external returns(bytes4);\r\n}\r\n\r\n// File: contracts/PepeBase.sol\r\n\r\n// solhint-disable-next-line\r\npragma solidity ^0.4.24;\r\n\r\n// solhint-disable func-order\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\ncontract PepeBase is Genetic, Ownable, Usernames, Haltable {\r\n\r\n    uint32[15] public cozyCoolDowns = [ //determined by generation / 2\r\n        uint32(1 minutes),\r\n        uint32(2 minutes),\r\n        uint32(5 minutes),\r\n        uint32(15 minutes),\r\n        uint32(30 minutes),\r\n        uint32(45 minutes),\r\n        uint32(1 hours),\r\n        uint32(2 hours),\r\n        uint32(4 hours),\r\n        uint32(8 hours),\r\n        uint32(16 hours),\r\n        uint32(1 days),\r\n        uint32(2 days),\r\n        uint32(4 days),\r\n        uint32(7 days)\r\n    ];\r\n\r\n    struct Pepe {\r\n        address master; //The master of the pepe\r\n        uint256[2] genotype; //all genes stored here\r\n        uint64 canCozyAgain; //time when pepe can have nice time again\r\n        uint64 generation; //what generation?\r\n        uint64 father; //father of this pepe\r\n        uint64 mother; //mommy of this pepe\r\n        uint8 coolDownIndex;\r\n    }\r\n\r\n    mapping(uint256 => bytes32) public pepeNames;\r\n\r\n    //stores all pepes\r\n    Pepe[] public pepes;\r\n\r\n    bool public implementsERC721 = true; //signal erc721 support\r\n\r\n    // solhint-disable-next-line const-name-snakecase\r\n    string public constant name = \"Crypto Pepe\";\r\n    // solhint-disable-next-line const-name-snakecase\r\n    string public constant symbol = \"CPEP\";\r\n\r\n    mapping(address => uint256[]) private wallets;\r\n    mapping(address => uint256) public balances; //amounts of pepes per address\r\n    mapping(uint256 => address) public approved; //pepe index to address approved to transfer\r\n    mapping(address => mapping(address => bool)) public approvedForAll;\r\n\r\n    uint256 public zeroGenPepes; //how many zero gen pepes are mined\r\n    uint256 public constant MAX_PREMINE = 100;//how many pepes can be premined\r\n    uint256 public constant MAX_ZERO_GEN_PEPES = 1100; //max number of zero gen pepes\r\n    address public miner; //address of the miner contract\r\n\r\n    modifier onlyPepeMaster(uint256 _pepeId) {\r\n        require(pepes[_pepeId].master == msg.sender);\r\n        _;\r\n    }\r\n\r\n    modifier onlyAllowed(uint256 _tokenId) {\r\n        // solhint-disable-next-line max-line-length\r\n        require(msg.sender == pepes[_tokenId].master || msg.sender == approved[_tokenId] || approvedForAll[pepes[_tokenId].master][msg.sender]); //check if msg.sender is allowed\r\n        _;\r\n    }\r\n\r\n    event PepeBorn(uint256 indexed mother, uint256 indexed father, uint256 indexed pepeId);\r\n    event PepeNamed(uint256 indexed pepeId);\r\n\r\n    constructor() public {\r\n\r\n        Pepe memory pepe0 = Pepe({\r\n            master: 0x0,\r\n            genotype: [uint256(0), uint256(0)],\r\n            canCozyAgain: 0,\r\n            father: 0,\r\n            mother: 0,\r\n            generation: 0,\r\n            coolDownIndex: 0\r\n        });\r\n\r\n        pepes.push(pepe0);\r\n    }\r\n\r\n    /**\r\n     * @dev Internal function that creates a new pepe\r\n     * @param  _genoType DNA of the new pepe\r\n     * @param  _mother The ID of the mother\r\n     * @param  _father The ID of the father\r\n     * @param  _generation The generation of the new Pepe\r\n     * @param  _master The owner of this new Pepe\r\n     * @return The ID of the newly generated Pepe\r\n     */\r\n    // solhint-disable-next-line max-line-length\r\n    function _newPepe(uint256[2] _genoType, uint64 _mother, uint64 _father, uint64 _generation, address _master) internal returns (uint256 pepeId) {\r\n        uint8 tempCoolDownIndex;\r\n\r\n        tempCoolDownIndex = uint8(_generation / 2);\r\n\r\n        if (_generation > 28) {\r\n            tempCoolDownIndex = 14;\r\n        }\r\n\r\n        Pepe memory _pepe = Pepe({\r\n            master: _master, //The master of the pepe\r\n            genotype: _genoType, //all genes stored here\r\n            canCozyAgain: 0, //time when pepe can have nice time again\r\n            father: _father, //father of this pepe\r\n            mother: _mother, //mommy of this pepe\r\n            generation: _generation, //what generation?\r\n            coolDownIndex: tempCoolDownIndex\r\n        });\r\n\r\n        if (_generation == 0) {\r\n            zeroGenPepes += 1; //count zero gen pepes\r\n        }\r\n\r\n        //push returns the new length, use it to get a new unique id\r\n        pepeId = pepes.push(_pepe) - 1;\r\n\r\n        //add it to the wallet of the master of the new pepe\r\n        addToWallet(_master, pepeId);\r\n\r\n        emit PepeBorn(_mother, _father, pepeId);\r\n        emit Transfer(address(0), _master, pepeId);\r\n\r\n        return pepeId;\r\n    }\r\n\r\n    /**\r\n     * @dev Set the miner contract. Can only be called once\r\n     * @param _miner Address of the miner contract\r\n     */\r\n    function setMiner(address _miner) public onlyOwner {\r\n        require(miner == address(0));//can only be set once\r\n        miner = _miner;\r\n    }\r\n\r\n    /**\r\n     * @dev Mine a new Pepe. Can only be called by the miner contract.\r\n     * @param  _seed Seed to be used for the generation of the DNA\r\n     * @param  _receiver Address receiving the newly mined Pepe\r\n     * @return The ID of the newly mined Pepe\r\n     */\r\n    function minePepe(uint256 _seed, address _receiver) public stopWhenHalted returns(uint256) {\r\n        require(msg.sender == miner);//only miner contract can call\r\n        require(zeroGenPepes < MAX_ZERO_GEN_PEPES);\r\n\r\n        return _newPepe(randomDNA(_seed), 0, 0, 0, _receiver);\r\n    }\r\n\r\n    /**\r\n     * @dev Premine pepes. Can only be called by the owner and is limited to MAX_PREMINE\r\n     * @param  _amount Amount of Pepes to premine\r\n     */\r\n    function pepePremine(uint256 _amount) public onlyOwner stopWhenHalted {\r\n        for (uint i = 0; i < _amount; i++) {\r\n            require(zeroGenPepes <= MAX_PREMINE);//can only generate set amount during premine\r\n            //create a new pepe\r\n            // 1) who's genes are based on hash of the timestamp and the number of pepes\r\n            // 2) who has no mother or father\r\n            // 3) who is generation zero\r\n            // 4) who's master is the manager\r\n\r\n            // solhint-disable-next-line\r\n            _newPepe(randomDNA(uint256(keccak256(abi.encodePacked(block.timestamp, pepes.length)))), 0, 0, 0, owner);\r\n\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @dev CozyTime two Pepes together\r\n     * @param  _mother The mother of the new Pepe\r\n     * @param  _father The father of the new Pepe\r\n     * @param  _pepeReceiver Address receiving the new Pepe\r\n     * @return If it was a success\r\n     */\r\n    function cozyTime(uint256 _mother, uint256 _father, address _pepeReceiver) external stopWhenHalted returns (bool) {\r\n        //cannot cozyTime with itself\r\n        require(_mother != _father);\r\n        //caller has to either be master or approved for mother\r\n        // solhint-disable-next-line max-line-length\r\n        require(pepes[_mother].master == msg.sender || approved[_mother] == msg.sender || approvedForAll[pepes[_mother].master][msg.sender]);\r\n        //caller has to either be master or approved for father\r\n        // solhint-disable-next-line max-line-length\r\n        require(pepes[_father].master == msg.sender || approved[_father] == msg.sender || approvedForAll[pepes[_father].master][msg.sender]);\r\n        //require both parents to be ready for cozytime\r\n        // solhint-disable-next-line not-rely-on-time\r\n        require(now > pepes[_mother].canCozyAgain && now > pepes[_father].canCozyAgain);\r\n        //require both mother parents not to be father\r\n        require(pepes[_mother].mother != _father && pepes[_mother].father != _father);\r\n        //require both father parents not to be mother\r\n        require(pepes[_father].mother != _mother && pepes[_father].father != _mother);\r\n\r\n        Pepe storage father = pepes[_father];\r\n        Pepe storage mother = pepes[_mother];\r\n\r\n\r\n        approved[_father] = address(0);\r\n        approved[_mother] = address(0);\r\n\r\n        uint256[2] memory newGenotype = breed(father.genotype, mother.genotype, pepes.length);\r\n\r\n        uint64 newGeneration;\r\n\r\n        newGeneration = mother.generation + 1;\r\n        if (newGeneration < father.generation + 1) { //if father generation is bigger\r\n            newGeneration = father.generation + 1;\r\n        }\r\n\r\n        _handleCoolDown(_mother);\r\n        _handleCoolDown(_father);\r\n\r\n        //sets pepe birth when mother is done\r\n        // solhint-disable-next-line max-line-length\r\n        pepes[_newPepe(newGenotype, uint64(_mother), uint64(_father), newGeneration, _pepeReceiver)].canCozyAgain = mother.canCozyAgain; //_pepeReceiver becomes the master of the pepe\r\n\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * @dev Internal function to increase the coolDownIndex\r\n     * @param _pepeId The id of the Pepe to update the coolDown of\r\n     */\r\n    function _handleCoolDown(uint256 _pepeId) internal {\r\n        Pepe storage tempPep = pepes[_pepeId];\r\n\r\n        // solhint-disable-next-line not-rely-on-time\r\n        tempPep.canCozyAgain = uint64(now + cozyCoolDowns[tempPep.coolDownIndex]);\r\n\r\n        if (tempPep.coolDownIndex < 14) {// after every cozy time pepe gets slower\r\n            tempPep.coolDownIndex++;\r\n        }\r\n\r\n    }\r\n\r\n    /**\r\n     * @dev Set the name of a Pepe. Can only be set once\r\n     * @param _pepeId ID of the pepe to name\r\n     * @param _name The name to assign\r\n     */\r\n    function setPepeName(uint256 _pepeId, bytes32 _name) public stopWhenHalted onlyPepeMaster(_pepeId) returns(bool) {\r\n        require(pepeNames[_pepeId] == 0x0000000000000000000000000000000000000000000000000000000000000000);\r\n        pepeNames[_pepeId] = _name;\r\n        emit PepeNamed(_pepeId);\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * @dev Transfer a Pepe to the auction contract and auction it\r\n     * @param  _pepeId ID of the Pepe to auction\r\n     * @param  _auction Auction contract address\r\n     * @param  _beginPrice Price the auction starts at\r\n     * @param  _endPrice Price the auction ends at\r\n     * @param  _duration How long the auction should run\r\n     */\r\n    // solhint-disable-next-line max-line-length\r\n    function transferAndAuction(uint256 _pepeId, address _auction, uint256 _beginPrice, uint256 _endPrice, uint64 _duration) public stopWhenHalted onlyPepeMaster(_pepeId) {\r\n        _transfer(msg.sender, _auction, _pepeId);//transfer pepe to auction\r\n        AuctionBase auction = AuctionBase(_auction);\r\n\r\n        auction.startAuctionDirect(_pepeId, _beginPrice, _endPrice, _duration, msg.sender);\r\n    }\r\n\r\n    /**\r\n     * @dev Approve and buy. Used to buy cozyTime in one call\r\n     * @param  _pepeId Pepe to cozy with\r\n     * @param  _auction Address of the auction contract\r\n     * @param  _cozyCandidate Pepe to approve and cozy with\r\n     * @param  _candidateAsFather Use the candidate as father or not\r\n     */\r\n    // solhint-disable-next-line max-line-length\r\n    function approveAndBuy(uint256 _pepeId, address _auction, uint256 _cozyCandidate, bool _candidateAsFather) public stopWhenHalted payable onlyPepeMaster(_cozyCandidate) {\r\n        approved[_cozyCandidate] = _auction;\r\n        // solhint-disable-next-line max-line-length\r\n        CozyTimeAuction(_auction).buyCozy.value(msg.value)(_pepeId, _cozyCandidate, _candidateAsFather, msg.sender); //breeding resets approval\r\n    }\r\n\r\n    /**\r\n     * @dev The same as above only pass an extra parameter\r\n     * @param  _pepeId Pepe to cozy with\r\n     * @param  _auction Address of the auction contract\r\n     * @param  _cozyCandidate Pepe to approve and cozy with\r\n     * @param  _candidateAsFather Use the candidate as father or not\r\n     * @param  _affiliate Address to set as affiliate\r\n     */\r\n    // solhint-disable-next-line max-line-length\r\n    function approveAndBuyAffiliated(uint256 _pepeId, address _auction, uint256 _cozyCandidate, bool _candidateAsFather, address _affiliate) public stopWhenHalted payable onlyPepeMaster(_cozyCandidate) {\r\n        approved[_cozyCandidate] = _auction;\r\n        // solhint-disable-next-line max-line-length\r\n        CozyTimeAuction(_auction).buyCozyAffiliated.value(msg.value)(_pepeId, _cozyCandidate, _candidateAsFather, msg.sender, _affiliate); //breeding resets approval\r\n    }\r\n\r\n    /**\r\n     * @dev get Pepe information\r\n     * @param  _pepeId ID of the Pepe to get information of\r\n     * @return master\r\n     * @return genotype\r\n     * @return canCozyAgain\r\n     * @return generation\r\n     * @return father\r\n     * @return mother\r\n     * @return pepeName\r\n     * @return coolDownIndex\r\n     */\r\n    // solhint-disable-next-line max-line-length\r\n    function getPepe(uint256 _pepeId) public view returns(address master, uint256[2] genotype, uint64 canCozyAgain, uint64 generation, uint256 father, uint256 mother, bytes32 pepeName, uint8 coolDownIndex) {\r\n        Pepe storage tempPep = pepes[_pepeId];\r\n\r\n        master = tempPep.master;\r\n        genotype = tempPep.genotype;\r\n        canCozyAgain = tempPep.canCozyAgain;\r\n        generation = tempPep.generation;\r\n        father = tempPep.father;\r\n        mother = tempPep.mother;\r\n        pepeName = pepeNames[_pepeId];\r\n        coolDownIndex = tempPep.coolDownIndex;\r\n    }\r\n\r\n    /**\r\n     * @dev Get the time when a pepe can cozy again\r\n     * @param  _pepeId ID of the pepe\r\n     * @return Time when the pepe can cozy again\r\n     */\r\n    function getCozyAgain(uint256 _pepeId) public view returns(uint64) {\r\n        return pepes[_pepeId].canCozyAgain;\r\n    }\r\n\r\n    /**\r\n     *  ERC721 Compatibility\r\n     *\r\n     */\r\n    event Approval(address indexed _owner, address indexed _approved, uint256 _tokenId);\r\n    event Transfer(address indexed _from, address indexed _to, uint256 indexed _tokenId);\r\n    event ApprovalForAll(address indexed _owner, address indexed _operator, bool _approved);\r\n\r\n    /**\r\n     * @dev Get the total number of Pepes\r\n     * @return total Returns the total number of pepes\r\n     */\r\n    function totalSupply() public view returns(uint256 total) {\r\n        total = pepes.length - balances[address(0)];\r\n        return total;\r\n    }\r\n\r\n    /**\r\n     * @dev Get the number of pepes owned by an address\r\n     * @param  _owner Address to get the balance from\r\n     * @return balance The number of pepes\r\n     */\r\n    function balanceOf(address _owner) external view returns (uint256 balance) {\r\n        balance = balances[_owner];\r\n    }\r\n\r\n    /**\r\n     * @dev Get the owner of a Pepe\r\n     * @param  _tokenId the token to get the owner of\r\n     * @return _owner the owner of the pepe\r\n     */\r\n    function ownerOf(uint256 _tokenId) external view returns (address _owner) {\r\n        _owner = pepes[_tokenId].master;\r\n    }\r\n\r\n    /**\r\n     * @dev Get the id of an token by its index\r\n     * @param _owner The address to look up the tokens of\r\n     * @param _index Index to look at\r\n     * @return tokenId the ID of the token of the owner at the specified index\r\n     */\r\n    function tokenOfOwnerByIndex(address _owner, uint256 _index) public constant returns (uint256 tokenId) {\r\n        //The index must be smaller than the balance,\r\n        // to guarantee that there is no leftover token returned.\r\n        require(_index < balances[_owner]);\r\n\r\n        return wallets[_owner][_index];\r\n    }\r\n\r\n    /**\r\n     * @dev Private method that ads a token to the wallet\r\n     * @param _owner Address of the owner\r\n     * @param _tokenId Pepe ID to add\r\n     */\r\n    function addToWallet(address _owner, uint256 _tokenId) private {\r\n        uint256[] storage wallet = wallets[_owner];\r\n        uint256 balance = balances[_owner];\r\n        if (balance < wallet.length) {\r\n            wallet[balance] = _tokenId;\r\n        } else {\r\n            wallet.push(_tokenId);\r\n        }\r\n        //increase owner balance\r\n        //overflow is not likely to happen(need very large amount of pepes)\r\n        balances[_owner] += 1;\r\n    }\r\n\r\n    /**\r\n     * @dev Remove a token from a address's wallet\r\n     * @param _owner Address of the owner\r\n     * @param _tokenId Token to remove from the wallet\r\n     */\r\n    function removeFromWallet(address _owner, uint256 _tokenId) private {\r\n        uint256[] storage wallet = wallets[_owner];\r\n        uint256 i = 0;\r\n        // solhint-disable-next-line no-empty-blocks\r\n        for (; wallet[i] != _tokenId; i++) {\r\n            // not the pepe we are looking for\r\n        }\r\n        if (wallet[i] == _tokenId) {\r\n            //found it!\r\n            uint256 last = balances[_owner] - 1;\r\n            if (last > 0) {\r\n                //move the last item to this spot, the last will become inaccessible\r\n                wallet[i] = wallet[last];\r\n            }\r\n            //else: no last item to move, the balance is 0, making everything inaccessible.\r\n\r\n            //only decrease balance if _tokenId was in the wallet\r\n            balances[_owner] -= 1;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @dev Internal transfer function\r\n     * @param _from Address sending the token\r\n     * @param _to Address to token is send to\r\n     * @param _tokenId ID of the token to send\r\n     */\r\n    function _transfer(address _from, address _to, uint256 _tokenId) internal {\r\n        pepes[_tokenId].master = _to;\r\n        approved[_tokenId] = address(0);//reset approved of pepe on every transfer\r\n\r\n        //remove the token from the _from wallet\r\n        removeFromWallet(_from, _tokenId);\r\n\r\n        //add the token to the _to wallet\r\n        addToWallet(_to, _tokenId);\r\n\r\n        emit Transfer(_from, _to, _tokenId);\r\n    }\r\n\r\n    /**\r\n     * @dev transfer a token. Can only be called by the owner of the token\r\n     * @param  _to Addres to send the token to\r\n     * @param  _tokenId ID of the token to send\r\n     */\r\n    // solhint-disable-next-line no-simple-event-func-name\r\n    function transfer(address _to, uint256 _tokenId) public stopWhenHalted\r\n        onlyPepeMaster(_tokenId) //check if msg.sender is the master of this pepe\r\n        returns(bool)\r\n    {\r\n        _transfer(msg.sender, _to, _tokenId);//after master modifier invoke internal transfer\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * @dev Approve a address to send a token\r\n     * @param _to Address to approve\r\n     * @param _tokenId Token to set approval for\r\n     */\r\n    function approve(address _to, uint256 _tokenId) external stopWhenHalted\r\n        onlyPepeMaster(_tokenId)\r\n    {\r\n        approved[_tokenId] = _to;\r\n        emit Approval(msg.sender, _to, _tokenId);\r\n    }\r\n\r\n    /**\r\n     * @dev Approve or revoke approval an address for al tokens of a user\r\n     * @param _operator Address to (un)approve\r\n     * @param _approved Approving or revoking indicator\r\n     */\r\n    function setApprovalForAll(address _operator, bool _approved) external stopWhenHalted {\r\n        if (_approved) {\r\n            approvedForAll[msg.sender][_operator] = true;\r\n        } else {\r\n            approvedForAll[msg.sender][_operator] = false;\r\n        }\r\n        emit ApprovalForAll(msg.sender, _operator, _approved);\r\n    }\r\n\r\n    /**\r\n     * @dev Get approved address for a token\r\n     * @param _tokenId Token ID to get the approved address for\r\n     * @return The address that is approved for this token\r\n     */\r\n    function getApproved(uint256 _tokenId) external view returns (address) {\r\n        return approved[_tokenId];\r\n    }\r\n\r\n    /**\r\n     * @dev Get if an operator is approved for all tokens of that owner\r\n     * @param _owner Owner to check the approval for\r\n     * @param _operator Operator to check approval for\r\n     * @return Boolean indicating if the operator is approved for that owner\r\n     */\r\n    function isApprovedForAll(address _owner, address _operator) external view returns (bool) {\r\n        return approvedForAll[_owner][_operator];\r\n    }\r\n\r\n    /**\r\n     * @dev Function to signal support for an interface\r\n     * @param interfaceID the ID of the interface to check for\r\n     * @return Boolean indicating support\r\n     */\r\n    function supportsInterface(bytes4 interfaceID) external pure returns (bool) {\r\n        if (interfaceID == 0x80ac58cd || interfaceID == 0x01ffc9a7) { //TODO: add more interfaces the contract supports\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * @dev Safe transferFrom function\r\n     * @param _from Address currently owning the token\r\n     * @param _to Address to send token to\r\n     * @param _tokenId ID of the token to send\r\n     */\r\n    function safeTransferFrom(address _from, address _to, uint256 _tokenId) external stopWhenHalted {\r\n        _safeTransferFromInternal(_from, _to, _tokenId, \"\");\r\n    }\r\n\r\n    /**\r\n     * @dev Safe transferFrom function with aditional data attribute\r\n     * @param _from Address currently owning the token\r\n     * @param _to Address to send token to\r\n     * @param _tokenId ID of the token to send\r\n     * @param _data Data to pass along call\r\n     */\r\n    // solhint-disable-next-line max-line-length\r\n    function safeTransferFrom(address _from, address _to, uint256 _tokenId, bytes _data) external stopWhenHalted {\r\n        _safeTransferFromInternal(_from, _to, _tokenId, _data);\r\n    }\r\n\r\n    /**\r\n     * @dev Internal Safe transferFrom function with aditional data attribute\r\n     * @param _from Address currently owning the token\r\n     * @param _to Address to send token to\r\n     * @param _tokenId ID of the token to send\r\n     * @param _data Data to pass along call\r\n     */\r\n    // solhint-disable-next-line max-line-length\r\n    function _safeTransferFromInternal(address _from, address _to, uint256 _tokenId, bytes _data) internal onlyAllowed(_tokenId) {\r\n        require(pepes[_tokenId].master == _from);//check if from is current owner\r\n        require(_to != address(0));//throw on zero address\r\n\r\n        _transfer(_from, _to, _tokenId); //transfer token\r\n\r\n        if (isContract(_to)) { //check if is contract\r\n            // solhint-disable-next-line max-line-length\r\n            require(ERC721TokenReceiver(_to).onERC721Received(_from, _tokenId, _data) == bytes4(keccak256(\"onERC721Received(address,uint256,bytes)\")));\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @dev TransferFrom function\r\n     * @param _from Address currently owning the token\r\n     * @param _to Address to send token to\r\n     * @param _tokenId ID of the token to send\r\n     * @return If it was successful\r\n     */\r\n    // solhint-disable-next-line max-line-length\r\n    function transferFrom(address _from, address _to, uint256 _tokenId) public stopWhenHalted onlyAllowed(_tokenId) returns(bool) {\r\n        require(pepes[_tokenId].master == _from);//check if _from is really the master.\r\n        require(_to != address(0));\r\n        _transfer(_from, _to, _tokenId);//handles event, balances and approval reset;\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * @dev Utility method to check if an address is a contract\r\n     * @param _address Address to check\r\n     * @return Boolean indicating if the address is a contract\r\n     */\r\n    function isContract(address _address) internal view returns (bool) {\r\n        uint size;\r\n        // solhint-disable-next-line no-inline-assembly\r\n        assembly { size := extcodesize(_address) }\r\n        return size > 0;\r\n    }\r\n\r\n}", "OptimizationUsed": "1", "ContractName": "PepeBase", "ByteCode": "0x6080604052600436106102505763ffffffff7c010000000000000000000000000000000000000000000000000000000060003504166301ffc9a7811461025557806306fdde031461028b578063081812fc14610315578063095ea7b3146103495780630b1714fd1461036f5780631051db341461039657806313aa48bf146103ab57806318160ddd146103e15780631977bd68146103f657806321a764301461040e578063228dff131461042357806323b872dd1461043e57806327e235e3146104685780632df1f1b6146104895780632e1a9ffe146104a15780632f745c591461053d578063349dc3291461056157806342842e0e146105765780634980e1be146105a0578063583c2e7b146105cb57806362bc63c4146105e05780636352211e146106155780636c88beeb1461062d57806370a0823114610645578063715018a61461066657806371e68cad1461067b57806373a01b75146106935780637d4061e6146106a857806382cf2116146106c05780638da5cb5b146106f757806395d89b411461070c5780639742ca46146107215780639d18e40514610742578063a22cb46514610769578063a9059cbb1461078f578063b3ecf7a6146107b3578063b88d4fde146107c8578063b9b8af0b14610801578063c29338cf14610816578063cb3e64fd1461083d578063d346658b14610852578063e23a778514610883578063e985e9c5146108a2578063edf53886146108c9578063ee66875a146108ea578063f2fde38b146108ff578063f73bda7214610920578063fb139a2114610935578063fb1fad501461099b575b600080fd5b34801561026157600080fd5b50610277600160e060020a0319600435166109b3565b604080519115158252519081900360200190f35b34801561029757600080fd5b506102a0610a2c565b6040805160208082528351818301528351919283929083019185019080838360005b838110156102da5781810151838201526020016102c2565b50505050905090810190601f1680156103075780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b34801561032157600080fd5b5061032d600435610a63565b60408051600160a060020a039092168252519081900360200190f35b34801561035557600080fd5b5061036d600160a060020a0360043516602435610a7e565b005b34801561037b57600080fd5b50610277600160a060020a0360043581169060243516610b2b565b3480156103a257600080fd5b50610277610b4b565b3480156103b757600080fd5b506103cf600435600160a060020a0360243516610b54565b60408051918252519081900360200190f35b3480156103ed57600080fd5b506103cf610bac565b34801561040257600080fd5b5061036d600435610bdf565b34801561041a57600080fd5b506103cf610cdb565b34801561042f57600080fd5b50610277600435602435610ce1565b34801561044a57600080fd5b50610277600160a060020a0360043581169060243516604435610d85565b34801561047457600080fd5b506103cf600160a060020a0360043516610eaa565b34801561049557600080fd5b506103cf600435610ebc565b3480156104ad57600080fd5b506104b9600435610ece565b60408051600160a060020a038a168152906020820190899080838360005b838110156104ef5781810151838201526020016104d7565b50505067ffffffffffffffff9a8b169390910192835250509590961660208601526040808601949094526060850192909252608084015260ff1660a0830152519081900360c0019350915050f35b34801561054957600080fd5b506103cf600160a060020a0360043516602435610fb1565b34801561056d57600080fd5b5061032d61100c565b34801561058257600080fd5b5061036d600160a060020a036004358116906024351660443561101b565b3480156105ac57600080fd5b506105b561104c565b6040805160ff9092168252519081900360200190f35b3480156105d757600080fd5b506103cf611051565b3480156105ec57600080fd5b506105f8600435611057565b6040805167ffffffffffffffff9092168252519081900360200190f35b34801561062157600080fd5b5061032d60043561108c565b34801561063957600080fd5b5061032d6004356110bd565b34801561065157600080fd5b506103cf600160a060020a03600435166110d8565b34801561067257600080fd5b5061036d6110f3565b34801561068757600080fd5b5061036d600435611152565b34801561069f57600080fd5b506103cf61120e565b3480156106b457600080fd5b5061032d600435611214565b3480156106cc57600080fd5b5061036d600435600160a060020a036024351660443560643567ffffffffffffffff6084351661122f565b34801561070357600080fd5b5061032d61132c565b34801561071857600080fd5b506102a061133b565b34801561072d57600080fd5b5061036d600160a060020a0360043516611372565b61036d600435600160a060020a0360243581169060443590606435151590608435166113c1565b34801561077557600080fd5b5061036d600160a060020a036004351660243515156114a5565b34801561079b57600080fd5b50610277600160a060020a0360043516602435611560565b3480156107bf57600080fd5b506103cf6115be565b3480156107d457600080fd5b5061036d600160a060020a03600480358216916024803590911691604435916064359081019101356115c4565b34801561080d57600080fd5b50610277611617565b34801561082257600080fd5b50610277600435602435600160a060020a0360443516611620565b34801561084957600080fd5b5061036d611af9565b34801561085e57600080fd5b5061086a600435611b2e565b6040805163ffffffff9092168252519081900360200190f35b61036d600435600160a060020a03602435166044356064351515611b5b565b3480156108ae57600080fd5b50610277600160a060020a0360043581169060243516611c55565b3480156108d557600080fd5b506103cf600160a060020a0360043516611c83565b3480156108f657600080fd5b506103cf611c95565b34801561090b57600080fd5b5061036d600160a060020a0360043516611c9b565b34801561092c57600080fd5b506103cf611cbe565b34801561094157600080fd5b5061094d600435611cc3565b60408051600160a060020a03909716875267ffffffffffffffff9586166020880152938516868501529184166060860152909216608084015260ff90911660a0830152519081900360c00190f35b3480156109a757600080fd5b5061036d600435611d40565b60007f80ac58cd00000000000000000000000000000000000000000000000000000000600160e060020a031983161480610a1657507f01ffc9a700000000000000000000000000000000000000000000000000000000600160e060020a03198316145b15610a2357506001610a27565b5060005b919050565b60408051808201909152600b81527f43727970746f2050657065000000000000000000000000000000000000000000602082015281565b6000908152600e6020526040902054600160a060020a031690565b60045460ff1615610a8e57600080fd5b600a80548291339183908110610aa057fe5b6000918252602090912060059091020154600160a060020a031614610ac457600080fd5b6000828152600e60209081526040918290208054600160a060020a031916600160a060020a03871690811790915582518581529251909233927f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b92592918290030190a3505050565b600f60209081526000928352604080842090915290825290205460ff1681565b600b5460ff1681565b60045460009060ff1615610b6757600080fd5b601154600160a060020a03163314610b7e57600080fd5b60105461044c11610b8e57600080fd5b610ba5610b9a84611d89565b600080600086611dd6565b9392505050565b60008052600d6020527f81955a0a11e65eac625c29e8882660bae4e165a75d72780094acae8ece9a29ee54600a54035b90565b60008054600160a060020a03163314610bf757600080fd5b60045460ff1615610c0757600080fd5b5060005b81811015610cd75760105460641015610c2357600080fd5b610cce610cb842600a8054905060405160200180838152602001828152602001925050506040516020818303038152906040526040518082805190602001908083835b60208310610c855780518252601f199092019160209182019101610c66565b5181516020939093036101000a600019018019909116921691909117905260405192018290039091209250611d89915050565b6000805481908190600160a060020a0316611dd6565b50600101610c0b565b5050565b60105481565b60045460009060ff1615610cf457600080fd5b600a80548491339183908110610d0657fe5b6000918252602090912060059091020154600160a060020a031614610d2a57600080fd5b60008481526009602052604090205415610d4357600080fd5b6000848152600960205260408082208590555185917f5a8858069902ead8e61944d06d7de6818a0dd09b668447431ac1501baa5e8ef891a25060019392505050565b60045460009060ff1615610d9857600080fd5b81600a81815481101515610da857fe5b6000918252602090912060059091020154600160a060020a0316331480610de557506000818152600e6020526040902054600160a060020a031633145b80610e375750600f6000600a83815481101515610dfe57fe5b60009182526020808320600590920290910154600160a060020a03168352828101939093526040918201812033825290925290205460ff165b1515610e4257600080fd5b84600160a060020a0316600a84815481101515610e5b57fe5b6000918252602090912060059091020154600160a060020a031614610e7f57600080fd5b600160a060020a0384161515610e9457600080fd5b610e9f85858561206c565b506001949350505050565b600d6020526000908152604090205481565b60096020526000908152604090205481565b6000610ed86127d9565b6000806000806000806000600a8a815481101515610ef257fe5b6000918252602090912060059091020180546040805180820191829052600160a060020a039092169b5091925090600183019060029082845b815481526020019060010190808311610f2b57505050600384015460009d8e5260096020526040909d20546004909401549b9d929c67ffffffffffffffff8082169d68010000000000000000830482169d50700100000000000000000000000000000000830482169c5060c060020a9092041699509397505060ff909216945092505050565b600160a060020a0382166000908152600d60205260408120548210610fd557600080fd5b600160a060020a0383166000908152600c60205260409020805483908110610ff957fe5b9060005260206000200154905092915050565b601154600160a060020a031681565b60045460ff161561102b57600080fd5b6110478383836020604051908101604052806000815250612117565b505050565b600581565b60065481565b6000600a8281548110151561106857fe5b600091825260209091206005909102016003015467ffffffffffffffff1692915050565b6000600a8281548110151561109d57fe5b6000918252602090912060059091020154600160a060020a031692915050565b600260205260009081526040902054600160a060020a031681565b600160a060020a03166000908152600d602052604090205490565b600054600160a060020a0316331461110a57600080fd5b60008054604051600160a060020a03909116917ff8df31144d9c2f0f6b59d69b8b98abd5459d07f2742c4df920b25aae33c6482091a260008054600160a060020a0319169055565b600081815260026020526040902054600160a060020a03161561117457600080fd5b33600090815260016020526040902054156111b457336000908152600160209081526040808320548352600290915290208054600160a060020a03191690555b33600081815260016020908152604080832085905584835260029091528082208054600160a060020a03191684179055518392917f43c1ac38b68f3a24742fba8f0826c9fcf340d41f123872fa3175164d117e25af91a350565b61044c81565b600e60205260009081526040902054600160a060020a031681565b60045460009060ff161561124257600080fd5b600a8054879133918390811061125457fe5b6000918252602090912060059091020154600160a060020a03161461127857600080fd5b61128333878961206c565b604080517fd024cd0200000000000000000000000000000000000000000000000000000000815260048101899052602481018790526044810186905267ffffffffffffffff851660648201523360848201529051879350600160a060020a0384169163d024cd029160a480830192600092919082900301818387803b15801561130b57600080fd5b505af115801561131f573d6000803e3d6000fd5b5050505050505050505050565b600054600160a060020a031681565b60408051808201909152600481527f4350455000000000000000000000000000000000000000000000000000000000602082015281565b600054600160a060020a0316331461138957600080fd5b601154600160a060020a03161561139f57600080fd5b60118054600160a060020a031916600160a060020a0392909216919091179055565b60045460ff16156113d157600080fd5b600a805484913391839081106113e357fe5b6000918252602090912060059091020154600160a060020a03161461140757600080fd5b6000848152600e60205260408082208054600160a060020a031916600160a060020a0389811691821790925582517fa6da467c000000000000000000000000000000000000000000000000000000008152600481018b905260248101899052871515604482015233606482015291861660848301529151919263a6da467c92349260a480820193929182900301818588803b15801561130b57600080fd5b60045460ff16156114b557600080fd5b80156114ee57336000908152600f60209081526040808320600160a060020a03861684529091529020805460ff1916600117905561151a565b336000908152600f60209081526040808320600160a060020a03861684529091529020805460ff191690555b6040805182151581529051600160a060020a0384169133917f17307eab39ab6107e8899845ad3d59bd9653f200f220920489ca2b5937696c319181900360200190a35050565b60045460009060ff161561157357600080fd5b600a8054839133918390811061158557fe5b6000918252602090912060059091020154600160a060020a0316146115a957600080fd5b6115b433858561206c565b5060019392505050565b60055481565b60045460ff16156115d457600080fd5b61161085858585858080601f01602080910402602001604051908101604052809392919081815260200183838082843750612117945050505050565b5050505050565b60045460ff1681565b600080600061162d6127d9565b60045460009060ff161561164057600080fd5b8787141561164d57600080fd5b600a80543391908a90811061165e57fe5b6000918252602090912060059091020154600160a060020a0316148061169a57506000888152600e6020526040902054600160a060020a031633145b806116ec5750600f6000600a8a8154811015156116b357fe5b60009182526020808320600590920290910154600160a060020a03168352828101939093526040918201812033825290925290205460ff165b15156116f757600080fd5b600a80543391908990811061170857fe5b6000918252602090912060059091020154600160a060020a0316148061174457506000878152600e6020526040902054600160a060020a031633145b806117965750600f6000600a8981548110151561175d57fe5b60009182526020808320600590920290910154600160a060020a03168352828101939093526040918201812033825290925290205460ff165b15156117a157600080fd5b600a8054899081106117af57fe5b600091825260209091206003600590920201015467ffffffffffffffff16421180156118055750600a8054889081106117e457fe5b600091825260209091206003600590920201015467ffffffffffffffff1642115b151561181057600080fd5b86600a8981548110151561182057fe5b600091825260209091206005909102016003015460c060020a900467ffffffffffffffff1614801590611893575086600a8981548110151561185e57fe5b6000918252602090912060059091020160030154700100000000000000000000000000000000900467ffffffffffffffff1614155b151561189e57600080fd5b87600a888154811015156118ae57fe5b600091825260209091206005909102016003015460c060020a900467ffffffffffffffff1614801590611921575087600a888154811015156118ec57fe5b6000918252602090912060059091020160030154700100000000000000000000000000000000900467ffffffffffffffff1614155b151561192c57600080fd5b600a80548890811061193a57fe5b90600052602060002090600502019350600a8881548110151561195957fe5b600091825260208083208a8452600e90915260408084208054600160a060020a03199081169091558c8552938190208054909416909355825180840193849052600592909202019450611a0291600187019060029082845b8154815260200190600101908083116119b1575050604080518082019182905293506001890192506002915082845b8154815260200190600101908083116119e0575050600a5492506123cd915050565b91508260030160089054906101000a900467ffffffffffffffff1660010190508360030160089054906101000a900467ffffffffffffffff1660010167ffffffffffffffff168167ffffffffffffffff161015611a795750600383015468010000000000000000900467ffffffffffffffff166001015b611a828861254e565b611a8b8761254e565b600383015467ffffffffffffffff16600a611aa9848b8b868c611dd6565b81548110611ab357fe5b906000526020600020906005020160030160006101000a81548167ffffffffffffffff021916908367ffffffffffffffff16021790555060019450505050509392505050565b60055460035401421180611b175750600054600160a060020a031633145b1515611b2257600080fd5b6004805460ff19169055565b600781600f8110611b3b57fe5b60089182820401919006600402915054906101000a900463ffffffff1681565b60045460ff1615611b6b57600080fd5b600a80548391339183908110611b7d57fe5b6000918252602090912060059091020154600160a060020a031614611ba157600080fd5b6000838152600e60205260408082208054600160a060020a031916600160a060020a03881690811790915581517fd3ce71df000000000000000000000000000000000000000000000000000000008152600481018990526024810187905285151560448201523360648201529151909263d3ce71df9234926084808301939282900301818588803b158015611c3557600080fd5b505af1158015611c49573d6000803e3d6000fd5b50505050505050505050565b600160a060020a039182166000908152600f6020908152604080832093909416825291909152205460ff1690565b60016020526000908152604090205481565b60035481565b600054600160a060020a03163314611cb257600080fd5b611cbb816125f5565b50565b606481565b600a805482908110611cd157fe5b6000918252602090912060059091020180546003820154600490920154600160a060020a03909116925067ffffffffffffffff80831692680100000000000000008104821692700100000000000000000000000000000000820483169260c060020a9092049091169060ff1686565b600054600160a060020a03163314611d5757600080fd5b60035415611d6457600080fd5b600654811115611d7357600080fd5b6005556004805460ff1916600117905542600355565b611d916127d9565b5060408051808201825260009283527f434f4c4c454354205045504553204f4e2043525950544f50455045532e494f2160209081529183208152918190209082015290565b600080611de16127f4565b600267ffffffffffffffff8616049150601c8567ffffffffffffffff161115611e0957600e91505b506040805160e081018252600160a060020a03851681526020810189905260009181019190915267ffffffffffffffff85811660608301819052878216608084015290881660a083015260ff831660c08301521515611e6c576010805460010190555b600a8054600180820180845560009390935283517fc65a7bb8d6351c1cf70c95a316cc6a92839c986682d98bc35f958f4883f9d2a860059093029283018054600160a060020a031916600160a060020a0390921691909117815560208501519193928592611efe917fc65a7bb8d6351c1cf70c95a316cc6a92839c986682d98bc35f958f4883f9d2a901906002612839565b5060408201516003820180546060850151608086015160a087015167ffffffffffffffff1990931667ffffffffffffffff958616176fffffffffffffffff0000000000000000191668010000000000000000928616929092029190911777ffffffffffffffff000000000000000000000000000000001916700100000000000000000000000000000000918516919091021777ffffffffffffffffffffffffffffffffffffffffffffffff1660c060020a939091169290920291909117905560c0909101516004909101805460ff191660ff909216919091179055039250611fe68484612665565b828667ffffffffffffffff168867ffffffffffffffff167f160403841b73fe58236181ab476e17f2836a5b4aa8a570d9f1baf4b6ed61a38a60405160405180910390a46040518390600160a060020a038616906000907fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef908290a4505095945050505050565b81600a8281548110151561207c57fe5b6000918252602080832060059092029091018054600160a060020a0394909416600160a060020a0319948516179055838252600e905260409020805490911690556120c783826126eb565b6120d18282612665565b8082600160a060020a031684600160a060020a03167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef60405160405180910390a4505050565b81600a8181548110151561212757fe5b6000918252602090912060059091020154600160a060020a031633148061216457506000818152600e6020526040902054600160a060020a031633145b806121b65750600f6000600a8381548110151561217d57fe5b60009182526020808320600590920290910154600160a060020a03168352828101939093526040918201812033825290925290205460ff165b15156121c157600080fd5b84600160a060020a0316600a848154811015156121da57fe5b6000918252602090912060059091020154600160a060020a0316146121fe57600080fd5b600160a060020a038416151561221357600080fd5b61221e85858561206c565b612227846127d1565b156116105760405180807f6f6e455243373231526563656976656428616464726573732c75696e7432353681526020017f2c62797465732900000000000000000000000000000000000000000000000000815250602701905060405180910390207bffffffffffffffffffffffffffffffffffffffffffffffffffffffff191684600160a060020a031663f0b9e5ba8786866040518463ffffffff167c01000000000000000000000000000000000000000000000000000000000281526004018084600160a060020a0316600160a060020a0316815260200183815260200180602001828103825283818151815260200191508051906020019080838360005b8381101561233f578181015183820152602001612327565b50505050905090810190601f16801561236c5780820380516001836020036101000a031916815260200191505b50945050505050602060405180830381600087803b15801561238d57600080fd5b505af11580156123a1573d6000803e3d6000fd5b505050506040513d60208110156123b757600080fd5b5051600160e060020a0319161461161057600080fd5b6123d56127d9565b604051905060408101604052816000524260205260406000206123fe565b60029190910a900490565b6124eb565b6000600184161515612413579091905b61241e6001856123f3565b9350600080607f86166124326007886123f3565b96508060015b600484106101008310161561248657959695600019908101600283900a9182011880891696909617959450607f8916925061247460078a6123f3565b98508282019150600184019350612438565b6001810319945086851686179550886000527f434f4c4c454354205045504553204f4e2043525950544f50455045532e494f21602052602460002060236003206022600220166021600120602060002016161680871896505050505050509392505050565b6020600182160260106002831602600483049250612510838289015184890151612403565b84526020821891506020811890508460005242196020526040600020925061253f838289015184890151612403565b60208501525050509392505050565b6000600a8281548110151561255f57fe5b60009182526020909120600590910201600481015490915060079060ff16600f811061258757fe5b60088104919091015460038301805467ffffffffffffffff1916600790931660049081026101000a90920463ffffffff16420167ffffffffffffffff1692909217909155810154600e60ff9091161015610cd757600401805460ff8082166001011660ff1990911617905550565b600160a060020a038116151561260a57600080fd5b60008054604051600160a060020a03808516939216917f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e091a360008054600160a060020a031916600160a060020a0392909216919091179055565b600160a060020a0382166000908152600c60209081526040808320600d9092529091205481548110156126b2578282828154811015156126a157fe5b6000918252602090912001556126c8565b8154600181018355600083815260209020018390555b505050600160a060020a03166000908152600d6020526040902080546001019055565b600160a060020a0382166000908152600c6020526040812090805b83838381548110151561271557fe5b906000526020600020015414151561273257600190910190612706565b83838381548110151561274157fe5b906000526020600020015414156116105750600160a060020a0384166000908152600d602052604081205460001901908111156127ac57828181548110151561278657fe5b9060005260206000200154838381548110151561279f57fe5b6000918252602090912001555b50505050600160a060020a03166000908152600d602052604090208054600019019055565b6000903b1190565b60408051808201825290600290829080388339509192915050565b60408051610100810190915260008152602081016128106127d9565b815260006020820181905260408201819052606082018190526080820181905260a09091015290565b8260028101928215612867579160200282015b8281111561286757825182559160200191906001019061284c565b50612873929150612877565b5090565b610bdc91905b80821115612873576000815560010161287d5600a165627a7a72305820824faa9a1a1c971be5f5b529149a59e462185c5aef8cde729b59ca67cbf5ff420029"}