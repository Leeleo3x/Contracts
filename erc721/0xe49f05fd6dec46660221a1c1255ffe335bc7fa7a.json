{"Runs": "200", "SwarmSource": "bzzr://b826cc64bf0f324f5437a365997ece823a0cb7f4b7cfe510bf693f5d7002a959", "ABI": "[{\"constant\":true,\"inputs\":[{\"name\":\"_interfaceId\",\"type\":\"bytes4\"}],\"name\":\"supportsInterface\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"name\",\"outputs\":[{\"name\":\"\",\"type\":\"string\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_tokenId\",\"type\":\"uint256\"}],\"name\":\"getApproved\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"countries\",\"outputs\":[{\"name\":\"id\",\"type\":\"uint8\"},{\"name\":\"plots\",\"type\":\"uint16\"},{\"name\":\"tax\",\"type\":\"uint16\"},{\"name\":\"taxModified\",\"type\":\"uint32\"},{\"name\":\"index\",\"type\":\"uint8\"},{\"name\":\"owner\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_approved\",\"type\":\"address\"},{\"name\":\"_tokenId\",\"type\":\"uint256\"}],\"name\":\"approve\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_tokenId\",\"type\":\"uint256\"}],\"name\":\"getTax\",\"outputs\":[{\"name\":\"\",\"type\":\"uint8\"},{\"name\":\"\",\"type\":\"uint8\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_tokenId\",\"type\":\"uint256\"},{\"name\":\"_value\",\"type\":\"uint256\"}],\"name\":\"calculateTaxValueFor\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"operator\",\"type\":\"address\"},{\"name\":\"role\",\"type\":\"uint256\"}],\"name\":\"addOperator\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"TOTAL_SUPPLY_MAX\",\"outputs\":[{\"name\":\"\",\"type\":\"uint8\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"totalSupply\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"InterfaceId_ERC165\",\"outputs\":[{\"name\":\"\",\"type\":\"bytes4\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_from\",\"type\":\"address\"},{\"name\":\"_to\",\"type\":\"address\"},{\"name\":\"_tokenId\",\"type\":\"uint256\"}],\"name\":\"transferFrom\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"features\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_owner\",\"type\":\"address\"},{\"name\":\"_index\",\"type\":\"uint256\"}],\"name\":\"tokenOfOwnerByIndex\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"decimals\",\"outputs\":[{\"name\":\"\",\"type\":\"uint8\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"TOKEN_VERSION\",\"outputs\":[{\"name\":\"\",\"type\":\"uint32\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"address\"},{\"name\":\"\",\"type\":\"address\"}],\"name\":\"approvedOperators\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_from\",\"type\":\"address\"},{\"name\":\"_to\",\"type\":\"address\"},{\"name\":\"_tokenId\",\"type\":\"uint256\"}],\"name\":\"safeTransferFrom\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"owner\",\"type\":\"address\"}],\"name\":\"getPackedCollection\",\"outputs\":[{\"name\":\"\",\"type\":\"uint40[]\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"address\"},{\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"collections\",\"outputs\":[{\"name\":\"\",\"type\":\"uint8\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"countryData\",\"outputs\":[{\"name\":\"\",\"type\":\"uint16\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_tokenId\",\"type\":\"uint256\"}],\"name\":\"exists\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_index\",\"type\":\"uint256\"}],\"name\":\"tokenByIndex\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"ROLE_TAX_MANAGER\",\"outputs\":[{\"name\":\"\",\"type\":\"uint32\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_tokenId\",\"type\":\"uint256\"}],\"name\":\"getNumberOfPlots\",\"outputs\":[{\"name\":\"\",\"type\":\"uint16\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_maxTaxChangeFreq\",\"type\":\"uint32\"}],\"name\":\"updateMaxTaxChangeFreq\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"approvals\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"allTokens\",\"outputs\":[{\"name\":\"\",\"type\":\"uint8\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_tokenId\",\"type\":\"uint256\"}],\"name\":\"ownerOf\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_tokenId\",\"type\":\"uint256\"}],\"name\":\"getTaxPacked\",\"outputs\":[{\"name\":\"\",\"type\":\"uint16\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"to\",\"type\":\"address\"},{\"name\":\"tokenId\",\"type\":\"uint8\"}],\"name\":\"mint\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"MAX_TAX_INV\",\"outputs\":[{\"name\":\"\",\"type\":\"uint8\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_owner\",\"type\":\"address\"}],\"name\":\"balanceOf\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"address\"}],\"name\":\"userRoles\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"operator\",\"type\":\"address\"},{\"name\":\"role\",\"type\":\"uint256\"}],\"name\":\"removeRole\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_tokenId\",\"type\":\"uint256\"}],\"name\":\"getTaxPercent\",\"outputs\":[{\"name\":\"\",\"type\":\"uint8\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"owner\",\"type\":\"address\"}],\"name\":\"getNumberOfPlotsByCountryOwner\",\"outputs\":[{\"name\":\"\",\"type\":\"uint32\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"operator\",\"type\":\"address\"},{\"name\":\"role\",\"type\":\"uint256\"}],\"name\":\"addRole\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"getNumberOfCountries\",\"outputs\":[{\"name\":\"\",\"type\":\"uint8\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"ROLE_TOKEN_CREATOR\",\"outputs\":[{\"name\":\"\",\"type\":\"uint32\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"FEATURE_TRANSFERS_ON_BEHALF\",\"outputs\":[{\"name\":\"\",\"type\":\"uint32\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"symbol\",\"outputs\":[{\"name\":\"\",\"type\":\"string\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"to\",\"type\":\"address\"},{\"name\":\"approved\",\"type\":\"bool\"}],\"name\":\"setApprovalForAll\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"to\",\"type\":\"address\"},{\"name\":\"_tokenId\",\"type\":\"uint256\"}],\"name\":\"transfer\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"operator\",\"type\":\"address\"}],\"name\":\"removeOperator\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"tokenMap\",\"outputs\":[{\"name\":\"\",\"type\":\"uint192\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_tokenId\",\"type\":\"uint256\"}],\"name\":\"revokeApproval\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_from\",\"type\":\"address\"},{\"name\":\"_to\",\"type\":\"address\"},{\"name\":\"_tokenId\",\"type\":\"uint256\"},{\"name\":\"_data\",\"type\":\"bytes\"}],\"name\":\"safeTransferFrom\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_tokenId\",\"type\":\"uint256\"}],\"name\":\"getPacked\",\"outputs\":[{\"name\":\"\",\"type\":\"uint32\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"FEATURE_TRANSFERS\",\"outputs\":[{\"name\":\"\",\"type\":\"uint32\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"DEFAULT_TAX_RATE\",\"outputs\":[{\"name\":\"\",\"type\":\"uint16\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_tokenId\",\"type\":\"uint256\"}],\"name\":\"tokenURI\",\"outputs\":[{\"name\":\"\",\"type\":\"string\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"mask\",\"type\":\"uint256\"}],\"name\":\"updateFeatures\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"FEATURE_ALLOW_TAX_UPDATE\",\"outputs\":[{\"name\":\"\",\"type\":\"uint32\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"owner\",\"type\":\"address\"}],\"name\":\"getCollection\",\"outputs\":[{\"name\":\"\",\"type\":\"uint8[]\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"maxTaxChangeFreq\",\"outputs\":[{\"name\":\"\",\"type\":\"uint32\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"getTotalNumberOfPlots\",\"outputs\":[{\"name\":\"\",\"type\":\"uint32\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_owner\",\"type\":\"address\"},{\"name\":\"_operator\",\"type\":\"address\"}],\"name\":\"isApprovedForAll\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_tokenId\",\"type\":\"uint256\"},{\"name\":\"nominator\",\"type\":\"uint8\"},{\"name\":\"denominator\",\"type\":\"uint8\"}],\"name\":\"updateTaxRate\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"name\":\"_countryData\",\"type\":\"uint16[]\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"_by\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"_to\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"_tokenId\",\"type\":\"uint8\"}],\"name\":\"Minted\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"_from\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"_to\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"_tokenId\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"_value\",\"type\":\"uint256\"}],\"name\":\"Transfer\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"_owner\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"_approved\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"_tokenId\",\"type\":\"uint256\"}],\"name\":\"Approval\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"_owner\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"_operator\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"_value\",\"type\":\"bool\"}],\"name\":\"ApprovalForAll\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"_owner\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"_tokenId\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"tax\",\"type\":\"uint16\"},{\"indexed\":false,\"name\":\"oldTax\",\"type\":\"uint16\"}],\"name\":\"TaxRateUpdated\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"_by\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"_requested\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"_actual\",\"type\":\"uint256\"}],\"name\":\"FeaturesUpdated\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"_by\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"_to\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"_role\",\"type\":\"uint256\"}],\"name\":\"RoleUpdated\",\"type\":\"event\"}]", "Library": "", "CompilerVersion": "v0.4.23+commit.124ca40d", "ConstructorArguments": "000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000be000000000000000000000000000000000000000000000000000000000000f5c80000000000000000000000000000000000000000000000000000000000008fa900000000000000000000000000000000000000000000000000000000000089bd000000000000000000000000000000000000000000000000000000000000890c0000000000000000000000000000000000000000000000000000000000007a870000000000000000000000000000000000000000000000000000000000006ead0000000000000000000000000000000000000000000000000000000000002f4c00000000000000000000000000000000000000000000000000000000000028010000000000000000000000000000000000000000000000000000000000002735000000000000000000000000000000000000000000000000000000000000224500000000000000000000000000000000000000000000000000000000000021bf0000000000000000000000000000000000000000000000000000000000001f2a0000000000000000000000000000000000000000000000000000000000001eee0000000000000000000000000000000000000000000000000000000000001c440000000000000000000000000000000000000000000000000000000000001b670000000000000000000000000000000000000000000000000000000000001ac9000000000000000000000000000000000000000000000000000000000000195100000000000000000000000000000000000000000000000000000000000017b60000000000000000000000000000000000000000000000000000000000001684000000000000000000000000000000000000000000000000000000000000127e0000000000000000000000000000000000000000000000000000000000001279000000000000000000000000000000000000000000000000000000000000123b00000000000000000000000000000000000000000000000000000000000011f000000000000000000000000000000000000000000000000000000000000011d7000000000000000000000000000000000000000000000000000000000000118d000000000000000000000000000000000000000000000000000000000000113b00000000000000000000000000000000000000000000000000000000000010380000000000000000000000000000000000000000000000000000000000000fce0000000000000000000000000000000000000000000000000000000000000ed40000000000000000000000000000000000000000000000000000000000000e690000000000000000000000000000000000000000000000000000000000000d990000000000000000000000000000000000000000000000000000000000000d4b0000000000000000000000000000000000000000000000000000000000000d1f0000000000000000000000000000000000000000000000000000000000000be00000000000000000000000000000000000000000000000000000000000000b910000000000000000000000000000000000000000000000000000000000000b890000000000000000000000000000000000000000000000000000000000000b3b0000000000000000000000000000000000000000000000000000000000000ae40000000000000000000000000000000000000000000000000000000000000ad400000000000000000000000000000000000000000000000000000000000009c300000000000000000000000000000000000000000000000000000000000009b80000000000000000000000000000000000000000000000000000000000000951000000000000000000000000000000000000000000000000000000000000092d00000000000000000000000000000000000000000000000000000000000008f700000000000000000000000000000000000000000000000000000000000008eb00000000000000000000000000000000000000000000000000000000000008af00000000000000000000000000000000000000000000000000000000000008a30000000000000000000000000000000000000000000000000000000000000872000000000000000000000000000000000000000000000000000000000000085a000000000000000000000000000000000000000000000000000000000000079900000000000000000000000000000000000000000000000000000000000007650000000000000000000000000000000000000000000000000000000000000743000000000000000000000000000000000000000000000000000000000000070600000000000000000000000000000000000000000000000000000000000006d700000000000000000000000000000000000000000000000000000000000006a900000000000000000000000000000000000000000000000000000000000006790000000000000000000000000000000000000000000000000000000000000670000000000000000000000000000000000000000000000000000000000000066d000000000000000000000000000000000000000000000000000000000000064a00000000000000000000000000000000000000000000000000000000000005da000000000000000000000000000000000000000000000000000000000000059f0000000000000000000000000000000000000000000000000000000000000570000000000000000000000000000000000000000000000000000000000000052300000000000000000000000000000000000000000000000000000000000004ec00000000000000000000000000000000000000000000000000000000000004d900000000000000000000000000000000000000000000000000000000000004bf00000000000000000000000000000000000000000000000000000000000004be00000000000000000000000000000000000000000000000000000000000004aa00000000000000000000000000000000000000000000000000000000000004a40000000000000000000000000000000000000000000000000000000000000480000000000000000000000000000000000000000000000000000000000000047400000000000000000000000000000000000000000000000000000000000004560000000000000000000000000000000000000000000000000000000000000451000000000000000000000000000000000000000000000000000000000000041400000000000000000000000000000000000000000000000000000000000003f200000000000000000000000000000000000000000000000000000000000003e000000000000000000000000000000000000000000000000000000000000003da000000000000000000000000000000000000000000000000000000000000038a0000000000000000000000000000000000000000000000000000000000000381000000000000000000000000000000000000000000000000000000000000037a000000000000000000000000000000000000000000000000000000000000036f000000000000000000000000000000000000000000000000000000000000036e0000000000000000000000000000000000000000000000000000000000000368000000000000000000000000000000000000000000000000000000000000031800000000000000000000000000000000000000000000000000000000000002fd00000000000000000000000000000000000000000000000000000000000002db00000000000000000000000000000000000000000000000000000000000002d300000000000000000000000000000000000000000000000000000000000002aa000000000000000000000000000000000000000000000000000000000000029b0000000000000000000000000000000000000000000000000000000000000289000000000000000000000000000000000000000000000000000000000000025b00000000000000000000000000000000000000000000000000000000000002590000000000000000000000000000000000000000000000000000000000000220000000000000000000000000000000000000000000000000000000000000021e000000000000000000000000000000000000000000000000000000000000020f00000000000000000000000000000000000000000000000000000000000001e600000000000000000000000000000000000000000000000000000000000001dd00000000000000000000000000000000000000000000000000000000000001bf00000000000000000000000000000000000000000000000000000000000001bc00000000000000000000000000000000000000000000000000000000000001b4000000000000000000000000000000000000000000000000000000000000019f000000000000000000000000000000000000000000000000000000000000019d000000000000000000000000000000000000000000000000000000000000019a000000000000000000000000000000000000000000000000000000000000019900000000000000000000000000000000000000000000000000000000000001950000000000000000000000000000000000000000000000000000000000000191000000000000000000000000000000000000000000000000000000000000017b000000000000000000000000000000000000000000000000000000000000016b0000000000000000000000000000000000000000000000000000000000000157000000000000000000000000000000000000000000000000000000000000015400000000000000000000000000000000000000000000000000000000000001500000000000000000000000000000000000000000000000000000000000000145000000000000000000000000000000000000000000000000000000000000013f0000000000000000000000000000000000000000000000000000000000000135000000000000000000000000000000000000000000000000000000000000013100000000000000000000000000000000000000000000000000000000000001220000000000000000000000000000000000000000000000000000000000000120000000000000000000000000000000000000000000000000000000000000010c0000000000000000000000000000000000000000000000000000000000000107000000000000000000000000000000000000000000000000000000000000010100000000000000000000000000000000000000000000000000000000000000f200000000000000000000000000000000000000000000000000000000000000f000000000000000000000000000000000000000000000000000000000000000ee00000000000000000000000000000000000000000000000000000000000000d100000000000000000000000000000000000000000000000000000000000000d000000000000000000000000000000000000000000000000000000000000000bc00000000000000000000000000000000000000000000000000000000000000bc00000000000000000000000000000000000000000000000000000000000000b400000000000000000000000000000000000000000000000000000000000000b300000000000000000000000000000000000000000000000000000000000000ad00000000000000000000000000000000000000000000000000000000000000a7000000000000000000000000000000000000000000000000000000000000009f000000000000000000000000000000000000000000000000000000000000009d000000000000000000000000000000000000000000000000000000000000009800000000000000000000000000000000000000000000000000000000000000850000000000000000000000000000000000000000000000000000000000000085000000000000000000000000000000000000000000000000000000000000007d00000000000000000000000000000000000000000000000000000000000000780000000000000000000000000000000000000000000000000000000000000070000000000000000000000000000000000000000000000000000000000000006e000000000000000000000000000000000000000000000000000000000000006a000000000000000000000000000000000000000000000000000000000000006900000000000000000000000000000000000000000000000000000000000000670000000000000000000000000000000000000000000000000000000000000067000000000000000000000000000000000000000000000000000000000000006600000000000000000000000000000000000000000000000000000000000000630000000000000000000000000000000000000000000000000000000000000061000000000000000000000000000000000000000000000000000000000000005d00000000000000000000000000000000000000000000000000000000000000550000000000000000000000000000000000000000000000000000000000000051000000000000000000000000000000000000000000000000000000000000004d000000000000000000000000000000000000000000000000000000000000004b000000000000000000000000000000000000000000000000000000000000004300000000000000000000000000000000000000000000000000000000000000420000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000003700000000000000000000000000000000000000000000000000000000000000330000000000000000000000000000000000000000000000000000000000000033000000000000000000000000000000000000000000000000000000000000002d000000000000000000000000000000000000000000000000000000000000002a000000000000000000000000000000000000000000000000000000000000002a00000000000000000000000000000000000000000000000000000000000000280000000000000000000000000000000000000000000000000000000000000026000000000000000000000000000000000000000000000000000000000000002200000000000000000000000000000000000000000000000000000000000000150000000000000000000000000000000000000000000000000000000000000013000000000000000000000000000000000000000000000000000000000000000f000000000000000000000000000000000000000000000000000000000000000b000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000050000000000000000000000000000000000000000000000000000000000000005000000000000000000000000000000000000000000000000000000000000000500000000000000000000000000000000000000000000000000000000000000050000000000000000000000000000000000000000000000000000000000000005000000000000000000000000000000000000000000000000000000000000000500000000000000000000000000000000000000000000000000000000000000050000000000000000000000000000000000000000000000000000000000000005000000000000000000000000000000000000000000000000000000000000000500000000000000000000000000000000000000000000000000000000000000050000000000000000000000000000000000000000000000000000000000000005000000000000000000000000000000000000000000000000000000000000000500000000000000000000000000000000000000000000000000000000000000050000000000000000000000000000000000000000000000000000000000000005000000000000000000000000000000000000000000000000000000000000000500000000000000000000000000000000000000000000000000000000000000050000000000000000000000000000000000000000000000000000000000000005000000000000000000000000000000000000000000000000000000000000000500000000000000000000000000000000000000000000000000000000000000050000000000000000000000000000000000000000000000000000000000000005", "SourceCode": "pragma solidity 0.4.23;\r\n\r\n\r\n/**\r\n * Utility library of inline functions on addresses\r\n */\r\nlibrary AddressUtils {\r\n\r\n  /**\r\n   * @notice Checks if the target address is a contract\r\n   * @dev This function will return false if invoked during the constructor of a contract,\r\n   *      as the code is not actually created until after the constructor finishes.\r\n   * @param addr address to check\r\n   * @return whether the target address is a contract\r\n   */\r\n  function isContract(address addr) internal view returns (bool) {\r\n    // a variable to load `extcodesize` to\r\n    uint256 size = 0;\r\n\r\n    // XXX Currently there is no better way to check if there is a contract in an address\r\n    // than to check the size of the code at that address.\r\n    // See https://ethereum.stackexchange.com/a/14016/36603 for more details about how this works.\r\n    // TODO: Check this again before the Serenity release, because all addresses will be contracts.\r\n    // solium-disable-next-line security/no-inline-assembly\r\n    assembly {\r\n      // retrieve the size of the code at address `addr`\r\n      size := extcodesize(addr)\r\n    }\r\n\r\n    // positive size indicates a smart contract address\r\n    return size > 0;\r\n  }\r\n\r\n}\r\n\r\n\r\n/**\r\n * Library for working with strings, primarily converting\r\n * between strings and integer types\r\n */\r\nlibrary StringUtils {\r\n  /**\r\n   * @dev Converts a string to unsigned integer using the specified `base`\r\n   * @dev Throws on invalid input\r\n   *      (wrong characters for a given `base`)\r\n   * @dev Throws if given `base` is not supported\r\n   * @param a string to convert\r\n   * @param base number base, one of 2, 8, 10, 16\r\n   * @return a number representing given string\r\n   */\r\n  function atoi(string a, uint8 base) internal pure returns (uint256 i) {\r\n    // check if the base is valid\r\n    require(base == 2 || base == 8 || base == 10 || base == 16);\r\n\r\n    // convert string into bytes for convenient iteration\r\n    bytes memory buf = bytes(a);\r\n\r\n    // iterate over the string (bytes buffer)\r\n    for(uint256 p = 0; p < buf.length; p++) {\r\n      // extract the digit\r\n      uint8 digit = uint8(buf[p]) - 0x30;\r\n\r\n      // if digit is greater then 10 \u2013 mind the gap\r\n      // see `itoa` function for more details\r\n      if(digit > 10) {\r\n        // remove the gap\r\n        digit -= 7;\r\n      }\r\n\r\n      // check if digit meets the base\r\n      require(digit < base);\r\n\r\n      // move to the next digit slot\r\n      i *= base;\r\n\r\n      // add digit to the result\r\n      i += digit;\r\n    }\r\n\r\n    // return the result\r\n    return i;\r\n  }\r\n\r\n  /**\r\n   * @dev Converts a integer to a string using the specified `base`\r\n   * @dev Throws if given `base` is not supported\r\n   * @param i integer to convert\r\n   * @param base number base, one of 2, 8, 10, 16\r\n   * @return a string representing given integer\r\n   */\r\n  function itoa(uint256 i, uint8 base) internal pure returns (string a) {\r\n    // check if the base is valid\r\n    require(base == 2 || base == 8 || base == 10 || base == 16);\r\n\r\n    // for zero input the result is \"0\" string for any base\r\n    if (i == 0) {\r\n      return \"0\";\r\n    }\r\n\r\n    // bytes buffer to put ASCII characters into\r\n    bytes memory buf = new bytes(256);\r\n\r\n    // position within a buffer to be used in cycle\r\n    uint256 p = 0;\r\n\r\n    // extract digits one by one in a cycle\r\n    while (i > 0) {\r\n      // extract current digit\r\n      uint8 digit = uint8(i % base);\r\n\r\n      // convert it to an ASCII code\r\n      // 0x20 is \" \"\r\n      // 0x30-0x39 is \"0\"-\"9\"\r\n      // 0x41-0x5A is \"A\"-\"Z\"\r\n      // 0x61-0x7A is \"a\"-\"z\" (\"A\"-\"Z\" XOR \" \")\r\n      uint8 ascii = digit + 0x30;\r\n\r\n      // if digit is greater then 10,\r\n      // fix the 0x3A-0x40 gap of punctuation marks\r\n      // (7 characters in ASCII table)\r\n      if(digit > 10) {\r\n        // jump through the gap\r\n        ascii += 7;\r\n      }\r\n\r\n      // write character into the buffer\r\n      buf[p++] = byte(ascii);\r\n\r\n      // move to the next digit\r\n      i /= base;\r\n    }\r\n\r\n    // `p` contains real length of the buffer now, save it\r\n    uint256 length = p;\r\n\r\n    // reverse the buffer\r\n    for(p = 0; p < length / 2; p++) {\r\n      // swap elements at position `p` from the beginning and end using XOR:\r\n      // https://en.wikipedia.org/wiki/XOR_swap_algorithm\r\n      buf[p] ^= buf[length - 1 - p];\r\n      buf[length - 1 - p] ^= buf[p];\r\n      buf[p] ^= buf[length - 1 - p];\r\n    }\r\n\r\n    // construct string and return\r\n    return string(buf);\r\n  }\r\n\r\n  /**\r\n   * @dev Concatenates two strings `s1` and `s2`, for example, if\r\n   *      `s1` == `foo` and `s2` == `bar`, the result `s` == `foobar`\r\n   * @param s1 first string\r\n   * @param s2 second string\r\n   * @return concatenation result s1 + s2\r\n   */\r\n  function concat(string s1, string s2) internal pure returns (string s) {\r\n    // convert s1 into buffer 1\r\n    bytes memory buf1 = bytes(s1);\r\n    // convert s2 into buffer 2\r\n    bytes memory buf2 = bytes(s2);\r\n    // create a buffer for concatenation result\r\n    bytes memory buf = new bytes(buf1.length + buf2.length);\r\n\r\n    // copy buffer 1 into buffer\r\n    for(uint256 i = 0; i < buf1.length; i++) {\r\n      buf[i] = buf1[i];\r\n    }\r\n\r\n    // copy buffer 2 into buffer\r\n    for(uint256 j = buf1.length; j < buf2.length; j++) {\r\n      buf[j] = buf2[j - buf1.length];\r\n    }\r\n\r\n    // construct string and return\r\n    return string(buf);\r\n  }\r\n}\r\n\r\n\r\n/**\r\n * @dev Access control module provides an API to check\r\n *      if specific operation is permitted globally and\r\n *      if particular user's has a permission to execute it\r\n */\r\ncontract AccessControl {\r\n  /// @notice Role manager is responsible for assigning the roles\r\n  /// @dev Role ROLE_ROLE_MANAGER allows executing addOperator/removeOperator\r\n  uint256 private constant ROLE_ROLE_MANAGER = 0x10000000;\r\n\r\n  /// @notice Feature manager is responsible for enabling/disabling\r\n  ///      global features of the smart contract\r\n  /// @dev Role ROLE_FEATURE_MANAGER allows enabling/disabling global features\r\n  uint256 private constant ROLE_FEATURE_MANAGER = 0x20000000;\r\n\r\n  /// @dev Bitmask representing all the possible permissions (super admin role)\r\n  uint256 private constant FULL_PRIVILEGES_MASK = 0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF;\r\n\r\n  /// @dev A bitmask of globally enabled features\r\n  uint256 public features;\r\n\r\n  /// @notice Privileged addresses with defined roles/permissions\r\n  /// @notice In the context of ERC20/ERC721 tokens these can be permissions to\r\n  ///      allow minting tokens, transferring on behalf and so on\r\n  /// @dev Maps an address to the permissions bitmask (role), where each bit\r\n  ///      represents a permission\r\n  /// @dev Bitmask 0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF\r\n  ///      represents all possible permissions\r\n  mapping(address => uint256) public userRoles;\r\n\r\n  /// @dev Fired in updateFeatures()\r\n  event FeaturesUpdated(address indexed _by, uint256 _requested, uint256 _actual);\r\n\r\n  /// @dev Fired in addOperator(), removeOperator(), addRole(), removeRole()\r\n  event RoleUpdated(address indexed _by, address indexed _to, uint256 _role);\r\n\r\n  /**\r\n   * @dev Creates an access controlled instance\r\n   */\r\n  constructor() public {\r\n    // contract creator has full privileges\r\n    userRoles[msg.sender] = FULL_PRIVILEGES_MASK;\r\n  }\r\n\r\n  /**\r\n   * @dev Updates set of the globally enabled features (`f`),\r\n   *      taking into account sender's permissions.\r\n   * @dev Requires sender to have `ROLE_FEATURE_MANAGER` permission.\r\n   * @param mask bitmask representing a set of features to enable/disable\r\n   */\r\n  function updateFeatures(uint256 mask) public {\r\n    // call sender nicely - caller\r\n    address caller = msg.sender;\r\n    // read caller's permissions\r\n    uint256 p = userRoles[caller];\r\n\r\n    // caller should have a permission to update global features\r\n    require(__hasRole(p, ROLE_FEATURE_MANAGER));\r\n\r\n    // taking into account caller's permissions,\r\n    // 1) enable features requested\r\n    features |= p & mask;\r\n    // 2) disable features requested\r\n    features &= FULL_PRIVILEGES_MASK ^ (p & (FULL_PRIVILEGES_MASK ^ mask));\r\n\r\n    // fire an event\r\n    emit FeaturesUpdated(caller, mask, features);\r\n  }\r\n\r\n  /**\r\n   * @dev Adds a new `operator` - an address which has\r\n   *      some extended privileges over the smart contract,\r\n   *      for example token minting, transferring on behalf, etc.\r\n   * @dev Newly added `operator` cannot have any permissions which\r\n   *      transaction sender doesn't have.\r\n   * @dev Requires transaction sender to have `ROLE_ROLE_MANAGER` permission.\r\n   * @dev Cannot update existing operator. Throws if `operator` already exists.\r\n   * @param operator address of the operator to add\r\n   * @param role bitmask representing a set of permissions which\r\n   *      newly created operator will have\r\n   */\r\n  function addOperator(address operator, uint256 role) public {\r\n    // call sender gracefully - `manager`\r\n    address manager = msg.sender;\r\n\r\n    // read manager's permissions (role)\r\n    uint256 permissions = userRoles[manager];\r\n\r\n    // check that `operator` doesn't exist\r\n    require(userRoles[operator] == 0);\r\n\r\n    // manager must have a ROLE_ROLE_MANAGER role\r\n    require(__hasRole(permissions, ROLE_ROLE_MANAGER));\r\n\r\n    // recalculate permissions (role) to set:\r\n    // we cannot create an operator more powerful then calling `manager`\r\n    uint256 r = role & permissions;\r\n\r\n    // check if we still have some permissions (role) to set\r\n    require(r != 0);\r\n\r\n    // create an operator by persisting his permissions (roles) to storage\r\n    userRoles[operator] = r;\r\n\r\n    // fire an event\r\n    emit RoleUpdated(manager, operator, userRoles[operator]);\r\n  }\r\n\r\n  /**\r\n   * @dev Deletes an existing `operator`.\r\n   * @dev Requires sender to have `ROLE_ROLE_MANAGER` permission.\r\n   * @param operator address of the operator to delete\r\n   */\r\n  function removeOperator(address operator) public {\r\n    // call sender gracefully - `manager`\r\n    address manager = msg.sender;\r\n\r\n    // check if an `operator` exists\r\n    require(userRoles[operator] != 0);\r\n\r\n    // do not allow transaction sender to remove himself\r\n    // protects from an accidental removal of all the operators\r\n    require(operator != manager);\r\n\r\n    // manager must have a ROLE_ROLE_MANAGER role\r\n    // and he must have all the permissions operator has\r\n    require(__hasRole(userRoles[manager], ROLE_ROLE_MANAGER | userRoles[operator]));\r\n\r\n    // perform operator deletion\r\n    delete userRoles[operator];\r\n\r\n    // fire an event\r\n    emit RoleUpdated(manager, operator, 0);\r\n  }\r\n\r\n  /**\r\n   * @dev Updates an existing `operator`, adding a specified role to it.\r\n   * @dev Note that `operator` cannot receive permission which\r\n   *      transaction sender doesn't have.\r\n   * @dev Requires transaction sender to have `ROLE_ROLE_MANAGER` permission.\r\n   * @dev Cannot create a new operator. Throws if `operator` doesn't exist.\r\n   * @dev Existing permissions of the `operator` are preserved\r\n   * @param operator address of the operator to update\r\n   * @param role bitmask representing a set of permissions which\r\n   *      `operator` will have\r\n   */\r\n  function addRole(address operator, uint256 role) public {\r\n    // call sender gracefully - `manager`\r\n    address manager = msg.sender;\r\n\r\n    // read manager's permissions (role)\r\n    uint256 permissions = userRoles[manager];\r\n\r\n    // check that `operator` exists\r\n    require(userRoles[operator] != 0);\r\n\r\n    // manager must have a ROLE_ROLE_MANAGER role\r\n    require(__hasRole(permissions, ROLE_ROLE_MANAGER));\r\n\r\n    // recalculate permissions (role) to add:\r\n    // we cannot make an operator more powerful then calling `manager`\r\n    uint256 r = role & permissions;\r\n\r\n    // check if we still have some permissions (role) to add\r\n    require(r != 0);\r\n\r\n    // update operator's permissions (roles) in the storage\r\n    userRoles[operator] |= r;\r\n\r\n    // fire an event\r\n    emit RoleUpdated(manager, operator, userRoles[operator]);\r\n  }\r\n\r\n  /**\r\n   * @dev Updates an existing `operator`, removing a specified role from it.\r\n   * @dev Note that  permissions which transaction sender doesn't have\r\n   *      cannot be removed.\r\n   * @dev Requires transaction sender to have `ROLE_ROLE_MANAGER` permission.\r\n   * @dev Cannot remove all permissions. Throws on such an attempt.\r\n   * @param operator address of the operator to update\r\n   * @param role bitmask representing a set of permissions which\r\n   *      will be removed from the `operator`\r\n   */\r\n  function removeRole(address operator, uint256 role) public {\r\n    // call sender gracefully - `manager`\r\n    address manager = msg.sender;\r\n\r\n    // read manager's permissions (role)\r\n    uint256 permissions = userRoles[manager];\r\n\r\n    // check that we're not removing all the `operator`s permissions\r\n    // this is not really required and just causes inconveniences is function use\r\n    //require(userRoles[operator] ^ role != 0);\r\n\r\n    // manager must have a ROLE_ROLE_MANAGER role\r\n    require(__hasRole(permissions, ROLE_ROLE_MANAGER));\r\n\r\n    // recalculate permissions (role) to remove:\r\n    // we cannot revoke permissions which calling `manager` doesn't have\r\n    uint256 r = role & permissions;\r\n\r\n    // check if we still have some permissions (role) to revoke\r\n    require(r != 0);\r\n\r\n    // update operator's permissions (roles) in the storage\r\n    userRoles[operator] &= FULL_PRIVILEGES_MASK ^ r;\r\n\r\n    // fire an event\r\n    emit RoleUpdated(manager, operator, userRoles[operator]);\r\n  }\r\n\r\n  /// @dev Checks if requested feature is enabled globally on the contract\r\n  function __isFeatureEnabled(uint256 featureRequired) internal constant returns(bool) {\r\n    // delegate call to `__hasRole`\r\n    return __hasRole(features, featureRequired);\r\n  }\r\n\r\n  /// @dev Checks if transaction sender `msg.sender` has all the required permissions `roleRequired`\r\n  function __isSenderInRole(uint256 roleRequired) internal constant returns(bool) {\r\n    // read sender's permissions (role)\r\n    uint256 userRole = userRoles[msg.sender];\r\n\r\n    // delegate call to `__hasRole`\r\n    return __hasRole(userRole, roleRequired);\r\n  }\r\n\r\n  /// @dev Checks if user role `userRole` contain all the permissions required `roleRequired`\r\n  function __hasRole(uint256 userRole, uint256 roleRequired) internal pure returns(bool) {\r\n    // check the bitmask for the role required and return the result\r\n    return userRole & roleRequired == roleRequired;\r\n  }\r\n}\r\n\r\n\r\n/**\r\n * @title ERC721 token receiver interface\r\n * @dev Interface for any contract that wants to support safe transfers\r\n *      from ERC721 asset contracts.\r\n * @dev See https://github.com/ethereum/EIPs/blob/master/EIPS/eip-721.md\r\n */\r\ninterface ERC721Receiver {\r\n  /**\r\n   * @notice Handle the receipt of an NFT\r\n   * @dev The ERC721 smart contract calls this function on the recipient after a `transfer`.\r\n   *      This function MAY throw to revert and reject the transfer.\r\n   *      Return of other than the magic value MUST result in the transaction being reverted.\r\n   * @notice The contract address is always the message sender.\r\n   *      A wallet/broker/auction application MUST implement the wallet interface\r\n   *      if it will accept safe transfers.\r\n   * @param _operator The address which called `safeTransferFrom` function\r\n   * @param _from The address which previously owned the token\r\n   * @param _tokenId The NFT identifier which is being transferred\r\n   * @param _data Additional data with no specified format\r\n   * @return `bytes4(keccak256(\"onERC721Received(address,address,uint256,bytes)\"))` unless throwing\r\n   */\r\n  function onERC721Received(address _operator, address _from, uint256 _tokenId, bytes _data) external returns(bytes4);\r\n}\r\n\r\n\r\n/**\r\n * @title ERC165\r\n * @dev https://github.com/ethereum/EIPs/blob/master/EIPS/eip-165.md\r\n */\r\ncontract ERC165 {\r\n  /**\r\n   * 0x01ffc9a7 == bytes4(keccak256('supportsInterface(bytes4)'))\r\n   */\r\n  bytes4 public constant InterfaceId_ERC165 = 0x01ffc9a7;\r\n\r\n  /**\r\n   * @dev a mapping of interface id to whether or not it's supported\r\n   */\r\n  mapping(bytes4 => bool) internal supportedInterfaces;\r\n\r\n  /**\r\n   * @dev A contract implementing SupportsInterfaceWithLookup\r\n   * implement ERC165 itself\r\n   */\r\n  constructor() public {\r\n    // register itself in a lookup table\r\n    _registerInterface(InterfaceId_ERC165);\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * @notice Query if a contract implements an interface\r\n   * @dev Interface identification is specified in ERC-165.\r\n   *      This function uses less than 30,000 gas.\r\n   * @param _interfaceId The interface identifier, as specified in ERC-165\r\n   * @return `true` if the contract implements `interfaceID` and\r\n   *      `interfaceID` is not 0xffffffff, `false` otherwise\r\n   */\r\n  function supportsInterface(bytes4 _interfaceId) public constant returns (bool) {\r\n    // find if interface is supported using a lookup table\r\n    return supportedInterfaces[_interfaceId];\r\n  }\r\n\r\n  /**\r\n   * @dev private method for registering an interface\r\n   */\r\n  function _registerInterface(bytes4 _interfaceId) internal {\r\n    require(_interfaceId != 0xffffffff);\r\n    supportedInterfaces[_interfaceId] = true;\r\n  }\r\n}\r\n\r\n\r\n/**\r\n * @notice Library for working with fractions.\r\n * @notice A fraction is represented by two numbers - nominator and denominator.\r\n * @dev A fraction is represented as uint16,\r\n *      higher 8 bits representing nominator\r\n *      and lower 8 bits representing denominator\r\n */\r\nlibrary Fractions16 {\r\n  /**\r\n   * @dev Creates proper fraction with nominator < denominator\r\n   * @dev Throws if nominator is equal or greater then denominator\r\n   * @dev Throws if denominator is zero\r\n   * @param n fraction nominator\r\n   * @param d fraction denominator\r\n   * @return fraction with nominator and denominator specified\r\n   */\r\n  function createProperFraction16(uint8 n, uint8 d) internal pure returns (uint16) {\r\n    // denominator cannot be zero by the definition of division\r\n    require(d != 0);\r\n\r\n    // fraction has to be proper\r\n    require(n < d);\r\n\r\n    // construct fraction and return\r\n    return uint16(n) << 8 | d;\r\n  }\r\n\r\n  /**\r\n   * @dev Converts a proper fraction to its percent representation,\r\n   *      rounding down the value. For example,\r\n   *        toPercent(1/10) is 10,\r\n   *        toPercent(37/100) is 37,\r\n   *        toPercent(37/1000) is 3\r\n   *        toPercent(19/37) is 51\r\n   * @dev Supports proper fractions and 'one' (nominator equal to denominator),\r\n   *      which is equal to 100%\r\n   * @dev Throws if nominator is bigger than denominator\r\n   * @param f positive proper fraction\r\n   * @return a value in a range [0..100]\r\n   */\r\n  function toPercent(uint16 f) internal pure returns(uint8) {\r\n    // extract nominator and denominator\r\n    uint8 nominator = getNominator(f);\r\n    uint8 denominator = getDenominator(f);\r\n\r\n    // for a fraction representing one just return 100%\r\n    if(nominator == denominator) {\r\n      // one is 100%\r\n      return 100;\r\n    }\r\n\r\n    // next section of code is for proper fractions only\r\n    require(nominator < denominator);\r\n\r\n    // since fraction is proper one it safe to perform straight forward calculation\r\n    // the only thing to worry - possible arithmetic overflow\r\n    return uint8(100 * uint16(nominator) / denominator);\r\n  }\r\n\r\n  /**\r\n   * @dev Checks if a fraction represents zero (nominator is zero)\r\n   * @param f a fraction\r\n   * @return true if fraction is zero (nominator is zero), false otherwise\r\n   */\r\n  function isZero(uint16 f) internal pure returns(bool) {\r\n    // just check if the nominator is zero\r\n    return getNominator(f) == 0;\r\n  }\r\n\r\n  /**\r\n   * @dev Checks if a fraction represents one (nominator is equal to denominator)\r\n   * @param f a fraction\r\n   * @return true if fraction is one (nominator is equal to denominator), false otherwise\r\n   */\r\n  function isOne(uint16 f) internal pure returns(bool) {\r\n    // just check if the nominator is equal to denominator\r\n    return getNominator(f) == getDenominator(f);\r\n  }\r\n\r\n  /**\r\n   * @dev Checks if a fraction is proper (nominator is less than denominator)\r\n   * @param f a fraction\r\n   * @return true if fraction is proper (nominator is less than denominator), false otherwise\r\n   */\r\n  function isProper(uint16 f) internal pure returns(bool) {\r\n    // just check that nominator is less than denominator\r\n    // this automatically ensures denominator is not zero\r\n    return getNominator(f) < getDenominator(f);\r\n  }\r\n\r\n  /**\r\n   * @dev Extracts fraction nominator\r\n   * @param f a fraction\r\n   * @return nominator\r\n   */\r\n  function getNominator(uint16 f) internal pure returns(uint8) {\r\n    return uint8(f >> 8);\r\n  }\r\n\r\n  /**\r\n   * @dev Extracts fraction denominator\r\n   * @param f a fraction\r\n   * @return denominator\r\n   */\r\n  function getDenominator(uint16 f) internal pure returns(uint8) {\r\n    return uint8(f);\r\n  }\r\n\r\n  /**\r\n   * @dev Multiplies a proper fraction by integer, the resulting integer is rounded down\r\n   * @param f a fraction\r\n   * @param by an integer to multiply fraction by\r\n   * @return result of multiplication `f * by`\r\n   */\r\n  function multiplyByInteger(uint16 f, uint256 by) internal pure returns(uint256) {\r\n    // extract nominator and denominator\r\n    uint8 nominator = getNominator(f);\r\n    uint8 denominator = getDenominator(f);\r\n\r\n    // for a fraction representing one just return `by`\r\n    if(nominator == denominator) {\r\n      // the result of multiplication by one is the value itself\r\n      return by;\r\n    }\r\n\r\n    // next section of code is for proper fractions only\r\n    require(nominator < denominator);\r\n\r\n    // for values small enough multiplication is straight forward\r\n    if(by == uint240(by)) {\r\n      // ensure the maximum precision of calculation\r\n      return by * nominator / denominator;\r\n    }\r\n\r\n    // for big values we perform division first, loosing the precision\r\n    return by / denominator * nominator;\r\n  }\r\n}\r\n\r\n\r\n/**\r\n * @notice Country is unique tradable entity. Non-fungible.\r\n * @dev A country is an ERC721 non-fungible token, which maps Token ID,\r\n *      a 8 bit number in range [1, 192] to a set of country properties -\r\n *      number of plots and owner's tax rate.\r\n * @dev Country token supports only minting of predefined countries,\r\n *      its not possible to destroy a country.\r\n * @dev Up to 192 countries are defined during contract deployment and initialization.\r\n */\r\ncontract CountryERC721 is AccessControl, ERC165 {\r\n  /// @dev Using library Fractions for fraction math\r\n  using Fractions16 for uint16;\r\n\r\n  /// @dev Smart contract version\r\n  /// @dev Should be incremented manually in this source code\r\n  ///      each time smart contact source code is changed\r\n  uint32 public constant TOKEN_VERSION = 0x1;\r\n\r\n  /// @dev ERC20 compliant token symbol\r\n  string public constant symbol = \"CTY\";\r\n  /// @dev ERC20 compliant token name\r\n  string public constant name = \"Country \u2013 CryptoMiner World\";\r\n  /// @dev ERC20 compliant token decimals\r\n  /// @dev this can be only zero, since ERC721 token is non-fungible\r\n  uint8 public constant decimals = 0;\r\n\r\n  /// @dev Country data structure\r\n  /// @dev Occupies 1 storage slot (240 bits)\r\n  struct Country {\r\n    /// @dev Unique country ID \u2208 [1, 192]\r\n    uint8 id;\r\n\r\n    /// @dev Number of land plots country has,\r\n    ///      proportional to the country area\r\n    uint16 plots;\r\n\r\n    /// @dev Percentage country owner receives from each sale\r\n    uint16 tax;\r\n\r\n    /// @dev Tax modified time - unix timestamp\r\n    uint32 taxModified;\r\n\r\n    /// @dev Country index within an owner's collection of countries\r\n    uint8 index;\r\n\r\n    /// @dev Country owner, initialized upon country creation\r\n    address owner;\r\n  }\r\n\r\n  /// @dev Country data array contains number of plots each country contains\r\n  uint16[] public countryData;\r\n\r\n  /// @notice All the existing countries\r\n  /// @dev Core of the Country as ERC721 token\r\n  /// @dev Maps Country ID => Country Data Structure\r\n  mapping(uint256 => Country) public countries;\r\n\r\n  /// @dev Mapping from a token ID to an address approved to\r\n  ///      transfer ownership rights for this token\r\n  mapping(uint256 => address) public approvals;\r\n\r\n  /// @dev Mapping from owner to operator approvals\r\n  ///      token owner => approved token operator => is approved\r\n  mapping(address => mapping(address => bool)) public approvedOperators;\r\n\r\n  /// @notice Storage for a collections of tokens\r\n  /// @notice A collection of tokens is an unordered list of token IDs,\r\n  ///      owned by a particular address (owner)\r\n  /// @dev A mapping from owner to a collection of his tokens (IDs)\r\n  /// @dev ERC20 compliant structure for balances can be derived\r\n  ///      as a length of each collection in the mapping\r\n  /// @dev ERC20 balances[owner] is equal to collections[owner].length\r\n  mapping(address => uint8[]) public collections;\r\n\r\n  /// @dev Array with all token ids, used for enumeration\r\n  /// @dev ERC20 compliant structure for totalSupply can be derived\r\n  ///      as a length of this collection\r\n  /// @dev ERC20 totalSupply() is equal to allTokens.length\r\n  uint8[] public allTokens;\r\n\r\n  /// @dev Total number of countries this smart contract holds\r\n  uint8 private _totalSupply;\r\n\r\n  /// @dev Token bitmap \u2013 bitmap of 192 elements indicating existing (minted) tokens\r\n  /// @dev For any i \u2208 [0, 191] - tokenMap[i] (which is tokenMap >> i & 0x1)\r\n  ///      is equal to one if token with ID i exists and to zero if it doesn't\r\n  uint192 public tokenMap;\r\n\r\n  /// @notice The maximum frequency at which tax rate for a token can be changed\r\n  /// @dev Tax rate cannot be changed more frequently than once per `MAX_TAX_CHANGE_FREQ` seconds\r\n  uint32 public maxTaxChangeFreq = 86400; // seconds\r\n\r\n  /// @dev Maximum tokens allowed should comply with the `tokenMap` type\r\n  /// @dev This setting is used only in contract constructor, actual\r\n  ///      maximum supply is defined by `countryData` array length\r\n  uint8 public constant TOTAL_SUPPLY_MAX = 192;\r\n\r\n  /// @notice Maximum tax rate that can be set on the country\r\n  /// @dev This is an inverted value of the maximum tax:\r\n  ///      `MAX_TAX_RATE = 1 / MAX_TAX_INV`\r\n  uint8 public constant MAX_TAX_INV = 5; // 1/5 or 20%\r\n\r\n  /// @notice Default tax rate that is assigned to each country\r\n  /// @dev This tax rate is set on each country when minting its token\r\n  uint16 public constant DEFAULT_TAX_RATE = 0x010A; // 1/10 or 10%\r\n\r\n  /// @dev Enables ERC721 transfers of the tokens\r\n  uint32 public constant FEATURE_TRANSFERS = 0x00000001;\r\n\r\n  /// @dev Enables ERC721 transfers on behalf\r\n  uint32 public constant FEATURE_TRANSFERS_ON_BEHALF = 0x00000002;\r\n\r\n  /// @dev Allows owners to update tax value\r\n  uint32 public constant FEATURE_ALLOW_TAX_UPDATE = 0x00000004;\r\n\r\n  /// @notice Tax manager is responsible for updating maximum\r\n  ///     allowed frequency of tax rate change\r\n  /// @dev Role ROLE_TAX_MANAGER allows updating `maxTaxChangeFreq`\r\n  uint32 public constant ROLE_TAX_MANAGER = 0x00020000;\r\n\r\n  /// @notice Token creator is responsible for creating tokens\r\n  /// @dev Role ROLE_TOKEN_CREATOR allows minting tokens\r\n  uint32 public constant ROLE_TOKEN_CREATOR = 0x00040000;\r\n\r\n  /// @dev Magic value to be returned upon successful reception of an NFT\r\n  /// @dev Equal to `bytes4(keccak256(\"onERC721Received(address,address,uint256,bytes)\"))`,\r\n  ///      which can be also obtained as `ERC721Receiver(0).onERC721Received.selector`\r\n  bytes4 private constant ERC721_RECEIVED = 0x150b7a02;\r\n\r\n  /**\r\n   * Supported interfaces section\r\n   */\r\n\r\n  /**\r\n   * ERC721 interface definition in terms of ERC165\r\n   *\r\n   * 0x80ac58cd ==\r\n   *   bytes4(keccak256('balanceOf(address)')) ^\r\n   *   bytes4(keccak256('ownerOf(uint256)')) ^\r\n   *   bytes4(keccak256('approve(address,uint256)')) ^\r\n   *   bytes4(keccak256('getApproved(uint256)')) ^\r\n   *   bytes4(keccak256('setApprovalForAll(address,bool)')) ^\r\n   *   bytes4(keccak256('isApprovedForAll(address,address)')) ^\r\n   *   bytes4(keccak256('transferFrom(address,address,uint256)')) ^\r\n   *   bytes4(keccak256('safeTransferFrom(address,address,uint256)')) ^\r\n   *   bytes4(keccak256('safeTransferFrom(address,address,uint256,bytes)'))\r\n   */\r\n  bytes4 private constant InterfaceId_ERC721 = 0x80ac58cd;\r\n\r\n  /**\r\n   * ERC721 interface extension \u2013 exists(uint256)\r\n   *\r\n   * 0x4f558e79 == bytes4(keccak256('exists(uint256)'))\r\n   */\r\n  bytes4 private constant InterfaceId_ERC721Exists = 0x4f558e79;\r\n\r\n  /**\r\n   * ERC721 interface extension - ERC721Enumerable\r\n   *\r\n   * 0x780e9d63 ==\r\n   *   bytes4(keccak256('totalSupply()')) ^\r\n   *   bytes4(keccak256('tokenOfOwnerByIndex(address,uint256)')) ^\r\n   *   bytes4(keccak256('tokenByIndex(uint256)'))\r\n   */\r\n  bytes4 private constant InterfaceId_ERC721Enumerable = 0x780e9d63;\r\n\r\n  /**\r\n   * ERC721 interface extension - ERC721Metadata\r\n   *\r\n   * 0x5b5e139f ==\r\n   *   bytes4(keccak256('name()')) ^\r\n   *   bytes4(keccak256('symbol()')) ^\r\n   *   bytes4(keccak256('tokenURI(uint256)'))\r\n   */\r\n  bytes4 private constant InterfaceId_ERC721Metadata = 0x5b5e139f;\r\n\r\n  /// @dev Event names are self-explanatory:\r\n  /// @dev Fired in mint()\r\n  /// @dev Address `_by` allows to track who created a token\r\n  event Minted(address indexed _by, address indexed _to, uint8 indexed _tokenId);\r\n\r\n  /// @dev Fired in transfer(), transferFor(), mint()\r\n  /// @dev When minting a token, address `_from` is zero\r\n  /// @dev ERC20/ERC721 compliant event\r\n  event Transfer(address indexed _from, address indexed _to, uint256 indexed _tokenId, uint256 _value);\r\n\r\n  /// @dev Fired in approve()\r\n  /// @dev ERC721 compliant event\r\n  event Approval(address indexed _owner, address indexed _approved, uint256 indexed _tokenId);\r\n\r\n  /// @dev Fired in setApprovalForAll()\r\n  /// @dev ERC721 compliant event\r\n  event ApprovalForAll(address indexed _owner, address indexed _operator, bool _value);\r\n\r\n  /// @dev Fired in updateTaxRate()\r\n  event TaxRateUpdated(address indexed _owner, uint256 indexed _tokenId, uint16 tax, uint16 oldTax);\r\n\r\n  /**\r\n   * @dev Creates a Country ERC721 instance,\r\n   * @dev Registers a ERC721 interface using ERC165\r\n   * @dev Initializes the contract with the country data provided\r\n   * @param _countryData array of packed data structures containing\r\n   *        number of plots for each country\r\n   */\r\n  constructor(uint16[] _countryData) public {\r\n    // register the supported interfaces to conform to ERC721 via ERC165\r\n    _registerInterface(InterfaceId_ERC721);\r\n    _registerInterface(InterfaceId_ERC721Exists);\r\n    _registerInterface(InterfaceId_ERC721Enumerable);\r\n    _registerInterface(InterfaceId_ERC721Metadata);\r\n\r\n    // maximum of 192 countries allowed\r\n    require(_countryData.length <= TOTAL_SUPPLY_MAX);\r\n\r\n    // init country data array\r\n    countryData = _countryData;\r\n  }\r\n\r\n  /**\r\n   * @notice Number of countries this contract can have\r\n   * @dev Maximum number of tokens that contract can mint\r\n   * @return length of country data array\r\n   */\r\n  function getNumberOfCountries() public constant returns(uint8) {\r\n    // read country data array length and return\r\n    return uint8(countryData.length);\r\n  }\r\n\r\n  /**\r\n   * @dev Calculates cumulative number of plots all the countries have in total\r\n   * @return sum of the countries number of plots\r\n   */\r\n  function getTotalNumberOfPlots() public constant returns(uint32) {\r\n    // variable to accumulate result into\r\n    uint32 result = 0;\r\n\r\n    // iterate over all the tokens and accumulate the result\r\n    for(uint i = 0; i < countryData.length; i++) {\r\n      // accumulate the result\r\n      result += countryData[i];\r\n    }\r\n\r\n    // return the result\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * @dev Calculates cumulative number of plots\r\n   *      all the countries belonging to given owner have in total\r\n   * @param owner address of the owner to query countries for\r\n   * @return sum of the countries number of plots owned by given address\r\n   */\r\n  function getNumberOfPlotsByCountryOwner(address owner) public constant returns(uint32) {\r\n    // variable to accumulate result into\r\n    uint32 result = 0;\r\n\r\n    // iterate over all owner's tokens and accumulate the result\r\n    for(uint i = 0; i < collections[owner].length; i++) {\r\n      // accumulate the result\r\n      result += countries[collections[owner][i]].plots;\r\n    }\r\n\r\n    // return the result\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * @dev Gets a country by ID, representing it as a single 32-bit integer.\r\n   *      The integer is tightly packed with the country data:\r\n   *        number of plots\r\n   *        tax nominator\r\n   *        tax denominator\r\n   * @dev Throws if country doesn't exist\r\n   * @param _tokenId ID of the country to fetch\r\n   * @return country as 32-bit unsigned integer\r\n   */\r\n  function getPacked(uint256 _tokenId) public constant returns(uint32) {\r\n    // validate country existence\r\n    require(exists(_tokenId));\r\n\r\n    // load country from storage\r\n    Country memory country = countries[_tokenId];\r\n\r\n    // pack the data and return\r\n    return uint32(country.plots) << 16 | country.tax;\r\n  }\r\n\r\n  /**\r\n   * @notice Retrieves a collection of tokens owned by a particular address\r\n   * @notice An order of token IDs is not guaranteed and may change\r\n   *      when a token from the list is transferred\r\n   * @param owner an address to query a collection for\r\n   * @return an unordered list of token IDs owned by given address\r\n   */\r\n  function getCollection(address owner) public constant returns(uint8[]) {\r\n    // read a collection from mapping and return\r\n    return collections[owner];\r\n  }\r\n\r\n  /**\r\n   * @dev Allows to fetch collection of tokens, including internal token data\r\n   *      in a single function, useful when connecting to external node like INFURA\r\n   * @dev Each element of the array returned is a tightly packed integer, containing\r\n   *        token ID\r\n   *        number of plots\r\n   *        tax nominator\r\n   *        tax denominator\r\n   * @param owner an address to query a collection for\r\n   * @return an unordered list of country packed data owned by give address\r\n   */\r\n  function getPackedCollection(address owner) public constant returns(uint40[]) {\r\n    // get the list of token IDs the owner owns\r\n    uint8[] memory ids = getCollection(owner);\r\n\r\n    // allocate correspondent array for packed data\r\n    uint40[] memory packedCollection = new uint40[](ids.length);\r\n\r\n    // fetch token info one by one and pack it into the structure\r\n    for(uint i = 0; i < ids.length; i++) {\r\n      // token ID\r\n      uint8 tokenId = ids[i];\r\n\r\n      // packed token data\r\n      uint32 packedData = getPacked(tokenId);\r\n\r\n      // pack the data and save it into result array\r\n      packedCollection[i] = uint40(tokenId) << 32 | packedData;\r\n    }\r\n\r\n    // return the result (it can be empty array as well)\r\n    return packedCollection;\r\n  }\r\n\r\n  /**\r\n   * @notice Returns number of plots for the given country, defined by `_tokenId`\r\n   * @param _tokenId country id to query number of plots for\r\n   * @return number of plots given country has\r\n   */\r\n  function getNumberOfPlots(uint256 _tokenId) public constant returns(uint16) {\r\n    // validate token existence\r\n    require(exists(_tokenId));\r\n\r\n    // obtain token's number of plots from storage and return\r\n    return countries[_tokenId].plots;\r\n  }\r\n\r\n  /**\r\n   * @notice Returns tax as a proper fraction for the given country, defined by `_tokenId`\r\n   * @param _tokenId country id to query tax for\r\n   * @return tax as a proper fraction (tuple containing nominator and denominator)\r\n   */\r\n  function getTax(uint256 _tokenId) public constant returns(uint8, uint8) {\r\n    // obtain token's tax as packed fraction\r\n    uint16 tax = getTaxPacked(_tokenId);\r\n\r\n    // return tax as a proper fraction\r\n    return (tax.getNominator(), tax.getDenominator());\r\n  }\r\n\r\n  /**\r\n   * @notice Returns tax as a proper fraction for the given country, defined by `_tokenId`\r\n   * @param _tokenId country id to query tax for\r\n   * @return tax as a proper fraction packed into uint16\r\n   */\r\n  function getTaxPacked(uint256 _tokenId) public constant returns(uint16) {\r\n    // validate token existence\r\n    require(exists(_tokenId));\r\n\r\n    // obtain token's tax from storage and return tax\r\n    return countries[_tokenId].tax;\r\n  }\r\n\r\n  /**\r\n   * @notice Returns tax percent for the given country, defined by `_tokenId`\r\n   * @dev Converts 16-bit fraction structure into 8-bit [0, 100] percent value\r\n   * @param _tokenId country id to query tax for\r\n   * @return tax percent value, [0, 100]\r\n   */\r\n  function getTaxPercent(uint256 _tokenId) public constant returns (uint8) {\r\n    // validate token existence\r\n    require(exists(_tokenId));\r\n\r\n    // obtain token's tax percent from storage and return\r\n    return countries[_tokenId].tax.toPercent();\r\n  }\r\n\r\n  /**\r\n   * @notice Calculates tax value for the given token and value\r\n   * @param _tokenId token id to use tax rate from\r\n   * @param _value an amount to apply tax to\r\n   * @return calculated tax value based on the tokens tax rate and value\r\n   */\r\n  function calculateTaxValueFor(uint256 _tokenId, uint256 _value) public constant returns (uint256) {\r\n    // validate token existence\r\n    require(exists(_tokenId));\r\n\r\n    // obtain token's tax percent from storage, multiply by value and return\r\n    return countries[_tokenId].tax.multiplyByInteger(_value);\r\n  }\r\n\r\n  /**\r\n   * @notice Allows token owner to update tax rate of the country this token represents\r\n   * @dev Requires tax update feature to be enabled on the contract\r\n   * @dev Requires message sender to be owner of the token\r\n   * @dev Requires previous tax change to be more then `maxTaxChangeFreq` blocks ago\r\n   * @param _tokenId country id to update tax for\r\n   * @param nominator tax rate nominator\r\n   * @param denominator tax rate denominator\r\n   */\r\n  function updateTaxRate(uint256 _tokenId, uint8 nominator, uint8 denominator) public {\r\n    // check if tax updating is enabled\r\n    require(__isFeatureEnabled(FEATURE_ALLOW_TAX_UPDATE));\r\n\r\n    // check that sender is token owner, ensures also that token exists\r\n    require(msg.sender == ownerOf(_tokenId));\r\n\r\n    // check that tax rate doesn't exceed MAX_TAX_RATE\r\n    require(nominator <= denominator / MAX_TAX_INV);\r\n\r\n    // check that enough time has passed since last tax update\r\n    require(countries[_tokenId].taxModified + maxTaxChangeFreq <= now);\r\n\r\n    // save old tax value to log\r\n    uint16 oldTax = countries[_tokenId].tax;\r\n\r\n    // update the tax rate\r\n    countries[_tokenId].tax = Fractions16.createProperFraction16(nominator, denominator);\r\n\r\n    // update tax rate updated timestamp\r\n    countries[_tokenId].taxModified = uint32(now);\r\n\r\n    // emit an event\r\n    emit TaxRateUpdated(msg.sender, _tokenId, countries[_tokenId].tax, oldTax);\r\n  }\r\n\r\n  /**\r\n   * @dev Allows setting the `maxTaxChangeFreq` parameter of the contract,\r\n   *      which specifies how frequently the tax rate can be changed\r\n   * @dev Requires sender to have `ROLE_TAX_MANAGER` permission.\r\n   * @param _maxTaxChangeFreq a value to set `maxTaxChangeFreq` to\r\n   */\r\n  function updateMaxTaxChangeFreq(uint32 _maxTaxChangeFreq) public {\r\n    // check if caller has sufficient permissions to update tax change frequency\r\n    require(__isSenderInRole(ROLE_TAX_MANAGER));\r\n\r\n    // update the tax change frequency\r\n    maxTaxChangeFreq = _maxTaxChangeFreq;\r\n  }\r\n\r\n\r\n  /**\r\n   * @dev Creates new token with `tokenId` ID specified and\r\n   *      assigns an ownership `to` for that token\r\n   * @dev Initial token's properties are predefined by its ID\r\n   * @param to an address to assign created token ownership to\r\n   * @param tokenId ID of the token to create\r\n   */\r\n  function mint(address to, uint8 tokenId) public {\r\n    // validate destination address\r\n    require(to != address(0));\r\n    require(to != address(this));\r\n\r\n    // check if caller has sufficient permissions to mint a token\r\n    require(__isSenderInRole(ROLE_TOKEN_CREATOR));\r\n\r\n    // delegate call to `__mint`\r\n    __mint(to, tokenId);\r\n\r\n    // fire Minted event\r\n    emit Minted(msg.sender, to, tokenId);\r\n\r\n    // fire ERC20/ERC721 transfer event\r\n    emit Transfer(address(0), to, tokenId, 1);\r\n  }\r\n\r\n\r\n  /**\r\n   * @notice Total number of existing tokens (tracked by this contract)\r\n   * @return A count of valid tokens tracked by this contract,\r\n   *    where each one of them has an assigned and\r\n   *    queryable owner not equal to the zero address\r\n   */\r\n  function totalSupply() public constant returns (uint256) {\r\n    // read the length of the `allTokens` collection\r\n    return allTokens.length;\r\n  }\r\n\r\n  /**\r\n   * @notice Enumerate valid tokens\r\n   * @dev Throws if `_index` >= `totalSupply()`.\r\n   * @param _index a counter less than `totalSupply()`\r\n   * @return The token ID for the `_index`th token, unsorted\r\n   */\r\n  function tokenByIndex(uint256 _index) public constant returns (uint256) {\r\n    // out of bounds check\r\n    require(_index < allTokens.length);\r\n\r\n    // get the token ID and return\r\n    return allTokens[_index];\r\n  }\r\n\r\n  /**\r\n   * @notice Enumerate tokens assigned to an owner\r\n   * @dev Throws if `_index` >= `balanceOf(_owner)`.\r\n   * @param _owner an address of the owner to query token from\r\n   * @param _index a counter less than `balanceOf(_owner)`\r\n   * @return the token ID for the `_index`th token assigned to `_owner`, unsorted\r\n   */\r\n  function tokenOfOwnerByIndex(address _owner, uint256 _index) public constant returns (uint256) {\r\n    // out of bounds check\r\n    require(_index < collections[_owner].length);\r\n\r\n    // get the token ID from owner collection and return\r\n    return collections[_owner][_index];\r\n  }\r\n\r\n  /**\r\n   * @notice Gets an amount of token owned by the given address\r\n   * @dev Gets the balance of the specified address\r\n   * @param _owner address to query the balance for\r\n   * @return an amount owned by the address passed as an input parameter\r\n   */\r\n  function balanceOf(address _owner) public constant returns (uint256) {\r\n    // validate an owner address\r\n    require(_owner != address(0));\r\n\r\n    // read the length of the `who`s collection of tokens\r\n    return collections[_owner].length;\r\n  }\r\n\r\n  /**\r\n   * @notice Checks if specified token exists\r\n   * @dev Returns whether the specified token ID exists\r\n   * @param _tokenId ID of the token to query the existence for\r\n   * @return whether the token exists (true - exists)\r\n   */\r\n  function exists(uint256 _tokenId) public constant returns (bool) {\r\n    // check if this token exists (owner is not zero)\r\n    return countries[_tokenId].owner != address(0);\r\n  }\r\n\r\n  /**\r\n   * @notice Finds an owner address for a token specified\r\n   * @dev Gets the owner of the specified token from the `countries` mapping\r\n   * @dev Throws if a token with the ID specified doesn't exist\r\n   * @param _tokenId ID of the token to query the owner for\r\n   * @return owner address currently marked as the owner of the given token\r\n   */\r\n  function ownerOf(uint256 _tokenId) public constant returns (address) {\r\n    // check if this token exists\r\n    require(exists(_tokenId));\r\n\r\n    // return owner's address\r\n    return countries[_tokenId].owner;\r\n  }\r\n\r\n  /**\r\n   * @notice Transfers ownership rights of a token defined\r\n   *      by the `tokenId` to a new owner specified by address `to`\r\n   * @dev Requires the sender of the transaction to be an owner\r\n   *      of the token specified (`tokenId`)\r\n   * @param to new owner address\r\n   * @param _tokenId ID of the token to transfer ownership rights for\r\n   */\r\n  function transfer(address to, uint256 _tokenId) public {\r\n    // check if token transfers feature is enabled\r\n    require(__isFeatureEnabled(FEATURE_TRANSFERS));\r\n\r\n    // call sender gracefully - `from`\r\n    address from = msg.sender;\r\n\r\n    // delegate call to unsafe `__transfer`\r\n    __transfer(from, to, _tokenId);\r\n  }\r\n\r\n  /**\r\n   * @notice A.k.a \"transfer a token on behalf\"\r\n   * @notice Transfers ownership rights of a token defined\r\n   *      by the `tokenId` to a new owner specified by address `to`\r\n   * @notice Allows transferring ownership rights by a trading operator\r\n   *      on behalf of token owner. Allows building an exchange of tokens.\r\n   * @dev Transfers the ownership of a given token ID to another address\r\n   * @dev Requires the transaction sender to be one of:\r\n   *      owner of a token - then its just a usual `transfer`\r\n   *      approved \u2013 an address explicitly approved earlier by\r\n   *        the owner of a token to transfer this particular token `tokenId`\r\n   *      operator - an address explicitly approved earlier by\r\n   *        the owner to transfer all his tokens on behalf\r\n   * @param _from current owner of the token\r\n   * @param _to address to receive the ownership of the token\r\n   * @param _tokenId ID of the token to be transferred\r\n   */\r\n  function transferFrom(address _from, address _to, uint256 _tokenId) public {\r\n    // if `_from` is equal to sender, require transfers feature to be enabled\r\n    // otherwise require transfers on behalf feature to be enabled\r\n    require(_from == msg.sender && __isFeatureEnabled(FEATURE_TRANSFERS)\r\n      || _from != msg.sender && __isFeatureEnabled(FEATURE_TRANSFERS_ON_BEHALF));\r\n\r\n    // call sender gracefully - `operator`\r\n    address operator = msg.sender;\r\n\r\n    // find if an approved address exists for this token\r\n    address approved = approvals[_tokenId];\r\n\r\n    // we assume `from` is an owner of the token,\r\n    // this will be explicitly checked in `__transfer`\r\n\r\n    // fetch how much approvals left for an operator\r\n    bool approvedOperator = approvedOperators[_from][operator];\r\n\r\n    // operator must have an approval to transfer this particular token\r\n    // or operator must be approved to transfer all the tokens\r\n    // or, if nothing satisfies, this is equal to regular transfer,\r\n    // where `from` is basically a transaction sender and owner of the token\r\n    if(operator != approved && !approvedOperator) {\r\n      // transaction sender doesn't have any special permissions\r\n      // we will treat him as a token owner and sender and try to perform\r\n      // a regular transfer:\r\n      // check `from` to be `operator` (transaction sender):\r\n      require(_from == operator);\r\n    }\r\n\r\n    // delegate call to unsafe `__transfer`\r\n    __transfer(_from, _to, _tokenId);\r\n  }\r\n\r\n  /**\r\n   * @notice A.k.a \"safe transfer a token on behalf\"\r\n   * @notice Transfers ownership rights of a token defined\r\n   *      by the `tokenId` to a new owner specified by address `to`\r\n   * @notice Allows transferring ownership rights by a trading operator\r\n   *      on behalf of token owner. Allows building an exchange of tokens.\r\n   * @dev Safely transfers the ownership of a given token ID to another address\r\n   * @dev Requires the transaction sender to be the owner, approved, or operator\r\n   * @dev When transfer is complete, this function\r\n   *      checks if `_to` is a smart contract (code size > 0). If so, it calls\r\n   *      `onERC721Received` on `_to` and throws if the return value is not\r\n   *      `bytes4(keccak256(\"onERC721Received(address,address,uint256,bytes)\"))`.\r\n   * @param _from current owner of the token\r\n   * @param _to address to receive the ownership of the token\r\n   * @param _tokenId ID of the token to be transferred\r\n   * @param _data Additional data with no specified format, sent in call to `_to`\r\n   */\r\n  function safeTransferFrom(address _from, address _to, uint256 _tokenId, bytes _data) public {\r\n    // delegate call to usual (unsafe) `transferFrom`\r\n    transferFrom(_from, _to, _tokenId);\r\n\r\n    // check if receiver `_to` supports ERC721 interface\r\n    if (AddressUtils.isContract(_to)) {\r\n      // if `_to` is a contract \u2013 execute onERC721Received\r\n      bytes4 response = ERC721Receiver(_to).onERC721Received(msg.sender, _from, _tokenId, _data);\r\n\r\n      // expected response is ERC721_RECEIVED\r\n      require(response == ERC721_RECEIVED);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @notice A.k.a \"safe transfer a token on behalf\"\r\n   * @notice Transfers ownership rights of a token defined\r\n   *      by the `tokenId` to a new owner specified by address `to`\r\n   * @notice Allows transferring ownership rights by a trading operator\r\n   *      on behalf of token owner. Allows building an exchange of tokens.\r\n   * @dev Safely transfers the ownership of a given token ID to another address\r\n   * @dev Requires the transaction sender to be the owner, approved, or operator\r\n   * @dev Requires from to be an owner of the token\r\n   * @dev If the target address is a contract, it must implement `onERC721Received`,\r\n   *      which is called upon a safe transfer, and return the magic value\r\n   *      `bytes4(keccak256(\"onERC721Received(address,uint256,bytes)\"))`;\r\n   *      otherwise the transfer is reverted.\r\n   * @dev This works identically to the other function with an extra data parameter,\r\n   *      except this function just sets data to \"\".\r\n   * @param _from current owner of the token\r\n   * @param _to address to receive the ownership of the token\r\n   * @param _tokenId ID of the token to be transferred\r\n   */\r\n  function safeTransferFrom(address _from, address _to, uint256 _tokenId) public {\r\n    // delegate call to overloaded `safeTransferFrom`, set data to \"\"\r\n    safeTransferFrom(_from, _to, _tokenId, \"\");\r\n  }\r\n\r\n  /**\r\n   * @notice Approves an address to transfer the given token on behalf of its owner\r\n   *      Can also be used to revoke an approval by setting `to` address to zero\r\n   * @dev The zero `to` address revokes an approval for a given token\r\n   * @dev There can only be one approved address per token at a given time\r\n   * @dev This function can only be called by the token owner\r\n   * @param _approved address to be approved to transfer the token on behalf of its owner\r\n   * @param _tokenId ID of the token to be approved for transfer on behalf\r\n   */\r\n  function approve(address _approved, uint256 _tokenId) public {\r\n    // call sender nicely - `from`\r\n    address from = msg.sender;\r\n\r\n    // get token owner address (also ensures that token exists)\r\n    address owner = ownerOf(_tokenId);\r\n\r\n    // caller must own this token\r\n    require(from == owner);\r\n    // approval for owner himself is pointless, do not allow\r\n    require(_approved != owner);\r\n    // either we're removing approval, or setting it\r\n    require(approvals[_tokenId] != address(0) || _approved != address(0));\r\n\r\n    // set an approval (deletes an approval if to == 0)\r\n    approvals[_tokenId] = _approved;\r\n\r\n    // emit an ERC721 event\r\n    emit Approval(from, _approved, _tokenId);\r\n  }\r\n\r\n  /**\r\n   * @notice Removes an approved address, which was previously added by `approve`\r\n   *      for the given token. Equivalent to calling approve(0, tokenId)\r\n   * @dev Same as calling approve(0, tokenId)\r\n   * @param _tokenId ID of the token to remove approved address for\r\n   */\r\n  function revokeApproval(uint256 _tokenId) public {\r\n    // delegate call to `approve`\r\n    approve(address(0), _tokenId);\r\n  }\r\n\r\n  /**\r\n   * @dev Sets or unsets the approval of a given operator\r\n   * @dev An operator is allowed to transfer *all* tokens of the sender on their behalf\r\n   * @param to operator address to set the approval for\r\n   * @param approved representing the status of the approval to be set\r\n   */\r\n  function setApprovalForAll(address to, bool approved) public {\r\n    // call sender nicely - `from`\r\n    address from = msg.sender;\r\n\r\n    // validate destination address\r\n    require(to != address(0));\r\n\r\n    // approval for owner himself is pointless, do not allow\r\n    require(to != from);\r\n\r\n    // set an approval\r\n    approvedOperators[from][to] = approved;\r\n\r\n    // emit an ERC721 compliant event\r\n    emit ApprovalForAll(from, to, approved);\r\n  }\r\n\r\n  /**\r\n   * @notice Get the approved address for a single token\r\n   * @dev Throws if `_tokenId` is not a valid token ID.\r\n   * @param _tokenId ID of the token to find the approved address for\r\n   * @return the approved address for this token, or the zero address if there is none\r\n   */\r\n  function getApproved(uint256 _tokenId) public constant returns (address) {\r\n    // validate token existence\r\n    require(exists(_tokenId));\r\n\r\n    // find approved address and return\r\n    return approvals[_tokenId];\r\n  }\r\n\r\n  /**\r\n   * @notice Query if an address is an authorized operator for another address\r\n   * @param _owner the address that owns at least one token\r\n   * @param _operator the address that acts on behalf of the owner\r\n   * @return true if `_operator` is an approved operator for `_owner`, false otherwise\r\n   */\r\n  function isApprovedForAll(address _owner, address _operator) public constant returns (bool) {\r\n    // is there a positive amount of approvals left\r\n    return approvedOperators[_owner][_operator];\r\n  }\r\n\r\n  /**\r\n   * @notice A distinct Uniform Resource Identifier (URI) for a given asset.\r\n   * @dev Throws if `_tokenId` is not a valid token ID.\r\n   *      URIs are defined in RFC 3986.\r\n   * @param _tokenId uint256 ID of the token to query\r\n   * @return token URI\r\n   */\r\n  function tokenURI(uint256 _tokenId) public constant returns (string) {\r\n    // validate token existence\r\n    require(exists(_tokenId));\r\n\r\n    // token URL consists of base URL part (domain) and token ID\r\n    return StringUtils.concat(\"http://cryptominerworld.com/country/\", StringUtils.itoa(_tokenId, 10));\r\n  }\r\n\r\n  /// @dev Performs a transfer of a token `tokenId` from address `from` to address `to`\r\n  /// @dev Unsafe: doesn't check if caller has enough permissions to execute the call;\r\n  ///      checks only for token existence and that ownership belongs to `from`\r\n  /// @dev Is save to call from `transfer(to, tokenId)` since it doesn't need any additional checks\r\n  /// @dev Must be kept private at all times\r\n  function __transfer(address from, address to, uint256 _tokenId) private {\r\n    // validate source and destination address\r\n    require(to != address(0));\r\n    require(to != from);\r\n    // impossible by design of transfer(), transferFrom(),\r\n    // approveToken() and approve()\r\n    assert(from != address(0));\r\n\r\n    // validate token existence\r\n    require(exists(_tokenId));\r\n\r\n    // validate token ownership\r\n    require(ownerOf(_tokenId) == from);\r\n\r\n    // clear approved address for this particular token + emit event\r\n    __clearApprovalFor(_tokenId);\r\n\r\n    // move token ownership,\r\n    // update old and new owner's token collections accordingly\r\n    __move(from, to, _tokenId);\r\n\r\n    // fire ERC20/ERC721 transfer event\r\n    emit Transfer(from, to, _tokenId, 1);\r\n  }\r\n\r\n  /// @dev Clears approved address for a particular token\r\n  function __clearApprovalFor(uint256 _tokenId) private {\r\n    // check if approval exists - we don't want to fire an event in vain\r\n    if(approvals[_tokenId] != address(0)) {\r\n      // clear approval\r\n      delete approvals[_tokenId];\r\n\r\n      // emit an ERC721 event\r\n      emit Approval(msg.sender, address(0), _tokenId);\r\n    }\r\n  }\r\n\r\n  /// @dev Move `country` from owner `from` to a new owner `to`\r\n  /// @dev Unsafe, doesn't check for consistence\r\n  /// @dev Must be kept private at all times\r\n  function __move(address from, address to, uint256 _tokenId) private {\r\n    // cast token ID to uint32 space\r\n    uint8 tokenId = uint8(_tokenId);\r\n\r\n    // overflow check, failure impossible by design of mint()\r\n    assert(tokenId == _tokenId);\r\n\r\n    // get the country pointer to the storage\r\n    Country storage country = countries[_tokenId];\r\n\r\n    // get a reference to the collection where country is now\r\n    uint8[] storage source = collections[from];\r\n\r\n    // get a reference to the collection where country goes to\r\n    uint8[] storage destination = collections[to];\r\n\r\n    // collection `source` cannot be empty, if it is - it's a bug\r\n    assert(source.length != 0);\r\n\r\n    // index of the country within collection `source`\r\n    uint8 i = country.index;\r\n\r\n    // we put the last country in the collection `source` to the position released\r\n    // get an ID of the last country in `source`\r\n    uint8 sourceId = source[source.length - 1];\r\n\r\n    // update country index to point to proper place in the collection `source`\r\n    countries[sourceId].index = i;\r\n\r\n    // put it into the position i within `source`\r\n    source[i] = sourceId;\r\n\r\n    // trim the collection `source` by removing last element\r\n    source.length--;\r\n\r\n    // update country index according to position in new collection `destination`\r\n    country.index = uint8(destination.length);\r\n\r\n    // update country owner\r\n    country.owner = to;\r\n\r\n    // push country into collection\r\n    destination.push(tokenId);\r\n  }\r\n\r\n  /// @dev Creates new token with `tokenId` ID specified and\r\n  ///      assigns an ownership `to` for this token\r\n  /// @dev Unsafe: doesn't check if caller has enough permissions to execute the call\r\n  ///      checks only that the token doesn't exist yet\r\n  /// @dev Must be kept private at all times\r\n  function __mint(address to, uint8 tokenId) private {\r\n    // check that `tokenId` is inside valid bounds\r\n    require(tokenId > 0 && tokenId <= countryData.length);\r\n\r\n    // ensure that token with such ID doesn't exist\r\n    require(!exists(tokenId));\r\n\r\n    // create new country in memory\r\n    Country memory country = Country({\r\n      id: tokenId,\r\n      plots: countryData[tokenId - 1],\r\n      tax: DEFAULT_TAX_RATE,\r\n      taxModified: 0,\r\n      index: uint8(collections[to].length),\r\n      owner: to\r\n    });\r\n\r\n    // push newly created `tokenId` to the owner's collection of tokens\r\n    collections[to].push(tokenId);\r\n\r\n    // persist country to the storage\r\n    countries[tokenId] = country;\r\n\r\n    // add token ID to the `allTokens` collection,\r\n    // automatically updates total supply\r\n    allTokens.push(tokenId);\r\n\r\n    // update token bitmap\r\n    tokenMap |= uint192(1 << uint256(tokenId - 1));\r\n  }\r\n\r\n}", "OptimizationUsed": "1", "ContractName": "CountryERC721", "ByteCode": "0x6080604052600436106102be5763ffffffff7c010000000000000000000000000000000000000000000000000000000060003504166301ffc9a781146102c357806306fdde03146102f9578063081812fc1461038357806308e9daa5146103b7578063095ea7b31461041d578063099da37f146104435780630cc84e941461047b5780630f7fa72f146104a857806317114fdc146104cc57806318160ddd146104f757806319fa8f501461050c57806323b872dd1461053e5780632b521416146105685780632f745c591461057d578063313ce567146105a157806332892177146105b657806334d82220146105e457806342842e0e1461060b5780634932488c1461063557806349a764cd146106a65780634e6b0158146106ca5780634f558e79146106f95780634f6ccce7146107115780635bd4fc5e146107295780635dbffbd11461073e5780635ea8d8771461075657806363035f6614610774578063634282af1461078c5780636352211e146107a4578063661d9fd4146107bc578063691562a0146107d45780636e6f2784146107fb57806370a082311461081057806374d5e1001461083157806379db5f67146108525780637cea48ac146108765780637faae89a1461088e5780637fde1c8a146108af5780638a95724d146108d35780638d4e57e6146108e85780638f6fba8c146108fd57806395d89b4114610912578063a22cb46514610927578063a9059cbb1461094d578063ac8a584a14610971578063b1ce7f2214610992578063b1e130fc146109c3578063b88d4fde146109db578063bdefce8c14610a4a578063c0d6568d146105b6578063c151c7fa14610a62578063c87b56dd14610a77578063d5bb7f6714610a8f578063e03a764d14610aa7578063e40de88714610abc578063e48edf0514610add578063e760a50314610af2578063e985e9c514610b07578063fa8b361f14610b2e575b600080fd5b3480156102cf57600080fd5b506102e5600160e060020a031960043516610b52565b604080519115158252519081900360200190f35b34801561030557600080fd5b5061030e610b71565b6040805160208082528351818301528351919283929083019185019080838360005b83811015610348578181015183820152602001610330565b50505050905090810190601f1680156103755780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b34801561038f57600080fd5b5061039b600435610ba8565b60408051600160a060020a039092168252519081900360200190f35b3480156103c357600080fd5b506103cf600435610bda565b6040805160ff978816815261ffff9687166020820152949095168486015263ffffffff90921660608401529093166080820152600160a060020a0390921660a0830152519081900360c00190f35b34801561042957600080fd5b50610441600160a060020a0360043516602435610c3f565b005b34801561044f57600080fd5b5061045b600435610d20565b6040805160ff938416815291909216602082015281519081900390910190f35b34801561048757600080fd5b50610496600435602435610d54565b60408051918252519081900360200190f35b3480156104b457600080fd5b50610441600160a060020a0360043516602435610d95565b3480156104d857600080fd5b506104e1610e37565b6040805160ff9092168252519081900360200190f35b34801561050357600080fd5b50610496610e3c565b34801561051857600080fd5b50610521610e43565b60408051600160e060020a03199092168252519081900360200190f35b34801561054a57600080fd5b50610441600160a060020a0360043581169060243516604435610e67565b34801561057457600080fd5b50610496610f48565b34801561058957600080fd5b50610496600160a060020a0360043516602435610f4e565b3480156105ad57600080fd5b506104e1610fbd565b3480156105c257600080fd5b506105cb610fc2565b6040805163ffffffff9092168252519081900360200190f35b3480156105f057600080fd5b506102e5600160a060020a0360043581169060243516610fc7565b34801561061757600080fd5b50610441600160a060020a0360043581169060243516604435610fe7565b34801561064157600080fd5b50610656600160a060020a0360043516611008565b60408051602080825283518183015283519192839290830191858101910280838360005b8381101561069257818101518382015260200161067a565b505050509050019250505060405180910390f35b3480156106b257600080fd5b506104e1600160a060020a03600435166024356110cf565b3480156106d657600080fd5b506106e2600435611111565b6040805161ffff9092168252519081900360200190f35b34801561070557600080fd5b506102e5600435611147565b34801561071d57600080fd5b50610496600435611172565b34801561073557600080fd5b506105cb6111b7565b34801561074a57600080fd5b506106e26004356111be565b34801561076257600080fd5b5061044163ffffffff600435166111f0565b34801561078057600080fd5b5061039b60043561125b565b34801561079857600080fd5b506104e1600435611276565b3480156107b057600080fd5b5061039b6004356112a8565b3480156107c857600080fd5b506106e26004356112e8565b3480156107e057600080fd5b50610441600160a060020a036004351660ff6024351661131c565b34801561080757600080fd5b506104e1611403565b34801561081c57600080fd5b50610496600160a060020a0360043516611408565b34801561083d57600080fd5b50610496600160a060020a036004351661143b565b34801561085e57600080fd5b50610441600160a060020a036004351660243561144d565b34801561088257600080fd5b506104e16004356114e5565b34801561089a57600080fd5b506105cb600160a060020a0360043516611524565b3480156108bb57600080fd5b50610441600160a060020a03600435166024356115bf565b3480156108df57600080fd5b506104e1611667565b3480156108f457600080fd5b506105cb61166d565b34801561090957600080fd5b506105cb611674565b34801561091e57600080fd5b5061030e611679565b34801561093357600080fd5b50610441600160a060020a036004351660243515156116b0565b34801561095957600080fd5b50610441600160a060020a036004351660243561174d565b34801561097d57600080fd5b50610441600160a060020a0360043516611771565b34801561099e57600080fd5b506109a7611834565b60408051600160c060020a039092168252519081900360200190f35b3480156109cf57600080fd5b50610441600435611848565b3480156109e757600080fd5b50604080516020601f60643560048181013592830184900484028501840190955281845261044194600160a060020a0381358116956024803590921695604435953695608494019181908401838280828437509497506118569650505050505050565b348015610a5657600080fd5b506105cb6004356119dc565b348015610a6e57600080fd5b506106e2611a8b565b348015610a8357600080fd5b5061030e600435611a91565b348015610a9b57600080fd5b50610441600435611b17565b348015610ab357600080fd5b506105cb611baa565b348015610ac857600080fd5b50610656600160a060020a0360043516611baf565b348015610ae957600080fd5b506105cb611c39565b348015610afe57600080fd5b506105cb611c62565b348015610b1357600080fd5b506102e5600160a060020a0360043581169060243516611cb4565b348015610b3a57600080fd5b5061044160043560ff60243581169060443516611ce2565b600160e060020a03191660009081526002602052604090205460ff1690565b60408051808201909152601d81527f436f756e74727920e280932043727970746f4d696e657220576f726c64000000602082015281565b6000610bb382611147565b1515610bbe57600080fd5b50600090815260056020526040902054600160a060020a031690565b60046020526000908152604090205460ff8082169161ffff6101008204811692630100000083049091169163ffffffff6501000000000082041691690100000000000000000082041690600160a060020a036a01000000000000000000009091041686565b336000610c4b836112a8565b9050600160a060020a0382811690821614610c6557600080fd5b600160a060020a038481169082161415610c7e57600080fd5b600083815260056020526040902054600160a060020a0316151580610cab5750600160a060020a03841615155b1515610cb657600080fd5b600083815260056020526040808220805473ffffffffffffffffffffffffffffffffffffffff1916600160a060020a0388811691821790925591518693918616917f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b92591a450505050565b6000806000610d2e846112e8565b9050610d3d8161ffff16611e50565b610d4a8261ffff16610e40565b9250925050915091565b6000610d5f83611147565b1515610d6a57600080fd5b600083815260046020526040902054610d8e906301000000900461ffff1683611e5e565b9392505050565b33600160a060020a0381811660009081526001602052604080822054928616825281205415610dc357600080fd5b610dd1826310000000611f03565b1515610ddc57600080fd5b50828116801515610dec57600080fd5b600160a060020a038086166000818152600160209081526040918290208590558151858152915192938716926000805160206129e78339815191529281900390910190a35050505050565b60c081565b6008545b90565b7f01ffc9a70000000000000000000000000000000000000000000000000000000081565b600080600033600160a060020a031686600160a060020a0316148015610e925750610e926001611f0a565b80610ebf575033600160a060020a031686600160a060020a031614158015610ebf5750610ebf6002611f0a565b1515610eca57600080fd5b505050600081815260056020908152604080832054600160a060020a03878116855260068452828520338281168088529190955292909420549293169160ff16908214801590610f18575080155b15610f3557600160a060020a0386811690841614610f3557600080fd5b610f40868686611f18565b505050505050565b60005481565b600160a060020a0382166000908152600760205260408120548210610f7257600080fd5b600160a060020a0383166000908152600760205260409020805483908110610f9657fe5b600091825260209182902091810490910154601f9091166101000a900460ff169392505050565b600081565b600181565b600660209081526000928352604080842090915290825290205460ff1681565b6110038383836020604051908101604052806000815250611856565b505050565b6060806060600080600061101b87611baf565b94508451604051908082528060200260200182016040528015611048578160200160208202803883390190505b509350600092505b84518310156110c457848381518110151561106757fe5b90602001906020020151915061107f8260ff166119dc565b845190915064010000000060ff84160263ffffffff831617908590859081106110a457fe5b64ffffffffff909216602092830290910190910152600190920191611050565b509195945050505050565b6007602052816000526040600020818154811015156110ea57fe5b9060005260206000209060209182820401919006915091509054906101000a900460ff1681565b600380548290811061111f57fe5b9060005260206000209060109182820401919006600202915054906101000a900461ffff1681565b6000908152600460205260409020546a01000000000000000000009004600160a060020a0316151590565b600854600090821061118357600080fd5b600880548390811061119157fe5b600091825260209182902091810490910154601f9091166101000a900460ff1692915050565b6202000081565b60006111c982611147565b15156111d457600080fd5b50600090815260046020526040902054610100900461ffff1690565b6111fc62020000611ff8565b151561120757600080fd5b6009805463ffffffff909216790100000000000000000000000000000000000000000000000000027fffffff00000000ffffffffffffffffffffffffffffffffffffffffffffffffff909216919091179055565b600560205260009081526040902054600160a060020a031681565b600880548290811061128457fe5b9060005260206000209060209182820401919006915054906101000a900460ff1681565b60006112b382611147565b15156112be57600080fd5b506000908152600460205260409020546a01000000000000000000009004600160a060020a031690565b60006112f382611147565b15156112fe57600080fd5b506000908152600460205260409020546301000000900461ffff1690565b600160a060020a038216151561133157600080fd5b30600160a060020a031682600160a060020a03161415151561135257600080fd5b61135e62040000611ff8565b151561136957600080fd5b611373828261201b565b8060ff1682600160a060020a031633600160a060020a03167fb5ef5f5253bf4cb8c5ab21afc91b6fb43e506a971dbc3c4293154af18beb45aa60405160405180910390a46040805160018152905160ff831691600160a060020a038516916000917f9ed053bb818ff08b8353cd46f78db1f0799f31c9e4458fdb425c10eccd2efc44919081900360200190a45050565b600581565b6000600160a060020a038216151561141f57600080fd5b50600160a060020a031660009081526007602052604090205490565b60016020526000908152604090205481565b33600160a060020a03811660009081526001602052604081205490611476826310000000611f03565b151561148157600080fd5b5082811680151561149157600080fd5b600160a060020a038086166000818152600160209081526040918290208054600019871816908190558251908152915192938716926000805160206129e78339815191529281900390910190a35050505050565b60006114f082611147565b15156114fb57600080fd5b60008281526004602052604090205461151e906301000000900461ffff16612306565b92915050565b600080805b600160a060020a0384166000908152600760205260409020548110156115b457600160a060020a0384166000908152600760205260408120805460049291908490811061157257fe5b600091825260208083208183040154601f90921661010090810a90920460ff16845283019390935260409091019020540461ffff169190910190600101611529565b8192505b5050919050565b33600160a060020a0381811660009081526001602052604080822054928616825281205415156115ee57600080fd5b6115fc826310000000611f03565b151561160757600080fd5b5082811680151561161757600080fd5b600160a060020a0380861660008181526001602090815260409182902080548617908190558251908152915192938716926000805160206129e78339815191529281900390910190a35050505050565b60035490565b6204000081565b600281565b60408051808201909152600381527f4354590000000000000000000000000000000000000000000000000000000000602082015281565b33600160a060020a03831615156116c657600080fd5b600160a060020a0383811690821614156116df57600080fd5b600160a060020a03818116600081815260066020908152604080832094881680845294825291829020805460ff1916871515908117909155825190815291517f17307eab39ab6107e8899845ad3d59bd9653f200f220920489ca2b5937696c319281900390910190a3505050565b60006117596001611f0a565b151561176457600080fd5b5033611003818484611f18565b600160a060020a0381166000908152600160205260409020543390151561179757600080fd5b600160a060020a0382811690821614156117b057600080fd5b600160a060020a038082166000908152600160205260408082205492851682529020546117e39190631000000017611f03565b15156117ee57600080fd5b600160a060020a03808316600081815260016020908152604080832083905580519283525192938516926000805160206129e78339815191529281900390910190a35050565b6009546101009004600160c060020a031681565b611853600082610c3f565b50565b6000611863858585610e67565b61186c8461236b565b156119d55783600160a060020a031663150b7a02338786866040518563ffffffff167c01000000000000000000000000000000000000000000000000000000000281526004018085600160a060020a0316600160a060020a0316815260200184600160a060020a0316600160a060020a0316815260200183815260200180602001828103825283818151815260200191508051906020019080838360005b8381101561192257818101518382015260200161190a565b50505050905090810190601f16801561194f5780820380516001836020036101000a031916815260200191505b5095505050505050602060405180830381600087803b15801561197157600080fd5b505af1158015611985573d6000803e3d6000fd5b505050506040513d602081101561199b57600080fd5b50519050600160e060020a031981167f150b7a0200000000000000000000000000000000000000000000000000000000146119d557600080fd5b5050505050565b60006119e6612964565b6119ef83611147565b15156119fa57600080fd5b5050600090815260046020908152604091829020825160c081018452905460ff8082168352610100820461ffff908116948401859052630100000083041694830185905265010000000000820463ffffffff166060840152690100000000000000000082041660808301526a01000000000000000000009004600160a060020a031660a09091015262010000021790565b61010a81565b6060611a9c82611147565b1515611aa757600080fd5b61151e606060405190810160405280602481526020017f687474703a2f2f63727970746f6d696e6572776f726c642e636f6d2f636f756e81526020017f7472792f00000000000000000000000000000000000000000000000000000000815250611b1284600a612373565b6125e5565b33600160a060020a038116600090815260016020526040902054611b3f816320000000611f03565b1515611b4a57600080fd5b600080548285161760001985811884161816908190556040805185815260208101929092528051600160a060020a038516927fd7561eaef77f105dc0c307bfb23c571f603f07bb7db5766a68840742fde80b8992908290030190a2505050565b600481565b600160a060020a038116600090815260076020908152604091829020805483518184028101840190945280845260609392830182828015611c2d57602002820191906000526020600020906000905b825461010083900a900460ff16815260206001928301818104948501949093039092029101808411611bfe5790505b50505050509050919050565b600954790100000000000000000000000000000000000000000000000000900463ffffffff1681565b600080805b600354811015611cae576003805482908110611c7f57fe5b60009182526020909120601082040154600f9091166002026101000a900461ffff169190910190600101611c67565b50919050565b600160a060020a03918216600090815260066020908152604080832093909416825291909152205460ff1690565b6000611cee6004611f0a565b1515611cf957600080fd5b611d02846112a8565b600160a060020a031633600160a060020a0316141515611d2157600080fd5b600560ff83160460ff168360ff1611151515611d3c57600080fd5b6009546000858152600460205260409020544279010000000000000000000000000000000000000000000000000090920463ffffffff90811665010000000000909204811691909101161115611d9157600080fd5b506000838152600460205260409020546301000000900461ffff16611db683836126f4565b600085815260046020908152604091829020805464ffff0000001916630100000061ffff95861681029190911768ffffffff00000000001916650100000000004263ffffffff160217918290558351910484168152928416908301528051869233600160a060020a0316927f98596970d617e8711c12dd66281ba0042919602104ae851ef4ebe01bc66f576592918290030190a350505050565b61010061ffff821604919050565b6000806000611e6c85611e50565b9150611e7785610e40565b90508060ff168260ff161415611e8f57839250611efb565b60ff80821690831610611ea157600080fd5b837dffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff16841415611ee4578060ff168260ff168502811515611edc57fe5b049250611efb565b8160ff168160ff1685811515611ef657fe5b040292505b505092915050565b9081161490565b600061151e60005483611f03565b600160a060020a0382161515611f2d57600080fd5b600160a060020a038281169084161415611f4657600080fd5b600160a060020a0383161515611f5857fe5b611f6181611147565b1515611f6c57600080fd5b82600160a060020a0316611f7f826112a8565b600160a060020a031614611f9257600080fd5b611f9b81612727565b611fa68383836127a5565b8082600160a060020a031684600160a060020a03167f9ed053bb818ff08b8353cd46f78db1f0799f31c9e4458fdb425c10eccd2efc4460016040518082815260200191505060405180910390a4505050565b600160a060020a033316600090815260016020526040812054610d8e8184611f03565b612023612964565b60008260ff1611801561203b575060035460ff831611155b151561204657600080fd5b6120528260ff16611147565b1561205c57600080fd5b60c0604051908101604052808360ff16815260200160036001850360ff1681548110151561208657fe5b90600052602060002090601091828204019190066002029054906101000a900461ffff1661ffff16815260200161010a61ffff168152602001600063ffffffff1681526020016007600086600160a060020a0316600160a060020a031681526020019081526020016000208054905060ff16815260200184600160a060020a031681525090506007600084600160a060020a0316600160a060020a0316815260200190815260200160002082908060018154018082558091505090600182039060005260206000209060209182820401919006909192909190916101000a81548160ff021916908360ff1602179055505080600460008460ff16815260200190815260200160002060008201518160000160006101000a81548160ff021916908360ff16021790555060208201518160000160016101000a81548161ffff021916908361ffff16021790555060408201518160000160036101000a81548161ffff021916908361ffff16021790555060608201518160000160056101000a81548163ffffffff021916908363ffffffff16021790555060808201518160000160096101000a81548160ff021916908360ff16021790555060a082015181600001600a6101000a815481600160a060020a030219169083600160a060020a03160217905550905050600882908060018154018082558091505090600182039060005260206000209060209182820401919006909192909190916101000a81548160ff021916908360ff160217905550506001820360ff1660019060020a02600960018282829054906101000a9004600160c060020a03161792506101000a815481600160c060020a030219169083600160c060020a03160217905550505050565b600080600061231484611e50565b915061231f84610e40565b90508060ff168260ff16141561233857606492506115b8565b60ff8082169083161061234a57600080fd5b8060ff168260ff1660640261ffff1681151561236257fe5b04949350505050565b6000903b1190565b6060806000806000808660ff166002148061239157508660ff166008145b8061239f57508660ff16600a145b806123ad57508660ff166010145b15156123b857600080fd5b8715156123fa5760408051808201909152600181527f3000000000000000000000000000000000000000000000000000000000000000602082015295506125da565b604080516101008082526101208201909252906020820161200080388339019050509450600093505b600088111561249e578660ff168881151561243a57fe5b069250826030019150600a8360ff161115612456576007820191505b8451600185019460f860020a840291879190811061247057fe5b906020010190600160f860020a031916908160001a9053508660ff168881151561249657fe5b049750612423565b506000925b600281048410156125d657848460018303038151811015156124c157fe5b90602001015160f860020a900460f860020a0285858151811015156124e257fe5b906020010181815160f860020a900460f860020a0218915090600160f860020a031916908160001a905350848481518110151561251b57fe5b90602001015160f860020a900460f860020a028585600184030381518110151561254157fe5b906020010181815160f860020a900460f860020a0218915090600160f860020a031916908160001a9053508484600183030381518110151561257f57fe5b90602001015160f860020a900460f860020a0285858151811015156125a057fe5b906020010181815160f860020a900460f860020a0218915090600160f860020a031916908160001a9053506001909301926124a3565b8495505b505050505092915050565b60608060608060008087945086935083518551016040519080825280601f01601f191660200182016040528015612626578160200160208202803883390190505b509250600091505b845182101561268957848281518110151561264557fe5b90602001015160f860020a900460f860020a02838381518110151561266657fe5b906020010190600160f860020a031916908160001a90535060019091019061262e565b5083515b83518110156126e85783855182038151811015156126a757fe5b90602001015160f860020a900460f860020a0283828151811015156126c857fe5b906020010190600160f860020a031916908160001a90535060010161268d565b50909695505050505050565b600060ff8216151561270557600080fd5b60ff8083169084161061271757600080fd5b5060ff9081169116610100021790565b600081815260056020526040902054600160a060020a03161561185357600081815260056020526040808220805473ffffffffffffffffffffffffffffffffffffffff191690555182919033600160a060020a0316907f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925908390a450565b8060008080808060ff861686146127b857fe5b6000878152600460209081526040808320600160a060020a03808e1685526007909352818420928c16845292208154929750909550935015156127f757fe5b84548454690100000000000000000090910460ff1692508490600019810190811061281e57fe5b600091825260208083208183040154601f9092166101000a90910460ff90811680845260049092526040909220805469ff00000000000000000019166901000000000000000000938616938402179055855490925082918691811061287f57fe5b90600052602060002090602091828204019190066101000a81548160ff021916908360ff160217905550838054809190600190036128bd9190612999565b50508154845469ff0000000000000000001916690100000000000000000060ff92831602177fffff0000000000000000000000000000000000000000ffffffffffffffffffff166a0100000000000000000000600160a060020a03999099169890980297909717909355805460018101825560009182526020918290209181049091018054601f9092166101000a8088021990921694909616029290921790935550505050565b6040805160c081018252600080825260208201819052918101829052606081018290526080810182905260a081019190915290565b81548183558181111561100357601f016020900481601f016020900483600052602060002091820191016110039190610e4091905b808211156129e257600081556001016129ce565b50905600de4cd40876c200276a5c070f12c8512913143450b14c88bfaa4245b24a5092afa165627a7a72305820b826cc64bf0f324f5437a365997ece823a0cb7f4b7cfe510bf693f5d7002a9590029"}