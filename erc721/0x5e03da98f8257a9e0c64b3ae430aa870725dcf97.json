{"Runs": "200", "SwarmSource": "bzzr://f9ba348cae771522b04273df9529cadaeb56a59d253c1248d3015b53e8c44039", "ABI": "[{\"constant\":true,\"inputs\":[{\"name\":\"_interfaceId\",\"type\":\"bytes4\"}],\"name\":\"supportsInterface\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_owner\",\"type\":\"address\"},{\"name\":\"_founder\",\"type\":\"string\"},{\"name\":\"_creator\",\"type\":\"string\"},{\"name\":\"_isBitizenItem\",\"type\":\"bool\"},{\"name\":\"_attr1\",\"type\":\"uint256[4]\"},{\"name\":\"_attr2\",\"type\":\"uint8[5]\"},{\"name\":\"_attr3\",\"type\":\"uint16[2]\"}],\"name\":\"createItem\",\"outputs\":[{\"name\":\"_itemId\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"name\",\"outputs\":[{\"name\":\"\",\"type\":\"string\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_tokenId\",\"type\":\"uint256\"}],\"name\":\"getApproved\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_to\",\"type\":\"address\"},{\"name\":\"_tokenId\",\"type\":\"uint256\"}],\"name\":\"approve\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"totalSupply\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"InterfaceId_ERC165\",\"outputs\":[{\"name\":\"\",\"type\":\"bytes4\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_from\",\"type\":\"address\"},{\"name\":\"_to\",\"type\":\"address\"},{\"name\":\"_tokenId\",\"type\":\"uint256\"}],\"name\":\"transferFrom\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_itemId\",\"type\":\"uint256\"},{\"name\":\"_isBitizenItem\",\"type\":\"bool\"},{\"name\":\"_miningTime\",\"type\":\"uint16\"},{\"name\":\"_magicFind\",\"type\":\"uint16\"},{\"name\":\"_node\",\"type\":\"uint256\"},{\"name\":\"_listNumber\",\"type\":\"uint256\"},{\"name\":\"_setNumber\",\"type\":\"uint256\"},{\"name\":\"_quality\",\"type\":\"uint256\"},{\"name\":\"_rarity\",\"type\":\"uint8\"},{\"name\":\"_socket\",\"type\":\"uint8\"},{\"name\":\"_gender\",\"type\":\"uint8\"},{\"name\":\"_energy\",\"type\":\"uint8\"},{\"name\":\"_ext\",\"type\":\"uint8\"}],\"name\":\"updateItem\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_owner\",\"type\":\"address\"},{\"name\":\"_index\",\"type\":\"uint256\"}],\"name\":\"tokenOfOwnerByIndex\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"doUnpause\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"getBurnedItemCount\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_from\",\"type\":\"address\"},{\"name\":\"_to\",\"type\":\"address\"},{\"name\":\"_tokenId\",\"type\":\"uint256\"}],\"name\":\"safeTransferFrom\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_itemId\",\"type\":\"uint256\"}],\"name\":\"getSameItemCount\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_index\",\"type\":\"uint256\"}],\"name\":\"tokenByIndex\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"InterfaceId_ERC721Enumerable\",\"outputs\":[{\"name\":\"\",\"type\":\"bytes4\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_tokenId\",\"type\":\"uint256\"}],\"name\":\"ownerOf\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"doPause\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"address\"}],\"name\":\"isOperator\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_owner\",\"type\":\"address\"}],\"name\":\"balanceOf\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"renounceOwnership\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_index\",\"type\":\"uint256\"}],\"name\":\"getBurnedItemByIndex\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"MAX_OPS\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"InterfaceId_ERC721Exists\",\"outputs\":[{\"name\":\"\",\"type\":\"bytes4\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_account\",\"type\":\"address\"}],\"name\":\"setDefaultApprovalAccount\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"InterfaceId_ERC721\",\"outputs\":[{\"name\":\"\",\"type\":\"bytes4\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_itemId\",\"type\":\"uint256\"},{\"name\":\"_index\",\"type\":\"uint256\"}],\"name\":\"getSameItemIdByIndex\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_itemId\",\"type\":\"uint256\"}],\"name\":\"isAvatarChild\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"owner\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_url\",\"type\":\"string\"}],\"name\":\"updateBaseURI\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"symbol\",\"outputs\":[{\"name\":\"\",\"type\":\"string\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_newOperator\",\"type\":\"address\"}],\"name\":\"addOperator\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_itemId\",\"type\":\"uint256\"}],\"name\":\"getItemHash\",\"outputs\":[{\"name\":\"\",\"type\":\"bytes8\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_to\",\"type\":\"address\"},{\"name\":\"_approved\",\"type\":\"bool\"}],\"name\":\"setApprovalForAll\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_operator\",\"type\":\"address\"}],\"name\":\"removeOperator\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"isPaused\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_from\",\"type\":\"address\"},{\"name\":\"_to\",\"type\":\"address\"},{\"name\":\"_tokenId\",\"type\":\"uint256\"},{\"name\":\"_data\",\"type\":\"bytes\"}],\"name\":\"safeTransferFrom\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_itemId1\",\"type\":\"uint256\"},{\"name\":\"_itemId2\",\"type\":\"uint256\"}],\"name\":\"compareItemSlots\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[],\"name\":\"removeAllOps\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"InterfaceId_ERC721Metadata\",\"outputs\":[{\"name\":\"\",\"type\":\"bytes4\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_itemId\",\"type\":\"uint256\"}],\"name\":\"getTransferTimes\",\"outputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_tokenId\",\"type\":\"uint256\"}],\"name\":\"tokenURI\",\"outputs\":[{\"name\":\"\",\"type\":\"string\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_itemId\",\"type\":\"uint256\"}],\"name\":\"isBurned\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_itemId\",\"type\":\"uint256\"}],\"name\":\"getItemInfo\",\"outputs\":[{\"name\":\"\",\"type\":\"string\"},{\"name\":\"\",\"type\":\"string\"},{\"name\":\"\",\"type\":\"bool\"},{\"name\":\"_attr1\",\"type\":\"uint256[4]\"},{\"name\":\"_attr2\",\"type\":\"uint8[5]\"},{\"name\":\"_attr3\",\"type\":\"uint16[2]\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"operators\",\"outputs\":[{\"name\":\"\",\"type\":\"address\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_owner\",\"type\":\"address\"}],\"name\":\"getOwnedItems\",\"outputs\":[{\"name\":\"_items\",\"type\":\"uint256[]\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_target\",\"type\":\"address\"}],\"name\":\"isFrozen\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_target\",\"type\":\"address\"},{\"name\":\"_freeze\",\"type\":\"bool\"}],\"name\":\"freezeAccount\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_owner\",\"type\":\"address\"},{\"name\":\"_operator\",\"type\":\"address\"}],\"name\":\"isApprovedForAll\",\"outputs\":[{\"name\":\"\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[],\"name\":\"ERC721_RECEIVED\",\"outputs\":[{\"name\":\"\",\"type\":\"bytes4\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_newOwner\",\"type\":\"address\"}],\"name\":\"transferOwnership\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":false,\"inputs\":[{\"name\":\"_owner\",\"type\":\"address\"},{\"name\":\"_itemId\",\"type\":\"uint256\"}],\"name\":\"burnItem\",\"outputs\":[],\"payable\":false,\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"name\":\"_itemId1\",\"type\":\"uint256\"},{\"name\":\"_itemId2\",\"type\":\"uint256\"}],\"name\":\"isSameItem\",\"outputs\":[{\"name\":\"_isSame\",\"type\":\"bool\"}],\"payable\":false,\"stateMutability\":\"view\",\"type\":\"function\"},{\"payable\":true,\"stateMutability\":\"payable\",\"type\":\"fallback\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"_owner\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"_itemId\",\"type\":\"uint256\"},{\"indexed\":false,\"name\":\"_type\",\"type\":\"uint8\"}],\"name\":\"ItemHandleEvent\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"target\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"frozen\",\"type\":\"bool\"}],\"name\":\"FrozenFunds\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"operator\",\"type\":\"address\"}],\"name\":\"OperatorAdded\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"name\":\"operator\",\"type\":\"address\"}],\"name\":\"OperatorRemoved\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"previousOwner\",\"type\":\"address\"}],\"name\":\"OwnershipRenounced\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"previousOwner\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"newOwner\",\"type\":\"address\"}],\"name\":\"OwnershipTransferred\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"_from\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"_to\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"_tokenId\",\"type\":\"uint256\"}],\"name\":\"Transfer\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"_owner\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"_approved\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"_tokenId\",\"type\":\"uint256\"}],\"name\":\"Approval\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"name\":\"_owner\",\"type\":\"address\"},{\"indexed\":true,\"name\":\"_operator\",\"type\":\"address\"},{\"indexed\":false,\"name\":\"_approved\",\"type\":\"bool\"}],\"name\":\"ApprovalForAll\",\"type\":\"event\"}]", "Library": "", "CompilerVersion": "v0.4.24+commit.e67f0147", "ConstructorArguments": "", "SourceCode": "pragma solidity ^0.4.24; \r\n\r\ninterface ERC165 {\r\n  /**\r\n   * @notice Query if a contract implements an interface\r\n   * @param _interfaceId The interface identifier, as specified in ERC-165\r\n   * @dev Interface identification is specified in ERC-165. This function\r\n   * uses less than 30,000 gas.\r\n   */\r\n  function supportsInterface(bytes4 _interfaceId) external view returns (bool);\r\n}\r\n\r\ninterface ERC721 /* is ERC165 */ {\r\n    /// @dev This emits when ownership of any NFT changes by any mechanism.\r\n    ///  This event emits when NFTs are created (`from` == 0) and destroyed\r\n    ///  (`to` == 0). Exception: during contract creation, any number of NFTs\r\n    ///  may be created and assigned without emitting Transfer. At the time of\r\n    ///  any transfer, the approved address for that NFT (if any) is reset to none.\r\n    event Transfer(address indexed _from, address indexed _to, uint256 indexed _tokenId);\r\n\r\n    /// @dev This emits when the approved address for an NFT is changed or\r\n    ///  reaffirmed. The zero address indicates there is no approved address.\r\n    ///  When a Transfer event emits, this also indicates that the approved\r\n    ///  address for that NFT (if any) is reset to none.\r\n    event Approval(address indexed _owner, address indexed _approved, uint256 indexed _tokenId);\r\n\r\n    /// @dev This emits when an operator is enabled or disabled for an owner.\r\n    ///  The operator can manage all NFTs of the owner.\r\n    event ApprovalForAll(address indexed _owner, address indexed _operator, bool _approved);\r\n\r\n    /// @notice Count all NFTs assigned to an owner\r\n    /// @dev NFTs assigned to the zero address are considered invalid, and this\r\n    ///  function throws for queries about the zero address.\r\n    /// @param _owner An address for whom to query the balance\r\n    /// @return The number of NFTs owned by `_owner`, possibly zero\r\n    function balanceOf(address _owner) external view returns (uint256);\r\n\r\n    /// @notice Find the owner of an NFT\r\n    /// @dev NFTs assigned to zero address are considered invalid, and queries\r\n    ///  about them do throw.\r\n    /// @param _tokenId The identifier for an NFT\r\n    /// @return The address of the owner of the NFT\r\n    function ownerOf(uint256 _tokenId) external view returns (address);\r\n\r\n    /// @notice Transfers the ownership of an NFT from one address to another address\r\n    /// @dev Throws unless `msg.sender` is the current owner, an authorized\r\n    ///  operator, or the approved address for this NFT. Throws if `_from` is\r\n    ///  not the current owner. Throws if `_to` is the zero address. Throws if\r\n    ///  `_tokenId` is not a valid NFT. When transfer is complete, this function\r\n    ///  checks if `_to` is a smart contract (code size > 0). If so, it calls\r\n    ///  `onERC721Received` on `_to` and throws if the return value is not\r\n    ///  `bytes4(keccak256(\"onERC721Received(address,address,uint256,bytes)\"))`.\r\n    /// @param _from The current owner of the NFT\r\n    /// @param _to The new owner\r\n    /// @param _tokenId The NFT to transfer\r\n    /// @param data Additional data with no specified format, sent in call to `_to`\r\n    function safeTransferFrom(address _from, address _to, uint256 _tokenId, bytes data) external;\r\n\r\n    /// @notice Transfers the ownership of an NFT from one address to another address\r\n    /// @dev This works identically to the other function with an extra data parameter,\r\n    ///  except this function just sets data to \"\".\r\n    /// @param _from The current owner of the NFT\r\n    /// @param _to The new owner\r\n    /// @param _tokenId The NFT to transfer\r\n    function safeTransferFrom(address _from, address _to, uint256 _tokenId) external;\r\n\r\n    /// @notice Transfer ownership of an NFT -- THE CALLER IS RESPONSIBLE\r\n    ///  TO CONFIRM THAT `_to` IS CAPABLE OF RECEIVING NFTS OR ELSE\r\n    ///  THEY MAY BE PERMANENTLY LOST\r\n    /// @dev Throws unless `msg.sender` is the current owner, an authorized\r\n    ///  operator, or the approved address for this NFT. Throws if `_from` is\r\n    ///  not the current owner. Throws if `_to` is the zero address. Throws if\r\n    ///  `_tokenId` is not a valid NFT.\r\n    /// @param _from The current owner of the NFT\r\n    /// @param _to The new owner\r\n    /// @param _tokenId The NFT to transfer\r\n    function transferFrom(address _from, address _to, uint256 _tokenId) external;\r\n\r\n    /// @notice Change or reaffirm the approved address for an NFT\r\n    /// @dev The zero address indicates there is no approved address.\r\n    ///  Throws unless `msg.sender` is the current NFT owner, or an authorized\r\n    ///  operator of the current owner.\r\n    /// @param _approved The new approved NFT controller\r\n    /// @param _tokenId The NFT to approve\r\n    function approve(address _approved, uint256 _tokenId) external;\r\n\r\n    /// @notice Enable or disable approval for a third party (\"operator\") to manage\r\n    ///  all of `msg.sender`'s assets\r\n    /// @dev Emits the ApprovalForAll event. The contract MUST allow\r\n    ///  multiple operators per owner.\r\n    /// @param _operator Address to add to the set of authorized operators\r\n    /// @param _approved True if the operator is approved, false to revoke approval\r\n    function setApprovalForAll(address _operator, bool _approved) external;\r\n\r\n    /// @notice Get the approved address for a single NFT\r\n    /// @dev Throws if `_tokenId` is not a valid NFT.\r\n    /// @param _tokenId The NFT to find the approved address for\r\n    /// @return The approved address for this NFT, or the zero address if there is none\r\n    function getApproved(uint256 _tokenId) external view returns (address);\r\n\r\n    /// @notice Query if an address is an authorized operator for another address\r\n    /// @param _owner The address that owns the NFTs\r\n    /// @param _operator The address that acts on behalf of the owner\r\n    /// @return True if `_operator` is an approved operator for `_owner`, false otherwise\r\n    function isApprovedForAll(address _owner, address _operator) external view returns (bool);\r\n}\r\n\r\n///  Note: the ERC-165 identifier for this interface is 0x780e9d63.\r\ninterface ERC721Enumerable /* is ERC721 */ {\r\n    /// @notice Count NFTs tracked by this contract\r\n    /// @return A count of valid NFTs tracked by this contract, where each one of\r\n    ///  them has an assigned and queryable owner not equal to the zero address\r\n    function totalSupply() external view returns (uint256);\r\n\r\n    /// @notice Enumerate valid NFTs\r\n    /// @dev Throws if `_index` >= `totalSupply()`.\r\n    /// @param _index A counter less than `totalSupply()`\r\n    /// @return The token identifier for the `_index`th NFT,\r\n    ///  (sort order not specified)\r\n    function tokenByIndex(uint256 _index) external view returns (uint256);\r\n\r\n    /// @notice Enumerate NFTs assigned to an owner\r\n    /// @dev Throws if `_index` >= `balanceOf(_owner)` or if\r\n    ///  `_owner` is the zero address, representing invalid NFTs.\r\n    /// @param _owner An address where we are interested in NFTs owned by them\r\n    /// @param _index A counter less than `balanceOf(_owner)`\r\n    /// @return The token identifier for the `_index`th NFT assigned to `_owner`,\r\n    ///   (sort order not specified)\r\n    function tokenOfOwnerByIndex(address _owner, uint256 _index) external view returns (uint256);\r\n}\r\n\r\n///  Note: the ERC-165 identifier for this interface is 0x5b5e139f.\r\ninterface ERC721Metadata /* is ERC721 */ {\r\n  /// @notice A descriptive name for a collection of NFTs in this contract\r\n  function name() external view returns (string _name);\r\n\r\n  /// @notice An abbreviated name for NFTs in this contract\r\n  function symbol() external view returns (string _symbol);\r\n\r\n  /// @notice A distinct Uniform Resource Identifier (URI) for a given asset.\r\n  /// @dev Throws if `_tokenId` is not a valid NFT. URIs are defined in RFC\r\n  ///  3986. The URI may point to a JSON file that conforms to the \"ERC721\r\n  ///  Metadata JSON Schema\".\r\n  function tokenURI(uint256 _tokenId) external view returns (string);\r\n}\r\n\r\n/// @dev Note: the ERC-165 identifier for this interface is 0x150b7a02.\r\ninterface ERC721TokenReceiver {\r\n    /// @notice Handle the receipt of an NFT\r\n    /// @dev The ERC721 smart contract calls this function on the recipient\r\n    ///  after a `transfer`. This function MAY throw to revert and reject the\r\n    ///  transfer. Return of other than the magic value MUST result in the\r\n    ///  transaction being reverted.\r\n    ///  Note: the contract address is always the message sender.\r\n    /// @param _operator The address which called `safeTransferFrom` function\r\n    /// @param _from The address which previously owned the token\r\n    /// @param _tokenId The NFT identifier which is being transferred\r\n    /// @param _data Additional data with no specified format\r\n    /// @return `bytes4(keccak256(\"onERC721Received(address,address,uint256,bytes)\"))`\r\n    ///  unless throwing\r\n    function onERC721Received(address _operator, address _from, uint256 _tokenId, bytes _data) external returns(bytes4);\r\n}\r\n\r\n/**\r\n * @title SupportsInterfaceWithLookup\r\n * @author Matt Condon (@shrugs)\r\n * @dev Implements ERC165 using a lookup table.\r\n */\r\ncontract SupportsInterfaceWithLookup is ERC165 {\r\n  bytes4 public constant InterfaceId_ERC165 = 0x01ffc9a7;\r\n  /**\r\n   * 0x01ffc9a7 ===\r\n   *   bytes4(keccak256('supportsInterface(bytes4)'))\r\n   */\r\n\r\n  /**\r\n   * @dev a mapping of interface id to whether or not it's supported\r\n   */\r\n  mapping(bytes4 => bool) internal supportedInterfaces;\r\n\r\n  /**\r\n   * @dev A contract implementing SupportsInterfaceWithLookup\r\n   * implement ERC165 itself\r\n   */\r\n  constructor()\r\n    public\r\n  {\r\n    _registerInterface(InterfaceId_ERC165);\r\n  }\r\n\r\n  /**\r\n   * @dev implement supportsInterface(bytes4) using a lookup table\r\n   */\r\n  function supportsInterface(bytes4 _interfaceId)\r\n    external\r\n    view\r\n    returns (bool)\r\n  {\r\n    return supportedInterfaces[_interfaceId];\r\n  }\r\n\r\n  /**\r\n   * @dev private method for registering an interface\r\n   */\r\n  function _registerInterface(bytes4 _interfaceId)\r\n    internal\r\n  {\r\n    require(_interfaceId != 0xffffffff);\r\n    supportedInterfaces[_interfaceId] = true;\r\n  }\r\n}\r\n\r\n/**\r\n * Utility library of inline functions on addresses\r\n */\r\nlibrary AddressUtils {\r\n\r\n  /**\r\n   * Returns whether the target address is a contract\r\n   * @dev This function will return false if invoked during the constructor of a contract,\r\n   * as the code is not actually created until after the constructor finishes.\r\n   * @param addr address to check\r\n   * @return whether the target address is a contract\r\n   */\r\n  function isContract(address addr) internal view returns (bool) {\r\n    uint256 size;\r\n    // XXX Currently there is no better way to check if there is a contract in an address\r\n    // than to check the size of the code at that address.\r\n    // See https://ethereum.stackexchange.com/a/14016/36603\r\n    // for more details about how this works.\r\n    // TODO Check this again before the Serenity release, because all addresses will be\r\n    // contracts then.\r\n    // solium-disable-next-line security/no-inline-assembly\r\n    assembly { size := extcodesize(addr) }\r\n    return size > 0;\r\n  }\r\n\r\n}\r\n \r\nlibrary UrlStr {\r\n  \r\n  // generate url by tokenId\r\n  // baseUrl must end with 00000000\r\n  function generateUrl(string url,uint256 _tokenId) internal pure returns (string _url){\r\n    _url = url;\r\n    bytes memory _tokenURIBytes = bytes(_url);\r\n    uint256 base_len = _tokenURIBytes.length - 1;\r\n    _tokenURIBytes[base_len - 7] = byte(48 + _tokenId / 10000000 % 10);\r\n    _tokenURIBytes[base_len - 6] = byte(48 + _tokenId / 1000000 % 10);\r\n    _tokenURIBytes[base_len - 5] = byte(48 + _tokenId / 100000 % 10);\r\n    _tokenURIBytes[base_len - 4] = byte(48 + _tokenId / 10000 % 10);\r\n    _tokenURIBytes[base_len - 3] = byte(48 + _tokenId / 1000 % 10);\r\n    _tokenURIBytes[base_len - 2] = byte(48 + _tokenId / 100 % 10);\r\n    _tokenURIBytes[base_len - 1] = byte(48 + _tokenId / 10 % 10);\r\n    _tokenURIBytes[base_len - 0] = byte(48 + _tokenId / 1 % 10);\r\n  }\r\n}\r\n\r\n/**\r\n * @title SafeMath\r\n * @dev Math operations with safety checks that throw on error\r\n */\r\nlibrary SafeMath {\r\n\r\n  /**\r\n  * @dev Multiplies two numbers, throws on overflow.\r\n  */\r\n  function mul(uint256 a, uint256 b) internal pure returns (uint256) {\r\n    if (a == 0) {\r\n      return 0;\r\n    }\r\n    uint256 c = a * b;\r\n    assert(c / a == b);\r\n    return c;\r\n  }\r\n\r\n  /**\r\n  * @dev Integer division of two numbers, truncating the quotient.\r\n  */\r\n  function div(uint256 a, uint256 b) internal pure returns (uint256) {\r\n    // assert(b > 0); // Solidity automatically throws when dividing by 0\r\n    uint256 c = a / b;\r\n    // assert(a == b * c + a % b); // There is no case in which this doesn't hold\r\n    return c;\r\n  }\r\n\r\n  /**\r\n  * @dev Substracts two numbers, throws on overflow (i.e. if subtrahend is greater than minuend).\r\n  */\r\n  function sub(uint256 a, uint256 b) internal pure returns (uint256) {\r\n    assert(b <= a);\r\n    return a - b;\r\n  }\r\n\r\n  /**\r\n  * @dev Adds two numbers, throws on overflow.\r\n  */\r\n  function add(uint256 a, uint256 b) internal pure returns (uint256) {\r\n    uint256 c = a + b;\r\n    assert(c >= a);\r\n    return c;\r\n  }\r\n}\r\n \r\n/**\r\n * @title Ownable\r\n * @dev The Ownable contract has an owner address, and provides basic authorization control\r\n * functions, this simplifies the implementation of \"user permissions\".\r\n */\r\ncontract Ownable {\r\n  address public owner;\r\n  event OwnershipRenounced(address indexed previousOwner);\r\n  event OwnershipTransferred(\r\n    address indexed previousOwner,\r\n    address indexed newOwner\r\n  );\r\n\r\n  /**\r\n   * @dev The Ownable constructor sets the original `owner` of the contract to the sender\r\n   * account.\r\n   */\r\n  constructor() public {\r\n    owner = msg.sender;\r\n  }\r\n\r\n  /**\r\n   * @dev Throws if called by any account other than the owner.\r\n   */\r\n  modifier onlyOwner() {\r\n    require(msg.sender == owner);\r\n    _;\r\n  }\r\n\r\n  /**\r\n   * @dev Allows the current owner to relinquish control of the contract.\r\n   * @notice Renouncing to ownership will leave the contract without an owner.\r\n   * It will not be possible to call the functions with the `onlyOwner`\r\n   * modifier anymore.\r\n   */\r\n  function renounceOwnership() public onlyOwner {\r\n    emit OwnershipRenounced(owner);\r\n    owner = address(0);\r\n  }\r\n\r\n  /**\r\n   * @dev Allows the current owner to transfer control of the contract to a newOwner.\r\n   * @param _newOwner The address to transfer ownership to.\r\n   */\r\n  function transferOwnership(address _newOwner) public onlyOwner {\r\n    _transferOwnership(_newOwner);\r\n  }\r\n\r\n  /**\r\n   * @dev Transfers control of the contract to a newOwner.\r\n   * @param _newOwner The address to transfer ownership to.\r\n   */\r\n  function _transferOwnership(address _newOwner) internal {\r\n    require(_newOwner != address(0));\r\n    emit OwnershipTransferred(owner, _newOwner);\r\n    owner = _newOwner;\r\n  }\r\n}\r\n\r\n/**\r\n * @title Operator\r\n * @dev Allow two roles: 'owner' or 'operator'\r\n *      - owner: admin/superuser (e.g. with financial rights)\r\n *      - operator: can update configurations\r\n */\r\ncontract Operator is Ownable {\r\n\r\n    address[] public operators;\r\n\r\n    uint public MAX_OPS = 20; // Default maximum number of operators allowed\r\n\r\n    mapping(address => bool) public isOperator;\r\n\r\n    event OperatorAdded(address operator);\r\n    event OperatorRemoved(address operator);\r\n\r\n    // @dev Throws if called by any non-operator account. Owner has all ops rights.\r\n    modifier onlyOperator() {\r\n        require(\r\n            isOperator[msg.sender] || msg.sender == owner,\r\n            \"Permission denied. Must be an operator or the owner.\"\r\n        );\r\n        _;\r\n    }\r\n\r\n    /**\r\n     * @dev Allows the current owner or operators to add operators\r\n     * @param _newOperator New operator address\r\n     */\r\n    function addOperator(address _newOperator) public onlyOwner {\r\n        require(\r\n            _newOperator != address(0),\r\n            \"Invalid new operator address.\"\r\n        );\r\n\r\n        // Make sure no dups\r\n        require(\r\n            !isOperator[_newOperator],\r\n            \"New operator exists.\"\r\n        );\r\n\r\n        // Only allow so many ops\r\n        require(\r\n            operators.length < MAX_OPS,\r\n            \"Overflow.\"\r\n        );\r\n\r\n        operators.push(_newOperator);\r\n        isOperator[_newOperator] = true;\r\n\r\n        emit OperatorAdded(_newOperator);\r\n    }\r\n\r\n    /**\r\n     * @dev Allows the current owner or operators to remove operator\r\n     * @param _operator Address of the operator to be removed\r\n     */\r\n    function removeOperator(address _operator) public onlyOwner {\r\n        // Make sure operators array is not empty\r\n        require(\r\n            operators.length > 0,\r\n            \"No operator.\"\r\n        );\r\n\r\n        // Make sure the operator exists\r\n        require(\r\n            isOperator[_operator],\r\n            \"Not an operator.\"\r\n        );\r\n\r\n        // Manual array manipulation:\r\n        // - replace the _operator with last operator in array\r\n        // - remove the last item from array\r\n        address lastOperator = operators[operators.length - 1];\r\n        for (uint i = 0; i < operators.length; i++) {\r\n            if (operators[i] == _operator) {\r\n                operators[i] = lastOperator;\r\n            }\r\n        }\r\n        operators.length -= 1; // remove the last element\r\n\r\n        isOperator[_operator] = false;\r\n        emit OperatorRemoved(_operator);\r\n    }\r\n\r\n    // @dev Remove ALL operators\r\n    function removeAllOps() public onlyOwner {\r\n        for (uint i = 0; i < operators.length; i++) {\r\n            isOperator[operators[i]] = false;\r\n        }\r\n        operators.length = 0;\r\n    }\r\n}\r\n \r\ncontract Pausable is Operator {\r\n\r\n  event FrozenFunds(address target, bool frozen);\r\n\r\n  bool public isPaused = false;\r\n  \r\n  mapping(address => bool)  frozenAccount;\r\n\r\n  modifier whenNotPaused {\r\n    require(!isPaused);\r\n    _;\r\n  }\r\n\r\n  modifier whenPaused {\r\n    require(isPaused);\r\n    _;  \r\n  }\r\n\r\n  modifier whenNotFreeze(address _target) {\r\n    require(_target != address(0));\r\n    require(!frozenAccount[_target]);\r\n    _;\r\n  }\r\n\r\n  function isFrozen(address _target) external view returns (bool) {\r\n    require(_target != address(0));\r\n    return frozenAccount[_target];\r\n  }\r\n\r\n  function doPause() external  whenNotPaused onlyOwner {\r\n    isPaused = true;\r\n  }\r\n\r\n  function doUnpause() external  whenPaused onlyOwner {\r\n    isPaused = false;\r\n  }\r\n\r\n  function freezeAccount(address _target, bool _freeze) public onlyOwner {\r\n    require(_target != address(0));\r\n    frozenAccount[_target] = _freeze;\r\n    emit FrozenFunds(_target, _freeze);\r\n  }\r\n\r\n}\r\n\r\ncontract ERC721BasicToken is SupportsInterfaceWithLookup, ERC721, Pausable{\r\n\r\n  bytes4 public constant InterfaceId_ERC721 = 0x80ac58cd;\r\n  /*\r\n   * 0x80ac58cd ===\r\n   *   bytes4(keccak256('balanceOf(address)')) ^\r\n   *   bytes4(keccak256('ownerOf(uint256)')) ^\r\n   *   bytes4(keccak256('approve(address,uint256)')) ^\r\n   *   bytes4(keccak256('getApproved(uint256)')) ^\r\n   *   bytes4(keccak256('setApprovalForAll(address,bool)')) ^\r\n   *   bytes4(keccak256('isApprovedForAll(address,address)')) ^\r\n   *   bytes4(keccak256('transferFrom(address,address,uint256)')) ^\r\n   *   bytes4(keccak256('safeTransferFrom(address,address,uint256)')) ^\r\n   *   bytes4(keccak256('safeTransferFrom(address,address,uint256,bytes)'))\r\n   */\r\n\r\n  bytes4 public constant InterfaceId_ERC721Exists = 0x4f558e79;\r\n  /*\r\n   * 0x4f558e79 ===\r\n   *   bytes4(keccak256('exists(uint256)'))\r\n   */\r\n\r\n  using SafeMath for uint256;\r\n  using AddressUtils for address;\r\n\r\n  // Equals to `bytes4(keccak256(\"onERC721Received(address,address,uint256,bytes)\"))`\r\n  // which can be also obtained as `ERC721Receiver(0).onERC721Received.selector`\r\n  bytes4 public constant ERC721_RECEIVED = 0x150b7a02;\r\n\r\n  // Mapping from token ID to owner\r\n  mapping (uint256 => address) internal tokenOwner;\r\n\r\n  // Mapping from token ID to approved address\r\n  mapping (uint256 => address) internal tokenApprovals;\r\n\r\n  // Mapping from owner to number of owned token\r\n  mapping (address => uint256) internal ownedTokensCount;\r\n\r\n  // Mapping from owner to operator approvals\r\n  mapping (address => mapping (address => bool)) internal operatorApprovals;\r\n\r\n  /**\r\n   * @dev Guarantees msg.sender is owner of the given token\r\n   * @param _tokenId uint256 ID of the token to validate its ownership belongs to msg.sender\r\n   */\r\n  modifier onlyOwnerOf(uint256 _tokenId) {\r\n    require(_ownerOf(_tokenId) == msg.sender,\"This token not owned by this address\");\r\n    _;\r\n  }\r\n  \r\n  function _ownerOf(uint256 _tokenId) internal view returns(address) {\r\n    address _owner = tokenOwner[_tokenId];\r\n    require(_owner != address(0),\"Token not exist\");\r\n    return _owner;\r\n  }\r\n\r\n  /**\r\n   * @dev Checks msg.sender can transfer a token, by being owner, approved, or operator\r\n   * @param _tokenId uint256 ID of the token to validate\r\n   */\r\n  modifier canTransfer(uint256 _tokenId) {\r\n    require(isApprovedOrOwner(msg.sender, _tokenId), \"This address have no permisstion\");\r\n    _;\r\n  }\r\n\r\n  constructor()\r\n    public\r\n  {\r\n    // register the supported interfaces to conform to ERC721 via ERC165\r\n    _registerInterface(InterfaceId_ERC721);\r\n    _registerInterface(InterfaceId_ERC721Exists);\r\n    _registerInterface(ERC721_RECEIVED);\r\n  }\r\n\r\n  /**\r\n   * @dev Gets the balance of the specified address\r\n   * @param _owner address to query the balance of\r\n   * @return uint256 representing the amount owned by the passed address\r\n   */\r\n  function balanceOf(address _owner) external view returns (uint256) {\r\n    require(_owner != address(0));\r\n    return ownedTokensCount[_owner];\r\n  }\r\n\r\n  /**\r\n   * @dev Gets the owner of the specified token ID\r\n   * @param _tokenId uint256 ID of the token to query the owner of\r\n   * @return owner address currently marked as the owner of the given token ID\r\n   */\r\n  function ownerOf(uint256 _tokenId) external view returns (address) {\r\n    return _ownerOf(_tokenId);\r\n  }\r\n\r\n  /**\r\n   * @dev Returns whether the specified token exists\r\n   * @param _tokenId uint256 ID of the token to query the existence of\r\n   * @return whether the token exists\r\n   */\r\n  function exists(uint256 _tokenId) internal view returns (bool) {\r\n    address owner = tokenOwner[_tokenId];\r\n    return owner != address(0);\r\n  }\r\n\r\n  /**\r\n   * @dev Approves another address to transfer the given token ID\r\n   * The zero address indicates there is no approved address.\r\n   * There can only be one approved address per token at a given time.\r\n   * Can only be called by the token owner or an approved operator.\r\n   * @param _to address to be approved for the given token ID\r\n   * @param _tokenId uint256 ID of the token to be approved\r\n   */\r\n  function approve(address _to, uint256 _tokenId) external whenNotPaused {\r\n    address _owner = _ownerOf(_tokenId);\r\n    require(_to != _owner);\r\n    require(msg.sender == _owner || operatorApprovals[_owner][msg.sender]);\r\n\r\n    tokenApprovals[_tokenId] = _to;\r\n    emit Approval(_owner, _to, _tokenId);\r\n  }\r\n\r\n  /**\r\n   * @dev Gets the approved address for a token ID, or zero if no address set\r\n   * @param _tokenId uint256 ID of the token to query the approval of\r\n   * @return address currently approved for the given token ID\r\n   */\r\n  function getApproved(uint256 _tokenId) external view returns (address) {\r\n    return tokenApprovals[_tokenId];\r\n  }\r\n\r\n  /**\r\n   * @dev Sets or unsets the approval of a given operator\r\n   * An operator is allowed to transfer all tokens of the sender on their behalf\r\n   * @param _to operator address to set the approval\r\n   * @param _approved representing the status of the approval to be set\r\n   */\r\n  function setApprovalForAll(address _to, bool _approved) external whenNotPaused {\r\n    require(_to != msg.sender);\r\n    operatorApprovals[msg.sender][_to] = _approved;\r\n    emit ApprovalForAll(msg.sender, _to, _approved);\r\n  }\r\n\r\n  /**\r\n   * @dev Tells whether an operator is approved by a given owner\r\n   * @param _owner owner address which you want to query the approval of\r\n   * @param _operator operator address which you want to query the approval of\r\n   * @return bool whether the given operator is approved by the given owner\r\n   */\r\n  function isApprovedForAll(\r\n    address _owner,\r\n    address _operator\r\n  )\r\n    external\r\n    view\r\n    returns (bool)\r\n  {\r\n    return operatorApprovals[_owner][_operator];\r\n  }\r\n\r\n  /**\r\n   * @dev Transfers the ownership of a given token ID to another address\r\n   * Usage of this method is discouraged, use `safeTransferFrom` whenever possible\r\n   * Requires the msg sender to be the owner, approved, or operator\r\n   * @param _from current owner of the token\r\n   * @param _to address to receive the ownership of the given token ID\r\n   * @param _tokenId uint256 ID of the token to be transferred\r\n  */\r\n  function transferFrom(\r\n    address _from,\r\n    address _to,\r\n    uint256 _tokenId\r\n  )\r\n    external\r\n    canTransfer(_tokenId)\r\n  {\r\n    _transfer(_from,_to,_tokenId);\r\n  }\r\n\r\n\r\n  function _transfer(\r\n    address _from,\r\n    address _to,\r\n    uint256 _tokenId) internal {\r\n    require(_from != address(0));\r\n    require(_to != address(0));\r\n\r\n    clearApproval(_from, _tokenId);\r\n    removeTokenFrom(_from, _tokenId);\r\n    addTokenTo(_to, _tokenId);\r\n\r\n    emit Transfer(_from, _to, _tokenId);\r\n  }\r\n\r\n  /**\r\n   * @dev Safely transfers the ownership of a given token ID to another address\r\n   * If the target address is a contract, it must implement `onERC721Received`,\r\n   * which is called upon a safe transfer, and return the magic value\r\n   * `bytes4(keccak256(\"onERC721Received(address,address,uint256,bytes)\"))`; otherwise,\r\n   * the transfer is reverted.\r\n   *\r\n   * Requires the msg sender to be the owner, approved, or operator\r\n   * @param _from current owner of the token\r\n   * @param _to address to receive the ownership of the given token ID\r\n   * @param _tokenId uint256 ID of the token to be transferred\r\n  */\r\n  function safeTransferFrom(\r\n    address _from,\r\n    address _to,\r\n    uint256 _tokenId\r\n  )\r\n    external\r\n    canTransfer(_tokenId)\r\n  {\r\n    // solium-disable-next-line arg-overflow\r\n    _safeTransferFrom(_from, _to, _tokenId, \"\");\r\n  }\r\n\r\n  /**\r\n   * @dev Safely transfers the ownership of a given token ID to another address\r\n   * If the target address is a contract, it must implement `onERC721Received`,\r\n   * which is called upon a safe transfer, and return the magic value\r\n   * `bytes4(keccak256(\"onERC721Received(address,address,uint256,bytes)\"))`; otherwise,\r\n   * the transfer is reverted.\r\n   * Requires the msg sender to be the owner, approved, or operator\r\n   * @param _from current owner of the token\r\n   * @param _to address to receive the ownership of the given token ID\r\n   * @param _tokenId uint256 ID of the token to be transferred\r\n   * @param _data bytes data to send along with a safe transfer check\r\n   */\r\n  function _safeTransferFrom( \r\n    address _from,\r\n    address _to,\r\n    uint256 _tokenId,\r\n    bytes _data) internal {\r\n    _transfer(_from, _to, _tokenId);\r\n      // solium-disable-next-line arg-overflow\r\n    require(checkAndCallSafeTransfer(_from, _to, _tokenId, _data));\r\n  }\r\n\r\n  function safeTransferFrom(\r\n    address _from,\r\n    address _to,\r\n    uint256 _tokenId,\r\n    bytes _data\r\n  )\r\n    external\r\n    canTransfer(_tokenId)\r\n  {\r\n    _safeTransferFrom(_from, _to, _tokenId, _data);\r\n   \r\n  }\r\n\r\n  /**\r\n   * @dev Returns whether the given spender can transfer a given token ID\r\n   * @param _spender address of the spender to query\r\n   * @param _tokenId uint256 ID of the token to be transferred\r\n   * @return bool whether the msg.sender is approved for the given token ID,\r\n   *  is an operator of the owner, or is the owner of the token\r\n   */\r\n  function isApprovedOrOwner (\r\n    address _spender,\r\n    uint256 _tokenId\r\n  )\r\n    internal\r\n    view\r\n    returns (bool)\r\n  {\r\n    address _owner = _ownerOf(_tokenId);\r\n    // Disable solium check because of\r\n    // https://github.com/duaraghav8/Solium/issues/175\r\n    // solium-disable-next-line operator-whitespace\r\n    return (\r\n      _spender == _owner ||\r\n      tokenApprovals[_tokenId] == _spender ||\r\n      operatorApprovals[_owner][_spender]\r\n    );\r\n  }\r\n\r\n  /**\r\n   * @dev Internal function to mint a new token\r\n   * Reverts if the given token ID already exists\r\n   * @param _to The address that will own the minted token\r\n   * @param _tokenId uint256 ID of the token to be minted by the msg.sender\r\n   */\r\n  function _mint(address _to, uint256 _tokenId) internal {\r\n    require(_to != address(0));\r\n    addTokenTo(_to, _tokenId);\r\n    emit Transfer(address(0), _to, _tokenId);\r\n  }\r\n\r\n  /**\r\n   * @dev Internal function to burn a specific token\r\n   * Reverts if the token does not exist\r\n   * @param _tokenId uint256 ID of the token being burned by the msg.sender\r\n   */\r\n  function _burn(address _owner, uint256 _tokenId) internal {\r\n    clearApproval(_owner, _tokenId);\r\n    removeTokenFrom(_owner, _tokenId);\r\n    emit Transfer(_owner, address(0), _tokenId);\r\n  }\r\n\r\n  /**\r\n   * @dev Internal function to clear current approval of a given token ID\r\n   * Reverts if the given address is not indeed the owner of the token\r\n   * @param _owner owner of the token\r\n   * @param _tokenId uint256 ID of the token to be transferred\r\n   */\r\n  function clearApproval(address _owner, uint256 _tokenId) internal whenNotPaused {\r\n    require(_ownerOf(_tokenId) == _owner);\r\n    if (tokenApprovals[_tokenId] != address(0)) {\r\n      tokenApprovals[_tokenId] = address(0);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @dev Internal function to add a token ID to the list of a given address\r\n   * @param _to address representing the new owner of the given token ID\r\n   * @param _tokenId uint256 ID of the token to be added to the tokens list of the given address\r\n   */\r\n  function addTokenTo(address _to, uint256 _tokenId) internal whenNotPaused {\r\n    require(tokenOwner[_tokenId] == address(0));\r\n    require(!frozenAccount[_to]);  \r\n    tokenOwner[_tokenId] = _to;\r\n    ownedTokensCount[_to] = ownedTokensCount[_to].add(1);\r\n  }\r\n\r\n  /**\r\n   * @dev Internal function to remove a token ID from the list of a given address\r\n   * @param _from address representing the previous owner of the given token ID\r\n   * @param _tokenId uint256 ID of the token to be removed from the tokens list of the given address\r\n   */\r\n  function removeTokenFrom(address _from, uint256 _tokenId) internal whenNotPaused {\r\n    require(_ownerOf(_tokenId) == _from);\r\n    require(!frozenAccount[_from]);  \r\n    ownedTokensCount[_from] = ownedTokensCount[_from].sub(1);\r\n    tokenOwner[_tokenId] = address(0);\r\n  }\r\n\r\n  /**\r\n   * @dev Internal function to invoke `onERC721Received` on a target address\r\n   * The call is not executed if the target address is not a contract\r\n   * @param _from address representing the previous owner of the given token ID\r\n   * @param _to target address that will receive the tokens\r\n   * @param _tokenId uint256 ID of the token to be transferred\r\n   * @param _data bytes optional data to send along with the call\r\n   * @return whether the call correctly returned the expected magic value\r\n   */\r\n  function checkAndCallSafeTransfer(\r\n    address _from,\r\n    address _to,\r\n    uint256 _tokenId,\r\n    bytes _data\r\n  )\r\n    internal\r\n    returns (bool)\r\n  {\r\n    if (!_to.isContract()) {\r\n      return true;\r\n    }\r\n    bytes4 retval = ERC721TokenReceiver(_to).onERC721Received(\r\n      msg.sender, _from, _tokenId, _data);\r\n    return (retval == ERC721_RECEIVED);\r\n  }\r\n}\r\n \r\ncontract ERC721ExtendToken is ERC721BasicToken, ERC721Enumerable, ERC721Metadata {\r\n\r\n  using UrlStr for string;\r\n\r\n  bytes4 public constant InterfaceId_ERC721Enumerable = 0x780e9d63;\r\n  /**\r\n   * 0x780e9d63 ===\r\n   *   bytes4(keccak256('totalSupply()')) ^\r\n   *   bytes4(keccak256('tokenOfOwnerByIndex(address,uint256)')) ^\r\n   *   bytes4(keccak256('tokenByIndex(uint256)'))\r\n   */\r\n\r\n  bytes4 public constant InterfaceId_ERC721Metadata = 0x5b5e139f;\r\n  /**\r\n   * 0x5b5e139f ===\r\n   *   bytes4(keccak256('name()')) ^\r\n   *   bytes4(keccak256('symbol()')) ^\r\n   *   bytes4(keccak256('tokenURI(uint256)'))\r\n   */\r\n  string internal BASE_URL = \"https://www.bitguild.com/bitizens/api/item/getItemInfo/00000000\";\r\n\r\n  // Mapping from owner to list of owned token IDs\r\n  mapping(address => uint256[]) internal ownedTokens;\r\n\r\n  // Mapping from token ID to index of the owner tokens list\r\n  mapping(uint256 => uint256) internal ownedTokensIndex;\r\n\r\n  // Array with all token ids, used for enumeration\r\n  uint256[] internal allTokens;\r\n\r\n  // Mapping from token id to position in the allTokens array\r\n  mapping(uint256 => uint256) internal allTokensIndex;\r\n\r\n  function updateBaseURI(string _url) external onlyOwner {\r\n    BASE_URL = _url;\r\n  }\r\n  \r\n  /**\r\n   * @dev Constructor function\r\n   */\r\n  constructor() public {\r\n    // register the supported interfaces to conform to ERC721 via ERC165\r\n    _registerInterface(InterfaceId_ERC721Enumerable);\r\n    _registerInterface(InterfaceId_ERC721Metadata);\r\n  }\r\n\r\n  /**\r\n   * @dev Gets the token name\r\n   * @return string representing the token name\r\n   */\r\n  function name() external view returns (string) {\r\n    return \"Bitizen item\";\r\n  }\r\n\r\n  /**\r\n   * @dev Gets the token symbol\r\n   * @return string representing the token symbol\r\n   */\r\n  function symbol() external view returns (string) {\r\n    return \"ITMT\";\r\n  }\r\n\r\n  /**\r\n   * @dev Returns an URI for a given token ID\r\n   * Throws if the token ID does not exist. May return an empty string.\r\n   * @param _tokenId uint256 ID of the token to query\r\n   */\r\n  function tokenURI(uint256 _tokenId) external view returns (string) {\r\n    require(exists(_tokenId));\r\n    return BASE_URL.generateUrl(_tokenId);\r\n  }\r\n\r\n  /**\r\n   * @dev Gets the token ID at a given index of the tokens list of the requested owner\r\n   * @param _owner address owning the tokens list to be accessed\r\n   * @param _index uint256 representing the index to be accessed of the requested tokens list\r\n   * @return uint256 token ID at the given index of the tokens list owned by the requested address\r\n   */\r\n  function tokenOfOwnerByIndex(\r\n    address _owner,\r\n    uint256 _index\r\n  )\r\n    public\r\n    view\r\n    returns (uint256)\r\n  {\r\n    require(address(0)!=_owner);\r\n    require(_index < ownedTokensCount[_owner]);\r\n    return ownedTokens[_owner][_index];\r\n  }\r\n\r\n  /**\r\n   * @dev Gets the total amount of tokens stored by the contract\r\n   * @return uint256 representing the total amount of tokens\r\n   */\r\n  function totalSupply() public view returns (uint256) {\r\n    return allTokens.length;\r\n  }\r\n\r\n  /**\r\n   * @dev Gets the token ID at a given index of all the tokens in this contract\r\n   * Reverts if the index is greater or equal to the total number of tokens\r\n   * @param _index uint256 representing the index to be accessed of the tokens list\r\n   * @return uint256 token ID at the given index of the tokens list\r\n   */\r\n  function tokenByIndex(uint256 _index) public view returns (uint256) {\r\n    require(_index < totalSupply());\r\n    return allTokens[_index];\r\n  }\r\n\r\n  /**\r\n   * @dev Internal function to add a token ID to the list of a given address\r\n   * @param _to address representing the new owner of the given token ID\r\n   * @param _tokenId uint256 ID of the token to be added to the tokens list of the given address\r\n   */\r\n  function addTokenTo(address _to, uint256 _tokenId) internal whenNotPaused {\r\n    super.addTokenTo(_to, _tokenId);\r\n    uint256 length = ownedTokens[_to].length;\r\n    ownedTokens[_to].push(_tokenId);\r\n    ownedTokensIndex[_tokenId] = length;\r\n  }\r\n\r\n  /**\r\n   * @dev Internal function to remove a token ID from the list of a given address\r\n   * @param _from address representing the previous owner of the given token ID\r\n   * @param _tokenId uint256 ID of the token to be removed from the tokens list of the given address\r\n   */\r\n  function removeTokenFrom(address _from, uint256 _tokenId) internal whenNotPaused {\r\n    super.removeTokenFrom(_from, _tokenId);\r\n\r\n    uint256 tokenIndex = ownedTokensIndex[_tokenId];\r\n    uint256 lastTokenIndex = ownedTokens[_from].length.sub(1);\r\n    uint256 lastToken = ownedTokens[_from][lastTokenIndex];\r\n\r\n    ownedTokens[_from][tokenIndex] = lastToken;\r\n    ownedTokens[_from][lastTokenIndex] = 0;\r\n    // Note that this will handle single-element arrays. In that case, both tokenIndex and lastTokenIndex are going to\r\n    // be zero. Then we can make sure that we will remove _tokenId from the ownedTokens list since we are first swapping\r\n    // the lastToken to the first position, and then dropping the element placed in the last position of the list\r\n\r\n    ownedTokens[_from].length--;\r\n    ownedTokensIndex[_tokenId] = 0;\r\n    ownedTokensIndex[lastToken] = tokenIndex;\r\n  }\r\n\r\n  /**\r\n   * @dev Internal function to mint a new token\r\n   * Reverts if the given token ID already exists\r\n   * @param _to address the beneficiary that will own the minted token\r\n   * @param _tokenId uint256 ID of the token to be minted by the msg.sender\r\n   */\r\n  function _mint(address _to, uint256 _tokenId) internal {\r\n    super._mint(_to, _tokenId);\r\n\r\n    allTokensIndex[_tokenId] = allTokens.length;\r\n    allTokens.push(_tokenId);\r\n  }\r\n\r\n  /**\r\n   * @dev Internal function to burn a specific token\r\n   * Reverts if the token does not exist\r\n   * @param _owner owner of the token to burn\r\n   * @param _tokenId uint256 ID of the token being burned by the msg.sender\r\n   */\r\n  function _burn(address _owner, uint256 _tokenId) internal {\r\n    super._burn(_owner, _tokenId);\r\n    \r\n\r\n    // Reorg all tokens array\r\n    uint256 tokenIndex = allTokensIndex[_tokenId];\r\n    uint256 lastTokenIndex = allTokens.length.sub(1);\r\n    uint256 lastToken = allTokens[lastTokenIndex];\r\n\r\n    allTokens[tokenIndex] = lastToken;\r\n    allTokens[lastTokenIndex] = 0;\r\n\r\n    allTokens.length--;\r\n    allTokensIndex[_tokenId] = 0;\r\n    allTokensIndex[lastToken] = tokenIndex;\r\n  }\r\n}\r\n\r\n/**\r\n  if a ERC721 item want to mount to avatar, it must to inherit this.\r\n */\r\ninterface AvatarChildService {\r\n  /**\r\n      @dev if you want your contract become a avatar child, please let your contract inherit this interface\r\n      @param _tokenId1  first child token id\r\n      @param _tokenId2  second child token id\r\n      @return  true will unmount first token before mount ,false will directly mount child\r\n   */\r\n   function compareItemSlots(uint256 _tokenId1, uint256 _tokenId2) external view returns (bool _res);\r\n\r\n  /**\r\n   @dev if you want your contract become a avatar child, please let your contract inherit this interface\r\n   @return return true will be to avatar child\r\n   */\r\n   function isAvatarChild(uint256 _tokenId) external view returns(bool);\r\n}\r\n\r\ninterface AvatarItemService {\r\n\r\n  function getTransferTimes(uint256 _tokenId) external view returns(uint256);\r\n  function getOwnedItems(address _owner) external view returns(uint256[] _tokenIds);\r\n  \r\n  function getItemInfo(uint256 _tokenId)\r\n    external \r\n    view \r\n    returns(string, string, bool, uint256[4] _attr1, uint8[5] _attr2, uint16[2] _attr3);\r\n\r\n  function isBurned(uint256 _tokenId) external view returns (bool); \r\n  function isSameItem(uint256 _tokenId1, uint256 _tokenId2) external view returns (bool _isSame);\r\n  function getBurnedItemCount() external view returns (uint256);\r\n  function getBurnedItemByIndex(uint256 _index) external view returns (uint256);\r\n  function getSameItemCount(uint256 _tokenId) external view returns(uint256);\r\n  function getSameItemIdByIndex(uint256 _tokenId, uint256 _index) external view returns(uint256);\r\n  function getItemHash(uint256 _tokenId) external view returns (bytes8); \r\n\r\n  function burnItem(address _owner, uint256 _tokenId) external;\r\n  /**\r\n    @param _owner         owner of the token\r\n    @param _founder       founder type of the token \r\n    @param _creator       creator type of the token\r\n    @param _isBitizenItem true is for bitizen or false\r\n    @param _attr1         _atrr1[0] => node   _atrr1[1] => listNumber _atrr1[2] => setNumber  _atrr1[3] => quality\r\n    @param _attr2         _atrr2[0] => rarity _atrr2[1] => socket     _atrr2[2] => gender     _atrr2[3] => energy  _atrr2[4] => ext \r\n    @param _attr3         _atrr3[0] => miningTime  _atrr3[1] => magicFind     \r\n    @return               token id\r\n   */\r\n  function createItem( \r\n    address _owner,\r\n    string _founder,\r\n    string _creator, \r\n    bool _isBitizenItem, \r\n    uint256[4] _attr1,\r\n    uint8[5] _attr2,\r\n    uint16[2] _attr3)\r\n    external  \r\n    returns(uint256 _tokenId);\r\n\r\n  function updateItem(\r\n    uint256 _tokenId,\r\n    bool  _isBitizenItem,\r\n    uint16 _miningTime,\r\n    uint16 _magicFind,\r\n    uint256 _node,\r\n    uint256 _listNumber,\r\n    uint256 _setNumber,\r\n    uint256 _quality,\r\n    uint8 _rarity,\r\n    uint8 _socket,\r\n    uint8 _gender,\r\n    uint8 _energy,\r\n    uint8 _ext\r\n  ) \r\n  external;\r\n}\r\n\r\ncontract AvatarItemToken is ERC721ExtendToken, AvatarItemService, AvatarChildService {\r\n\r\n  enum ItemHandleType{NULL, CREATE_ITEM, UPDATE_ITEM, BURN_ITEM}\r\n  \r\n  event ItemHandleEvent(address indexed _owner, uint256 indexed _itemId,ItemHandleType _type);\r\n\r\n  struct AvatarItem {\r\n    string foundedBy;     // item founder\r\n    string createdBy;     // item creator\r\n    bool isBitizenItem;   // true for bitizen false for other\r\n    uint16 miningTime;    // decrease the mine time, range to 0 ~ 10000/0.00% ~ 100.00%\r\n    uint16 magicFind;     // increase get rare item, range to 0 ~ 10000/0.00% ~ 100.00%\r\n    uint256 node;         // node token id \r\n    uint256 listNumber;   // list number\r\n    uint256 setNumber;    // set number\r\n    uint256 quality;      // quality of item \r\n    uint8 rarity;         // 01 => Common 02 => Uncommon  03 => Rare  04 => Epic 05 => Legendary 06 => Godlike 10 => Limited\r\n    uint8 socket;         // 01 => Head   02 => Top  03 => Bottom  04 => Feet  05 => Trinket  06 => Acc  07 => Props \r\n    uint8 gender;         // 00 => Male   01 => Female 10 => Male-only 11 => Female-only  Unisex => 99\r\n    uint8 energy;         // increases extra mining times\r\n    uint8 ext;            // extra attribute for future\r\n  }\r\n  \r\n  // item id index\r\n  uint256 internal itemIndex = 0;\r\n  // tokenId => item\r\n  mapping(uint256 => AvatarItem) internal avatarItems;\r\n  // all the burned token ids\r\n  uint256[] internal burnedItemIds;\r\n  // check token id => isBurned\r\n  mapping(uint256 => bool) internal isBurnedItem;\r\n  // hash(item) => tokenIds\r\n  mapping(bytes8 => uint256[]) internal sameItemIds;\r\n  // token id => index in the same item token ids array\r\n  mapping(uint256 => uint256) internal sameItemIdIndex;\r\n  // token id => hash(item)\r\n  mapping(uint256 => bytes8) internal itemIdToHash;\r\n  // item token id => transfer count\r\n  mapping(uint256 => uint256) internal itemTransferCount;\r\n\r\n  // avatar address, add default permission to handle item\r\n  address internal avatarAccount = this;\r\n\r\n  // contain burned token and exist token \r\n  modifier validItem(uint256 _itemId) {\r\n    require(_itemId > 0 && _itemId <= itemIndex, \"token not vaild\");\r\n    _;\r\n  }\r\n\r\n  modifier itemExists(uint256 _itemId){\r\n    require(exists(_itemId), \"token error\");\r\n    _;\r\n  }\r\n\r\n  function setDefaultApprovalAccount(address _account) public onlyOwner {\r\n    avatarAccount = _account;\r\n  }\r\n\r\n  function compareItemSlots(uint256 _itemId1, uint256 _itemId2)\r\n    external\r\n    view\r\n    itemExists(_itemId1)\r\n    itemExists(_itemId2)\r\n    returns (bool) {\r\n    require(_itemId1 != _itemId2, \"compared token shouldn't be the same\");\r\n    return avatarItems[_itemId1].socket == avatarItems[_itemId2].socket;\r\n  }\r\n\r\n  function isAvatarChild(uint256 _itemId) external view returns(bool){\r\n    return true;\r\n  }\r\n\r\n  function getTransferTimes(uint256 _itemId) external view validItem(_itemId) returns(uint256) {\r\n    return itemTransferCount[_itemId];\r\n  }\r\n\r\n  function getOwnedItems(address _owner) external view onlyOperator returns(uint256[] _items) {\r\n    require(_owner != address(0), \"address invalid\");\r\n    return ownedTokens[_owner];\r\n  }\r\n\r\n  function getItemInfo(uint256 _itemId)\r\n    external \r\n    view \r\n    validItem(_itemId)\r\n    returns(string, string, bool, uint256[4] _attr1, uint8[5] _attr2, uint16[2] _attr3) {\r\n    AvatarItem storage item = avatarItems[_itemId];\r\n    _attr1[0] = item.node;\r\n    _attr1[1] = item.listNumber;\r\n    _attr1[2] = item.setNumber;\r\n    _attr1[3] = item.quality;  \r\n    _attr2[0] = item.rarity;\r\n    _attr2[1] = item.socket;\r\n    _attr2[2] = item.gender;\r\n    _attr2[3] = item.energy;\r\n    _attr2[4] = item.ext;\r\n    _attr3[0] = item.miningTime;\r\n    _attr3[1] = item.magicFind;\r\n    return (item.foundedBy, item.createdBy, item.isBitizenItem, _attr1, _attr2, _attr3);\r\n  }\r\n\r\n  function isBurned(uint256 _itemId) external view validItem(_itemId) returns (bool) {\r\n    return isBurnedItem[_itemId];\r\n  }\r\n\r\n  function getBurnedItemCount() external view returns (uint256) {\r\n    return burnedItemIds.length;\r\n  }\r\n\r\n  function getBurnedItemByIndex(uint256 _index) external view returns (uint256) {\r\n    require(_index < burnedItemIds.length, \"out of boundary\");\r\n    return burnedItemIds[_index];\r\n  }\r\n\r\n  function getSameItemCount(uint256 _itemId) external view validItem(_itemId) returns(uint256) {\r\n    return sameItemIds[itemIdToHash[_itemId]].length;\r\n  }\r\n  \r\n  function getSameItemIdByIndex(uint256 _itemId, uint256 _index) external view validItem(_itemId) returns(uint256) {\r\n    bytes8 itemHash = itemIdToHash[_itemId];\r\n    uint256[] storage items = sameItemIds[itemHash];\r\n    require(_index < items.length, \"out of boundray\");\r\n    return items[_index];\r\n  }\r\n\r\n  function getItemHash(uint256 _itemId) external view validItem(_itemId) returns (bytes8) {\r\n    return itemIdToHash[_itemId];\r\n  }\r\n\r\n  function isSameItem(uint256 _itemId1, uint256 _itemId2)\r\n    external\r\n    view\r\n    validItem(_itemId1)\r\n    validItem(_itemId2)\r\n    returns (bool _isSame) {\r\n    if(_itemId1 == _itemId2) {\r\n      _isSame = true;\r\n    } else {\r\n      _isSame = _calcuItemHash(_itemId1) == _calcuItemHash(_itemId2);\r\n    }\r\n  }\r\n\r\n  function burnItem(address _owner, uint256 _itemId) external onlyOperator itemExists(_itemId) {\r\n    _burnItem(_owner, _itemId);\r\n  }\r\n\r\n  function createItem( \r\n    address _owner,\r\n    string _founder,\r\n    string _creator, \r\n    bool _isBitizenItem, \r\n    uint256[4] _attr1,\r\n    uint8[5] _attr2,\r\n    uint16[2] _attr3)\r\n    external  \r\n    onlyOperator\r\n    returns(uint256 _itemId) {\r\n    require(_owner != address(0), \"address invalid\");\r\n    AvatarItem memory item = _mintItem(_founder, _creator, _isBitizenItem, _attr1, _attr2, _attr3);\r\n    _itemId = ++itemIndex;\r\n    avatarItems[_itemId] = item;\r\n    _mint(_owner, _itemId);\r\n    _saveItemHash(_itemId);\r\n    emit ItemHandleEvent(_owner, _itemId, ItemHandleType.CREATE_ITEM);\r\n  }\r\n\r\n  function updateItem(\r\n    uint256 _itemId,\r\n    bool  _isBitizenItem,\r\n    uint16 _miningTime,\r\n    uint16 _magicFind,\r\n    uint256 _node,\r\n    uint256 _listNumber,\r\n    uint256 _setNumber,\r\n    uint256 _quality,\r\n    uint8 _rarity,\r\n    uint8 _socket,\r\n    uint8 _gender,\r\n    uint8 _energy,\r\n    uint8 _ext\r\n  ) \r\n  external \r\n  onlyOperator\r\n  itemExists(_itemId){\r\n    _deleteOldValue(_itemId); \r\n    _updateItem(_itemId,_isBitizenItem,_miningTime,_magicFind,_node,_listNumber,_setNumber,_quality,_rarity,_socket,_gender,_energy,_ext);\r\n    _saveItemHash(_itemId);\r\n  }\r\n\r\n  function _deleteOldValue(uint256 _itemId) private {\r\n    uint256[] storage tokenIds = sameItemIds[itemIdToHash[_itemId]];\r\n    require(tokenIds.length > 0);\r\n    uint256 lastTokenId = tokenIds[tokenIds.length - 1];\r\n    tokenIds[sameItemIdIndex[_itemId]] = lastTokenId;\r\n    sameItemIdIndex[lastTokenId] = sameItemIdIndex[_itemId];\r\n    tokenIds.length--;\r\n  }\r\n\r\n  function _saveItemHash(uint256 _itemId) private {\r\n    bytes8 itemHash = _calcuItemHash(_itemId);\r\n    uint256 index = sameItemIds[itemHash].push(_itemId);\r\n    sameItemIdIndex[_itemId] = index - 1;\r\n    itemIdToHash[_itemId] = itemHash;\r\n  }\r\n    \r\n  function _calcuItemHash(uint256 _itemId) private view returns (bytes8) {\r\n    AvatarItem storage item = avatarItems[_itemId];\r\n    bytes memory itemBytes = abi.encodePacked(\r\n      item.isBitizenItem,\r\n      item.miningTime,\r\n      item.magicFind,\r\n      item.node,\r\n      item.listNumber,\r\n      item.setNumber,\r\n      item.quality,\r\n      item.rarity,\r\n      item.socket,\r\n      item.gender,\r\n      item.energy,\r\n      item.ext\r\n      );\r\n    return bytes8(keccak256(itemBytes));\r\n  }\r\n\r\n  function _mintItem(  \r\n    string _foundedBy,\r\n    string _createdBy, \r\n    bool _isBitizenItem, \r\n    uint256[4] _attr1, \r\n    uint8[5] _attr2,\r\n    uint16[2] _attr3) \r\n    private\r\n    pure\r\n    returns(AvatarItem _item) {\r\n    _item = AvatarItem(\r\n      _foundedBy,\r\n      _createdBy,\r\n      _isBitizenItem, \r\n      _attr3[0], \r\n      _attr3[1], \r\n      _attr1[0],\r\n      _attr1[1], \r\n      _attr1[2], \r\n      _attr1[3],\r\n      _attr2[0], \r\n      _attr2[1], \r\n      _attr2[2], \r\n      _attr2[3],\r\n      _attr2[4]\r\n    );\r\n  }\r\n\r\n  function _updateItem(\r\n    uint256 _itemId,\r\n    bool  _isBitizenItem,\r\n    uint16 _miningTime,\r\n    uint16 _magicFind,\r\n    uint256 _node,\r\n    uint256 _listNumber,\r\n    uint256 _setNumber,\r\n    uint256 _quality,\r\n    uint8 _rarity,\r\n    uint8 _socket,\r\n    uint8 _gender,\r\n    uint8 _energy,\r\n    uint8 _ext\r\n  ) private {\r\n    AvatarItem storage item = avatarItems[_itemId];\r\n    item.isBitizenItem = _isBitizenItem;\r\n    item.miningTime = _miningTime;\r\n    item.magicFind = _magicFind;\r\n    item.node = _node;\r\n    item.listNumber = _listNumber;\r\n    item.setNumber = _setNumber;\r\n    item.quality = _quality;\r\n    item.rarity = _rarity;\r\n    item.socket = _socket;\r\n    item.gender = _gender;  \r\n    item.energy = _energy; \r\n    item.ext = _ext; \r\n    emit ItemHandleEvent(_ownerOf(_itemId), _itemId, ItemHandleType.UPDATE_ITEM);\r\n  }\r\n\r\n  function _burnItem(address _owner, uint256 _itemId) private {\r\n    burnedItemIds.push(_itemId);\r\n    isBurnedItem[_itemId] = true;\r\n    _burn(_owner, _itemId);\r\n    emit ItemHandleEvent(_owner, _itemId, ItemHandleType.BURN_ITEM);\r\n  }\r\n\r\n  // override \r\n  //Add default permission to avatar, user can change this permission by call setApprovalForAll\r\n  function _mint(address _to, uint256 _itemId) internal {\r\n    super._mint(_to, _itemId);\r\n    operatorApprovals[_to][avatarAccount] = true;\r\n  }\r\n\r\n  // override\r\n  // record every token transfer count\r\n  function _transfer(address _from, address _to, uint256 _itemId) internal {\r\n    super._transfer(_from, _to, _itemId);\r\n    itemTransferCount[_itemId]++;\r\n  }\r\n\r\n  function () public payable {\r\n    revert();\r\n  }\r\n}", "OptimizationUsed": "1", "ContractName": "AvatarItemToken", "ByteCode": "0x60806040526004361061027c5763ffffffff7c010000000000000000000000000000000000000000000000000000000060003504166301ffc9a781146102815780630386f6f0146102b757806306fdde031461030f578063081812fc14610399578063095ea7b3146103cd57806318160ddd146103f357806319fa8f501461040857806323b872dd1461043a578063271691b1146104645780632f745c59146104bd57806330efb8d3146104e157806340400fa7146104f657806342842e0e1461050b578063439455e4146105355780634f6ccce71461054d57806363365651146105655780636352211e1461057a57806367d0661d146105925780636d70f7ae146105a757806370a08231146105c8578063715018a6146105e9578063747bbf7c146105fe578063786431c1146106165780637d1286f61461062b5780637f7bc4bc14610640578063819ee03a146106615780638ab34722146106765780638b62f437146106915780638da5cb5b146106a9578063931688cb146106be57806395d89b41146106de5780639870d7fe146106f35780639caa944814610714578063a22cb46514610749578063ac8a584a1461076f578063b187bd2614610790578063b88d4fde146107a5578063bc104f24146107de578063bc14016b146107f9578063bd12a0071461080e578063c825798a14610823578063c87b56dd1461083b578063db44fe0714610853578063de7fe3e71461086b578063e28d4906146109f0578063e417dc3514610a08578063e583983614610a79578063e724529c14610a9a578063e985e9c514610ac0578063ecc98ce414610ae7578063f2fde38b14610afc578063fa3c88a314610b1d578063fba2854514610b41575b600080fd5b34801561028d57600080fd5b506102a3600160e060020a031960043516610b5c565b604080519115158252519081900360200190f35b3480156102c357600080fd5b506102fd60048035600160a060020a03169060248035808201929081013591604435908101910135606435151560846101046101a4610b7b565b60408051918252519081900360200190f35b34801561031b57600080fd5b50610324610ee6565b6040805160208082528351818301528351919283929083019185019080838360005b8381101561035e578181015183820152602001610346565b50505050905090810190601f16801561038b5780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b3480156103a557600080fd5b506103b1600435610f1e565b60408051600160a060020a039092168252519081900360200190f35b3480156103d957600080fd5b506103f1600160a060020a0360043516602435610f39565b005b3480156103ff57600080fd5b506102fd611011565b34801561041457600080fd5b5061041d611017565b60408051600160e060020a03199092168252519081900360200190f35b34801561044657600080fd5b506103f1600160a060020a036004358116906024351660443561103b565b34801561047057600080fd5b506103f1600435602435151561ffff6044358116906064351660843560a43560c43560e43560ff6101043581169061012435811690610144358116906101643581169061018435166110ad565b3480156104c957600080fd5b506102fd600160a060020a03600435166024356111b2565b3480156104ed57600080fd5b506103f1611224565b34801561050257600080fd5b506102fd611258565b34801561051757600080fd5b506103f1600160a060020a036004358116906024351660443561125e565b34801561054157600080fd5b506102fd6004356112db565b34801561055957600080fd5b506102fd600435611365565b34801561057157600080fd5b5061041d61139a565b34801561058657600080fd5b506103b16004356113be565b34801561059e57600080fd5b506103f16113cf565b3480156105b357600080fd5b506102a3600160a060020a0360043516611405565b3480156105d457600080fd5b506102fd600160a060020a036004351661141a565b3480156105f557600080fd5b506103f161144d565b34801561060a57600080fd5b506102fd6004356114ae565b34801561062257600080fd5b506102fd611518565b34801561063757600080fd5b5061041d61151e565b34801561064c57600080fd5b506103f1600160a060020a0360043516611542565b34801561066d57600080fd5b5061041d61157b565b34801561068257600080fd5b506102fd60043560243561159f565b34801561069d57600080fd5b506102a36004356116a9565b3480156106b557600080fd5b506103b16116af565b3480156106ca57600080fd5b506103f160048035602481019101356116be565b3480156106ea57600080fd5b506103246116e6565b3480156106ff57600080fd5b506103f1600160a060020a036004351661171d565b34801561072057600080fd5b5061072c6004356118fc565b60408051600160c060020a03199092168252519081900360200190f35b34801561075557600080fd5b506103f1600160a060020a0360043516602435151561196f565b34801561077b57600080fd5b506103f1600160a060020a0360043516611a03565b34801561079c57600080fd5b506102a3611c09565b3480156107b157600080fd5b506103f1600160a060020a0360048035821691602480359091169160443591606435908101910135611c12565b3480156107ea57600080fd5b506102a3600435602435611cb7565b34801561080557600080fd5b506103f1611e0f565b34801561081a57600080fd5b5061041d611e99565b34801561082f57600080fd5b506102fd600435611ebd565b34801561084757600080fd5b50610324600435611f2a565b34801561085f57600080fd5b506102a3600435611fe1565b34801561087757600080fd5b50610883600435612051565b6040518080602001806020018715151515815260200186600460200280838360005b838110156108bd5781810151838201526020016108a5565b5050505090500185600560200280838360005b838110156108e85781810151838201526020016108d0565b5050505090500184600260200280838360005b838110156109135781810151838201526020016108fb565b50505050905001838103835289818151815260200191508051906020019080838360005b8381101561094f578181015183820152602001610937565b50505050905090810190601f16801561097c5780820380516001836020036101000a031916815260200191505b5083810382528851815288516020918201918a019080838360005b838110156109af578181015183820152602001610997565b50505050905090810190601f1680156109dc5780820380516001836020036101000a031916815260200191505b509850505050505050505060405180910390f35b3480156109fc57600080fd5b506103b160043561229e565b348015610a1457600080fd5b50610a29600160a060020a03600435166122c6565b60408051602080825283518183015283519192839290830191858101910280838360005b83811015610a65578181015183820152602001610a4d565b505050509050019250505060405180910390f35b348015610a8557600080fd5b506102a3600160a060020a0360043516612413565b348015610aa657600080fd5b506103f1600160a060020a03600435166024351515612449565b348015610acc57600080fd5b506102a3600160a060020a03600435811690602435166124d9565b348015610af357600080fd5b5061041d612507565b348015610b0857600080fd5b506103f1600160a060020a036004351661252b565b348015610b2957600080fd5b506103f1600160a060020a036004351660243561254e565b348015610b4d57600080fd5b506102a3600435602435612626565b600160e060020a03191660009081526020819052604090205460ff1690565b6000610b856137cb565b3360009081526004602052604090205460ff1680610bad5750600154600160a060020a031633145b1515610c05576040805160e560020a62461bcd02815260206004820152603460248201526000805160206139e38339815191526044820152600080516020613a03833981519152606482015290519081900360840190fd5b600160a060020a038b161515610c65576040805160e560020a62461bcd02815260206004820152600f60248201527f6164647265737320696e76616c69640000000000000000000000000000000000604482015290519081900360640190fd5b610d2d8a8a8080601f01602080910402602001604051908101604052809392919081815260200183838082843782019150505050505089898080601f01602080910402602001604051908101604052809392919081815260200183838082843750506040805160808181019092528e955093508c925060049150839083908082843750506040805160a081810190925293508c9250600591508390839080828437505060408051808201825293508c9250600291508390839080828437506127179350505050565b601080546001019081905560008181526011602090815260409091208351805193965093945084939092610d64928492019061383f565b506020828101518051610d7d926001850192019061383f565b5060408201516002820180546060850151608086015160ff199283169415159490941762ffff00191661010061ffff92831681029190911764ffff000000191663010000009290951682029490941790925560a0850151600385015560c0850151600485015560e08501516005850155828501516006850155610120850151600790940180546101408701516101608801516101808901516101a0909901519290941660ff9788161761ff0019169087169095029490941762ff0000191662010000928616929092029190911763ff00000019169484169091029390931764ff0000000019166401000000009290911691909102179055610e7e8b836127bd565b610e87826127fd565b818b600160a060020a03167f11ddb00bc81d987a0d7f9d97cae6ce35cfdf3a7422e0c1a60f199107c85d60c6600160405180826003811115610ec557fe5b60ff16815260200191505060405180910390a3509998505050505050505050565b60408051808201909152600c81527f426974697a656e206974656d000000000000000000000000000000000000000060208201525b90565b600090815260086020526040902054600160a060020a031690565b60055460009060ff1615610f4c57600080fd5b610f558261286e565b9050600160a060020a038381169082161415610f7057600080fd5b33600160a060020a0382161480610faa5750600160a060020a0381166000908152600a6020908152604080832033845290915290205460ff165b1515610fb557600080fd5b6000828152600860205260408082208054600160a060020a031916600160a060020a0387811691821790925591518593918516917f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b92591a4505050565b600e5490565b7f01ffc9a70000000000000000000000000000000000000000000000000000000081565b8061104633826128dd565b151561109c576040805160e560020a62461bcd02815260206004820181905260248201527f5468697320616464726573732068617665206e6f207065726d69737374696f6e604482015290519081900360640190fd5b6110a784848461295c565b50505050565b3360009081526004602052604090205460ff16806110d55750600154600160a060020a031633145b151561112d576040805160e560020a62461bcd02815260206004820152603460248201526000805160206139e38339815191526044820152600080516020613a03833981519152606482015290519081900360840190fd5b8c61113781612980565b151561117b576040805160e560020a62461bcd02815260206004820152600b6024820152600080516020613a23833981519152604482015290519081900360640190fd5b6111848e61299d565b6111998e8e8e8e8e8e8e8e8e8e8e8e8e612a4e565b6111a28e6127fd565b5050505050505050505050505050565b6000600160a060020a03831615156111c957600080fd5b600160a060020a03831660009081526009602052604090205482106111ed57600080fd5b600160a060020a0383166000908152600c6020526040902080548390811061121157fe5b9060005260206000200154905092915050565b60055460ff16151561123557600080fd5b600154600160a060020a0316331461124c57600080fd5b6005805460ff19169055565b60125490565b8061126933826128dd565b15156112bf576040805160e560020a62461bcd02815260206004820181905260248201527f5468697320616464726573732068617665206e6f207065726d69737374696f6e604482015290519081900360640190fd5b6110a78484846020604051908101604052806000815250612bdd565b6000816000811180156112f057506010548111155b1515611334576040805160e560020a62461bcd02815260206004820152600f60248201526000805160206139c3833981519152604482015290519081900360640190fd5b505060009081526016602090815260408083205460c060020a02600160c060020a0319168352601490915290205490565b600061136f611011565b821061137a57600080fd5b600e80548390811061138857fe5b90600052602060002001549050919050565b7f780e9d630000000000000000000000000000000000000000000000000000000081565b60006113c98261286e565b92915050565b60055460ff16156113df57600080fd5b600154600160a060020a031633146113f657600080fd5b6005805460ff19166001179055565b60046020526000908152604090205460ff1681565b6000600160a060020a038216151561143157600080fd5b50600160a060020a031660009081526009602052604090205490565b600154600160a060020a0316331461146457600080fd5b600154604051600160a060020a03909116907ff8df31144d9c2f0f6b59d69b8b98abd5459d07f2742c4df920b25aae33c6482090600090a260018054600160a060020a0319169055565b601254600090821061150a576040805160e560020a62461bcd02815260206004820152600f60248201527f6f7574206f6620626f756e646172790000000000000000000000000000000000604482015290519081900360640190fd5b601280548390811061138857fe5b60035481565b7f4f558e790000000000000000000000000000000000000000000000000000000081565b600154600160a060020a0316331461155957600080fd5b60188054600160a060020a031916600160a060020a0392909216919091179055565b7f80ac58cd0000000000000000000000000000000000000000000000000000000081565b6000806000846000811180156115b757506010548111155b15156115fb576040805160e560020a62461bcd02815260206004820152600f60248201526000805160206139c3833981519152604482015290519081900360640190fd5b60008681526016602090815260408083205460c060020a02600160c060020a0319811684526014909252909120805491945092508510611685576040805160e560020a62461bcd02815260206004820152600f60248201527f6f7574206f6620626f756e647261790000000000000000000000000000000000604482015290519081900360640190fd5b818581548110151561169357fe5b9060005260206000200154935050505092915050565b50600190565b600154600160a060020a031681565b600154600160a060020a031633146116d557600080fd5b6116e1600b83836138bd565b505050565b60408051808201909152600481527f49544d5400000000000000000000000000000000000000000000000000000000602082015290565b600154600160a060020a0316331461173457600080fd5b600160a060020a0381161515611794576040805160e560020a62461bcd02815260206004820152601d60248201527f496e76616c6964206e6577206f70657261746f7220616464726573732e000000604482015290519081900360640190fd5b600160a060020a03811660009081526004602052604090205460ff1615611805576040805160e560020a62461bcd02815260206004820152601460248201527f4e6577206f70657261746f72206578697374732e000000000000000000000000604482015290519081900360640190fd5b60035460025410611860576040805160e560020a62461bcd02815260206004820152600960248201527f4f766572666c6f772e0000000000000000000000000000000000000000000000604482015290519081900360640190fd5b6002805460018082019092557f405787fa12a823e0f2b7631cc41b3ba8828b3321ca811111fa75cd3aa3bb5ace018054600160a060020a031916600160a060020a038416908117909155600081815260046020908152604091829020805460ff19169094179093558051918252517fac6fa858e9350a46cec16539926e0fde25b7629f84b5a72bffaae4df888ae86d929181900390910190a150565b60008160008111801561191157506010548111155b1515611955576040805160e560020a62461bcd02815260206004820152600f60248201526000805160206139c3833981519152604482015290519081900360640190fd5b505060009081526016602052604090205460c060020a0290565b60055460ff161561197f57600080fd5b600160a060020a03821633141561199557600080fd5b336000818152600a60209081526040808320600160a060020a03871680855290835292819020805460ff1916861515908117909155815190815290519293927f17307eab39ab6107e8899845ad3d59bd9653f200f220920489ca2b5937696c31929181900390910190a35050565b6001546000908190600160a060020a03163314611a1f57600080fd5b600254600010611a79576040805160e560020a62461bcd02815260206004820152600c60248201527f4e6f206f70657261746f722e0000000000000000000000000000000000000000604482015290519081900360640190fd5b600160a060020a03831660009081526004602052604090205460ff161515611aeb576040805160e560020a62461bcd02815260206004820152601060248201527f4e6f7420616e206f70657261746f722e00000000000000000000000000000000604482015290519081900360640190fd5b600280546000198101908110611afd57fe5b6000918252602082200154600160a060020a0316925090505b600254811015611b9b5782600160a060020a0316600282815481101515611b3957fe5b600091825260209091200154600160a060020a03161415611b935781600282815481101515611b6457fe5b9060005260206000200160006101000a815481600160a060020a030219169083600160a060020a031602179055505b600101611b16565b600280546000190190611bae908261392b565b50600160a060020a038316600081815260046020908152604091829020805460ff19169055815192835290517f80c0b871b97b595b16a7741c1b06fed0c6f6f558639f18ccbce50724325dc40d9281900390910190a1505050565b60055460ff1681565b82611c1d33826128dd565b1515611c73576040805160e560020a62461bcd02815260206004820181905260248201527f5468697320616464726573732068617665206e6f207065726d69737374696f6e604482015290519081900360640190fd5b611caf86868686868080601f01602080910402602001604051908101604052809392919081815260200183838082843750612bdd945050505050565b505050505050565b600082611cc381612980565b1515611d07576040805160e560020a62461bcd02815260206004820152600b6024820152600080516020613a23833981519152604482015290519081900360640190fd5b82611d1181612980565b1515611d55576040805160e560020a62461bcd02815260206004820152600b6024820152600080516020613a23833981519152604482015290519081900360640190fd5b84841415611dd2576040805160e560020a62461bcd028152602060048201526024808201527f636f6d706172656420746f6b656e2073686f756c646e2774206265207468652060448201527f73616d6500000000000000000000000000000000000000000000000000000000606482015290519081900360840190fd5b60008481526011602052604080822060079081015488845291909220909101546101009182900460ff90811692909104161492505b505092915050565b600154600090600160a060020a03163314611e2957600080fd5b5060005b600254811015611e8857600060046000600284815481101515611e4c57fe5b600091825260208083209190910154600160a060020a031683528201929092526040019020805460ff1916911515919091179055600101611e2d565b6000611e9560028261392b565b5050565b7f5b5e139f0000000000000000000000000000000000000000000000000000000081565b600081600081118015611ed257506010548111155b1515611f16576040805160e560020a62461bcd02815260206004820152600f60248201526000805160206139c3833981519152604482015290519081900360640190fd5b505060009081526017602052604090205490565b6060611f3582612980565b1515611f4057600080fd5b600b805460408051602060026001851615610100026000190190941693909304601f81018490048402820184019092528181526113c993869391929091830182828015611fce5780601f10611fa357610100808354040283529160200191611fce565b820191906000526020600020905b815481529060010190602001808311611fb157829003601f168201915b5050505050612bff90919063ffffffff16565b600081600081118015611ff657506010548111155b151561203a576040805160e560020a62461bcd02815260206004820152600f60248201526000805160206139c3833981519152604482015290519081900360640190fd5b505060009081526013602052604090205460ff1690565b606080600061205e61394f565b61206661396e565b61206e61398d565b60008760008111801561208357506010548111155b15156120c7576040805160e560020a62461bcd02815260206004820152600f60248201526000805160206139c3833981519152604482015290519081900360640190fd5b6000898152601160209081526040918290206003810154885260048101548883015260058101548884015260068101546060808a0191909152600782015460ff8082168a5261010080830482168b87015262010000830482168b88015263010000008084048316948c0194909452640100000000909204811660808b015260028085015461ffff84820481168c529481049094168a87015284548751601f60001960018481161590970201909216929092049081018790048702820187019097528681529397508795918601949216928a928a928a92918891908301828280156121f25780601f106121c7576101008083540402835291602001916121f2565b820191906000526020600020905b8154815290600101906020018083116121d557829003601f168201915b5050885460408051602060026001851615610100026000190190941693909304601f8101849004840282018401909252818152959b508a9450925084019050828280156122805780601f1061225557610100808354040283529160200191612280565b820191906000526020600020905b81548152906001019060200180831161226357829003601f168201915b50505050509450975097509750975097509750505091939550919395565b60028054829081106122ac57fe5b600091825260209091200154600160a060020a0316905081565b3360009081526004602052604090205460609060ff16806122f15750600154600160a060020a031633145b1515612349576040805160e560020a62461bcd02815260206004820152603460248201526000805160206139e38339815191526044820152600080516020613a03833981519152606482015290519081900360840190fd5b600160a060020a03821615156123a9576040805160e560020a62461bcd02815260206004820152600f60248201527f6164647265737320696e76616c69640000000000000000000000000000000000604482015290519081900360640190fd5b600160a060020a0382166000908152600c60209081526040918290208054835181840281018401909452808452909183018282801561240757602002820191906000526020600020905b8154815260200190600101908083116123f3575b50505050509050919050565b6000600160a060020a038216151561242a57600080fd5b50600160a060020a031660009081526006602052604090205460ff1690565b600154600160a060020a0316331461246057600080fd5b600160a060020a038216151561247557600080fd5b600160a060020a038216600081815260066020908152604091829020805460ff191685151590811790915582519384529083015280517f48335238b4855f35377ed80f164e8c6f3c366e54ac00b96a6402d4a9814a03a59281900390910190a15050565b600160a060020a039182166000908152600a6020908152604080832093909416825291909152205460ff1690565b7f150b7a020000000000000000000000000000000000000000000000000000000081565b600154600160a060020a0316331461254257600080fd5b61254b81612ddb565b50565b3360009081526004602052604090205460ff16806125765750600154600160a060020a031633145b15156125ce576040805160e560020a62461bcd02815260206004820152603460248201526000805160206139e38339815191526044820152600080516020613a03833981519152606482015290519081900360840190fd5b806125d881612980565b151561261c576040805160e560020a62461bcd02815260206004820152600b6024820152600080516020613a23833981519152604482015290519081900360640190fd5b6116e18383612e4c565b60008260008111801561263b57506010548111155b151561267f576040805160e560020a62461bcd02815260206004820152600f60248201526000805160206139c3833981519152604482015290519081900360640190fd5b8260008111801561269257506010548111155b15156126d6576040805160e560020a62461bcd02815260206004820152600f60248201526000805160206139c3833981519152604482015290519081900360640190fd5b838514156126e75760019250611e07565b6126f084612ef5565b600160c060020a03191661270386612ef5565b600160c060020a0319161495945050505050565b61271f6137cb565b50604080516101c08101825296875260208088019690965293151586850152805161ffff9081166060808901919091529186015116608080880191909152835160a08801528386015160c08801528385015160e088015292810151610100870152815160ff9081166101208801529482015185166101408701529281015184166101608601529182015183166101808501520151166101a082015290565b6127c7828261305a565b50600160a060020a039081166000908152600a60209081526040808320601854909416835292905220805460ff19166001179055565b60008061280983612ef5565b600160c060020a0319811660009081526014602090815260408083208054600181018255908452828420810188905596835260158252808320969096556016905293909320805467ffffffffffffffff191660c060020a909404939093179092555050565b600081815260076020526040812054600160a060020a03168015156113c9576040805160e560020a62461bcd02815260206004820152600f60248201527f546f6b656e206e6f742065786973740000000000000000000000000000000000604482015290519081900360640190fd5b6000806128e98361286e565b905080600160a060020a031684600160a060020a031614806129245750600083815260086020526040902054600160a060020a038581169116145b806129545750600160a060020a038082166000908152600a602090815260408083209388168352929052205460ff165b949350505050565b6129678383836130a9565b6000908152601760205260409020805460010190555050565b600090815260076020526040902054600160a060020a0316151590565b60008181526016602090815260408083205460c060020a02600160c060020a031916835260149091528120805490919081106129d857600080fd5b8154829060001981019081106129ea57fe5b9060005260206000200154905080826015600086815260200190815260200160002054815481101515612a1957fe5b6000918252602080832090910192909255848152601590915260408082205483835291205581546110a783600019830161392b565b6000601160008f815260200190815260200160002090508c8160020160006101000a81548160ff0219169083151502179055508b8160020160016101000a81548161ffff021916908361ffff1602179055508a8160020160036101000a81548161ffff021916908361ffff160217905550898160030181905550888160040181905550878160050181905550868160060181905550858160070160006101000a81548160ff021916908360ff160217905550848160070160016101000a81548160ff021916908360ff160217905550838160070160026101000a81548160ff021916908360ff160217905550828160070160036101000a81548160ff021916908360ff160217905550818160070160046101000a81548160ff021916908360ff1602179055508d612b7e8f61286e565b600160a060020a03167f11ddb00bc81d987a0d7f9d97cae6ce35cfdf3a7422e0c1a60f199107c85d60c6600260405180826003811115612bba57fe5b60ff16815260200191505060405180910390a35050505050505050505050505050565b612be884848461295c565b612bf484848484613137565b15156110a757600080fd5b81518290819060001901600a6298968085040660300160f860020a028260078303815181101515612c2c57fe5b906020010190600160f860020a031916908160001a905350600a620f424085040660300160f860020a028260068303815181101515612c6757fe5b906020010190600160f860020a031916908160001a905350600a620186a085040660300160f860020a028260058303815181101515612ca257fe5b906020010190600160f860020a031916908160001a905350600a61271085040660300160f860020a028260048303815181101515612cdc57fe5b906020010190600160f860020a031916908160001a905350600a6103e885040660300160f860020a028260038303815181101515612d1657fe5b906020010190600160f860020a031916908160001a905350600a606485040660300160f860020a028260028303815181101515612d4f57fe5b906020010190600160f860020a031916908160001a905350600a8085040660300160f860020a028260018303815181101515612d8757fe5b906020010190600160f860020a031916908160001a905350815160f860020a6030600a8706010290839083908110612dbb57fe5b906020010190600160f860020a031916908160001a905350505092915050565b600160a060020a0381161515612df057600080fd5b600154604051600160a060020a038084169216907f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e090600090a360018054600160a060020a031916600160a060020a0392909216919091179055565b6012805460018181019092557fbb8a6a4669ba250d26cd7a459eca9d215f8307e33aebe50379bc5a3617ec3444018290556000828152601360205260409020805460ff19169091179055612ea082826132a4565b8082600160a060020a03167f11ddb00bc81d987a0d7f9d97cae6ce35cfdf3a7422e0c1a60f199107c85d60c6600360405180826003811115612ede57fe5b60ff16815260200191505060405180910390a35050565b6000818152601160209081526040808320600281015460038201546004830154600584015460068501546007860154875160f860020a60ff80891615158202838d01527e0100000000000000000000000000000000000000000000000000000000000061ffff610100808c0482168302602187015263010000009b8c90049091169190910260238501526025840198909852604583019690965260658201949094526085810192909252808416830260a58301529384048316820260a68201526201000084048316820260a78201529383048216810260a8850152640100000000909204160260a98201528251608a81830301815260aa90910192839052805191939092839290918291908401908083835b602083106130265780518252601f199092019160209182019101613007565b5181516020939093036101000a60001901801990911692169190911790526040519201829003909120979650505050505050565b6130648282613360565b600e80546000838152600f60205260408120829055600182018355919091527fbb7b4a454dc3493923482f07822329ed19e8244eff582cc204f8554c3620c3fd015550565b600160a060020a03831615156130be57600080fd5b600160a060020a03821615156130d357600080fd5b6130dd83826133bb565b6130e7838261342d565b6130f18282613578565b8082600160a060020a031684600160a060020a03167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef60405160405180910390a4505050565b60008061314c85600160a060020a03166135d2565b151561315b576001915061329b565b6040517f150b7a020000000000000000000000000000000000000000000000000000000081523360048201818152600160a060020a03898116602485015260448401889052608060648501908152875160848601528751918a169463150b7a0294938c938b938b93909160a490910190602085019080838360005b838110156131ee5781810151838201526020016131d6565b50505050905090810190601f16801561321b5780820380516001836020036101000a031916815260200191505b5095505050505050602060405180830381600087803b15801561323d57600080fd5b505af1158015613251573d6000803e3d6000fd5b505050506040513d602081101561326757600080fd5b5051600160e060020a031981167f150b7a020000000000000000000000000000000000000000000000000000000014925090505b50949350505050565b60008060006132b385856135da565b6000848152600f6020526040902054600e549093506132d990600163ffffffff61362a16565b9150600e828154811015156132ea57fe5b9060005260206000200154905080600e8481548110151561330757fe5b6000918252602082200191909155600e80548490811061332357fe5b600091825260209091200155600e80549061334290600019830161392b565b506000938452600f6020526040808520859055908452909220555050565b600160a060020a038216151561337557600080fd5b61337f8282613578565b6040518190600160a060020a038416906000907fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef908290a45050565b60055460ff16156133cb57600080fd5b81600160a060020a03166133de8261286e565b600160a060020a0316146133f157600080fd5b600081815260086020526040902054600160a060020a031615611e955760009081526008602052604090208054600160a060020a031916905550565b6005546000908190819060ff161561344457600080fd5b61344e858561363c565b6000848152600d6020908152604080832054600160a060020a0389168452600c9092529091205490935061348990600163ffffffff61362a16565b600160a060020a0386166000908152600c60205260409020805491935090839081106134b157fe5b9060005260206000200154905080600c600087600160a060020a0316600160a060020a03168152602001908152602001600020848154811015156134f157fe5b6000918252602080832090910192909255600160a060020a0387168152600c9091526040812080548490811061352357fe5b6000918252602080832090910192909255600160a060020a0387168152600c9091526040902080549061355a90600019830161392b565b506000938452600d6020526040808520859055908452909220555050565b60055460009060ff161561358b57600080fd5b61359583836136fb565b50600160a060020a039091166000908152600c6020908152604080832080546001810182559084528284208101859055938352600d909152902055565b6000903b1190565b6135e482826133bb565b6135ee828261342d565b6040518190600090600160a060020a038516907fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef908390a45050565b60008282111561363657fe5b50900390565b60055460ff161561364c57600080fd5b81600160a060020a031661365f8261286e565b600160a060020a03161461367257600080fd5b600160a060020a03821660009081526006602052604090205460ff161561369857600080fd5b600160a060020a0382166000908152600960205260409020546136c290600163ffffffff61362a16565b600160a060020a039092166000908152600960209081526040808320949094559181526007909152208054600160a060020a0319169055565b60055460ff161561370b57600080fd5b600081815260076020526040902054600160a060020a03161561372d57600080fd5b600160a060020a03821660009081526006602052604090205460ff161561375357600080fd5b60008181526007602090815260408083208054600160a060020a031916600160a060020a038716908117909155835260099091529020546137959060016137b5565b600160a060020a0390921660009081526009602052604090209190915550565b6000828201838110156137c457fe5b9392505050565b604080516101c081018252606080825260208201819052600092820183905281018290526080810182905260a0810182905260c0810182905260e08101829052610100810182905261012081018290526101408101829052610160810182905261018081018290526101a081019190915290565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f1061388057805160ff19168380011785556138ad565b828001600101855582156138ad579182015b828111156138ad578251825591602001919060010190613892565b506138b99291506139a8565b5090565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f106138fe5782800160ff198235161785556138ad565b828001600101855582156138ad579182015b828111156138ad578235825591602001919060010190613910565b8154818355818111156116e1576000838152602090206116e19181019083016139a8565b6080604051908101604052806004906020820280388339509192915050565b60a0604051908101604052806005906020820280388339509192915050565b60408051808201825290600290829080388339509192915050565b610f1b91905b808211156138b957600081556001016139ae5600746f6b656e206e6f74207661696c6400000000000000000000000000000000005065726d697373696f6e2064656e6965642e204d75737420626520616e206f70657261746f72206f7220746865206f776e65722e000000000000000000000000746f6b656e206572726f72000000000000000000000000000000000000000000a165627a7a72305820f9ba348cae771522b04273df9529cadaeb56a59d253c1248d3015b53e8c440390029"}